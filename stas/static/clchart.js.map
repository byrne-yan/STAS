{"version":3,"sources":["webpack://ClChart/webpack/universalModuleDefinition","webpack://ClChart/webpack/bootstrap","webpack://ClChart/./src/util/cl.tool.js","webpack://ClChart/./src/data/cl.data.tools.js","webpack://ClChart/./src/cl.data.def.js","webpack://ClChart/./src/formula/cl.formula.js","webpack://ClChart/./src/util/cl.draw.js","webpack://ClChart/./src/chart/cl.chart.tools.js","webpack://ClChart/./src/chart/cl.chart.init.js","webpack://ClChart/./src/chart/cl.draw.kbar.js","webpack://ClChart/./src/chart/cl.draw.line.js","webpack://ClChart/./src/chart/cl.draw.right.js","webpack://ClChart/./src/chart/cl.draw.vbar.js","webpack://ClChart/./src/chart/cl.draw.vline.js","webpack://ClChart/./src/cl.chart.def.js","webpack://ClChart/./src/chart/cl.chart.button.js","webpack://ClChart/./src/chart/cl.chart.scroll.js","webpack://ClChart/./src/chart/cl.draw.axisX.js","webpack://ClChart/./src/chart/cl.draw.axisY.js","webpack://ClChart/./src/chart/cl.draw.cursor.js","webpack://ClChart/./src/chart/cl.draw.grid.js","webpack://ClChart/./src/chart/cl.draw.info.js","webpack://ClChart/./src/chart/cl.chart.line.js","webpack://ClChart/./src/chart/cl.chart.order.js","webpack://ClChart/./src/chart/cl.chart.js","webpack://ClChart/./src/event/cl.event.handler.js","webpack://ClChart/./src/event/cl.event.js","webpack://ClChart/./src/data/cl.data.js","webpack://ClChart/./src/plugins/cl.seer.js","webpack://ClChart/./src/plugins/cl.register.js","webpack://ClChart/./src/plugins/cl.seer.def.js","webpack://ClChart/./src/util/cl.ev.js","webpack://ClChart/./src/cl.api.js"],"names":["root","factory","exports","module","define","amd","ClChart","window","t","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","mode","__esModule","ns","create","key","bind","n","default","object","property","prototype","hasOwnProperty","p","s","e","addPreZero","v","slice","getMTime","ttime","mtime","seconds","Date","parseInt","isNaN","getDate","getFullYear","getMonth","getMinute","getHours","getMinutes","getDayWeek","day","Math","floor","getDay","getDayMon","_dayToTTime","getDayGap","beginDay","endDay","fromTTimeToStr","format","ttimePre","getSeconds","getMinuteGap","beginMin","endMin","getMinuteOffset","minute","offset","mincount","copyArrayOfDeep","obj","out","Array","isArray","len","length","copyJsonOfDeep","updateJsonOfDeep","source","isEmptyArray","offsetRect","rect","left","top","width","height","right","bottom","inRect","point","x","y","inRangeX","xx","inRangeY","yy","inArray","arr","indexOf","intersectArray","a","b","result","ai","bi","push","formatVolume","unit","parseFloat","toFixed","String","formatPrice","coinunit","limit","isopen","substr","formatShowTime","toString","formatInfo","volzoom","middle","zero","abs","__webpack_exports__","getValue","getExrightPriceRange","transExrightDay","transExrightMin","findIndexInMin","findDateInDay","getSize","checkZero","checkDayZero","checkDay5","updateStatic","matchDayToWeek","matchDayToMon","getMinuteCount","fromTradeTimeToIndex","fromIndexToTradeTime","_cl_data_def__WEBPACK_IMPORTED_MODULE_0__","_util_cl_tool__WEBPACK_IMPORTED_MODULE_1__","_ref","label","fields","index","arguments","val","idx","pow","vol","money","error","_getExrightPara","rightdata","exrightGs","exrightPg","exrightPx","FIELD_RIGHT","accrual","sendstock","allotstock","allotprice","gs","pg","px","_getExrightPrice","price","rightpara","start","stop","rights","j","_transExright","days","end","FIELD_DAY","open","high","low","close","_isRight","dateBegin","dateEnd","rightdate","time","status","lastIndex","today","finded","tradeDate","tradetime","maxDays","FIELD_DAY5","count","curDate","splice","daymins","allvol","allmoney","coinzoom","stktype","volunit","before","stophigh","stoplow","daydata","zipday","field","isBegin","k","week","month","begin","nowmin","tindex","STOCK_TYPE_INDEX","STOCK_TYPE_A","STOCK_TYPE_B","STOCK_TYPE_OTHER","STOCK_TRADETIME","FIELD_MIN","FIELD_TICK","FIELD_LINE","FIELD_ILINE","FIELD_NOW","FIELD_ENOW","FIELD_NOW_IDX","FIELD_INFO","FIELD_FINANCE","FIELD_TRADE","buy1","buyvol1","sell1","sellvol1","buy2","buyvol2","sell2","sellvol2","buy3","buyvol3","sell3","sellvol3","buy4","buyvol4","sell4","sellvol4","buy5","buyvol5","sell5","sellvol5","ups","upvol","downs","downvol","mids","midvol","marker","code","search","type","flow","total","earnings","info","ClFormula","_data_cl_data_tools__WEBPACK_IMPORTED_MODULE_0__","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","TypeError","iterator","from","_classCallCheck","_defineProperties","configurable","writable","_createClass","this","data","minIndex","maxIndex","nowIndex","offIndex","runSingleStock","formula","eval","singleValue","matchData","match","funcName","argStr","replace","split","apply","command","concat","period","off","$","Q","tt","et","nt","at","st","ot","ht","rt","_setLineWidth","context","lineWidth","_drawVline","yy1","yy2","moveTo","lineTo","_drawHline","xx1","xx2","_drawmoveTo","_drawlineTo","_drawRect","ww","hh","strokeRect","_fillRect","fillclr","fillStyle","fillRect","_drawBegin","clr","beginPath","strokeStyle","_drawEnd","stroke","_drawDashLine","x1","y1","x2","y2","dashLen","beveling","sqrt","num","_setFontSize","font","pixel","_drawTxt","txt","pos","textBaseline","textAlign","fillText","getTxtWith","charMap","fontSize","scale","allWidth","element","_getTxtWidth","measureText","__getTxtRect","config","spaceX","spaceY","_drawTxtRect","xxx","yyy","tr","bakclr","_drawCircle","arc","PI","_drawCircleAndFilled","fill","_drawLineAlone","oldclr","_drawSignCircle","Arc1","Arc2","Arc3","_drawSignHLine","item","linew","display","set","maxR","minR","_drawKBar","unitX","xxm","yyh","round","maxmin","max","unitY","yyl","min","filled","_drawVBar","_setTransColor","scolor","trans","style","sColor","toLowerCase","test","sColorNew","sColorChange","g","join","findNearTimeToIndex","findvalue","direction","setFixedLineFlags","showMode","fixed","maxCount","size","COLOR_WHITE","sys","line","back","baktxt","axis","grid","red","green","white","button","colume","box","COLOR_BLACK","_systemInfo","runPlatform","axisPlatform","eventPlatform","standard","sysColor","0","1","2","3","4","5","6","7","8","9",".",",","%",":"," ","K","V","O","L","-","[","]","mainCanvas","cursorCanvas","setColor","syscolor","color","setScale","canvas","clientWidth","clientHeight","initSystem","cfg","initCommonInfo","chart","father","checkLayout","layout","margin","title","axisX","scroll","digit","symbol","changeCursorStyle","cursor","getLineColor","ClDrawKBar","rectMain","linkInfo","hotKey","getData","codeInfo","ClDrawLine","labelX","labelY","colorIndex","showSort","skips","ClDrawRight","rightData","rightMode","G","U","ClDrawVBar","ClDrawVLine","CHART_LAYOUT","CHART_BUTTONS","CHART_ORDER","ZOOM_INFO_DEF","list","CHART_KBAR","zoomInfo","lines","axisY","className","extremum","method","maxvalue","minvalue","CHART_VBAR","CHART_NOW","CHART_NOWVOL","CHART_DAY5","CHART_DAY5VOL","CHART_NORMAL","DEFAULT_BUTTON","shape","hotIdx","visible","translucent","ClChartButton","callback","map","checkConfig","event","onPaint","self","break","center","DEFAULT_SCROLL","direct","range","select","ClChartScroll","setPublicRect","rectChart","rectMin","rectMax","rectMid","drawClear","drawGridline","drawButton","iscall","xpos","who","undefined","mousePos","findMouseIndex","checkMin","onChange","curIndex","head","tail","dt","xt","ClDrawAxisX","text","tradeTime","dataLayer","gt","ClDrawAxisY","align","static","hideInfo","posX","offX","offy","bt","ClDrawCursor","rectFather","axisXInfo","axisYInfo","clearRect","valueX","valueY","_beforePaint","onClear","th","_afterPaint","ClDrawGrid","offx","ClDrawInfo","rectMess","titleInfo","message","ClChartLine","buttons","childCharts","childDraws","setChildDraw","childLines","setChildLines","setButtons","setScroll","setZoomInfo","axisInfo","rectTitle","rectGridLine","rectAxisYLeft","rectAxisYRight","rectAxisX","rectScroll","ClassName","getLineDataKey","draw","CURSOR","TITLE","AXISY_LEFT","AXISY_RIGHT","AXISX","GRID","init","_this","hasButton","createButton","fastDrawEnd","zoomin","setStatus","zoomout","focused","beforeLocation","getMoveData","drawTitleInfo","moveIndex","locationData","readyData","drawChildDraw","readyDraw","drawChildLines","drawChildCharts","mm","getMiddle","maxrate","minrate","HSCROLL","readyScroll","newdata","getDataRange","calcMaxMin","showCursorLine","eventLayer","boardEvent","reDraw","newIndex","step","deltaY","keyCode","mouseIndex","getMouseMoveData","ClChartOrder","txtLen","timeLen","volLen","closeLen","isIndex","orderData","tickData","drawReady","drawIndex","drawOrder","drawTick","rectOrder","rectTick","inow","ticklen","drawGridLine","mmpCount","getColor","maxlines","recs","beginIndex","str","strint","DEFAULT_LINKINFO","locked","hotIndex","syscfg","setDataLayer","setEventLayer","fastDraw","clearData","layer","bindChart","initData","JSON","parse","setData","fastBuffer","makeLineData","usercfg","fastDrawBegin","isHideInfo","_getDistance","xLen","yLen","_getTouchInfo","mouseInfo","offsetX","offsetY","srcRect","getBoundingClientRect","pageX","pageY","_getEventInfo","ClEventHandler","eventBuild","isTouch","eventCanvas","addEventListener","preventDefault","addHandler","touchstart","touchend","touchmove","mousemove","mouseout","mousewheel","mouseup","mousedown","keyup","keydown","click","clearHandler","eventName","handler","attachEvent","removeEventListener","deattachEvent","emitEvent","__timestamp","touches","startX","startY","clearTimeout","longTapTimeout","startTime","now","point2","touchDistance","touchVector","setTimeout","target","previousTouchPoint","previousTouchTime","changedTouches","timestamp","moveX","moveY","previousPinchScale","pinchScale","mouseinfo","vector","angle","vector1","vector2","mr","acos","deltaX","buildMinaTouchEvent","eventObj","ClEvent","eventCfg","document","eventSource","bindEvent","firstChart","HotWin","clearEvent","getMousePos","chartPath","findEventPath","ignore","path","ClData","decimal","InData","OutData","flushNowData","nowdata","TICK","MIN","checked","flushTick","flushMin","DAY","mergeDay","NOW","WEEK","mergeWeek","MON","mergeMon","DAY5","mergeDay5","makeMinute","updateMinute","RIGHT","rightmode","outkey","mergeNowMinToMin","curMin","sumVol","sumMoney","hasData","stopIdx","FIELD_SEER","buy","stoploss","uid","cl_register","CHART_SEER","ClDrawSeer","nowprice","no","sourceSeer","startPrice","startTxt","surplus","paceY","drawTransRect","xxRight","infos","yl","stopOffset","stopX","nos","uids","date","hotSeer","lastDate","lastval","showSeer","filterSeer","_loop","showPrice","setHotButton","seerPos","getSeerPos","acrR","drawHotSeer","EV","handlers","_len","args","_key","forEach","scope","_len2","_key2","on","onetimeCallback","removeListener","DEF_CHART","DEF_DATA","PLUGINS","util","createSingleChart","createMulChart","ClChartDef","ClDataDef","ClPlugins","sysInfo","initChart","chartList","charts"],"mappings":"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","file":"clchart.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ClChart\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ClChart\"] = factory();\n\telse\n\t\troot[\"ClChart\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n//   时间处理函数\r\n\r\n/** @module ClTool */\r\n\r\n/**\r\n * add prefix with 0\r\n * @export\r\n * @param {Number} v\r\n * @param {Number} n\r\n * @return {String}\r\n */\r\nexport function addPreZero (v, n) { // n表示总共几位  (9,2) ---09\r\n  n = n > 9 ? 9 : n\r\n  const s = '000000000' + v\r\n  return s.slice(-1 * n)\r\n}\r\n\r\n/**\r\n * get time's millseconds\r\n * @export\r\n * @param {any} ttime\r\n * @return {Number}\r\n */\r\nexport function getMTime (ttime) { // 得到1970-1-1开始的毫秒数\r\n  let mtime, seconds\r\n  if (ttime === undefined) {\r\n    mtime = new Date()\r\n  } else {\r\n    if (typeof ttime === 'string') {\r\n      seconds = parseInt(ttime)\r\n    } else {\r\n      seconds = ttime\r\n    }\r\n    if (!isNaN(seconds)) {\r\n      mtime = new Date(seconds * 1000)\r\n    } else {\r\n      mtime = new Date()\r\n    }\r\n  }\r\n  return mtime\r\n}\r\n\r\n// time_t转换成20180101格式\r\n/**\r\n * format time_t to 20180101\r\n *\r\n * @export\r\n * @param {any} ttime\r\n * @return {Number}\r\n */\r\nexport function getDate (ttime) {\r\n  const mtime = getMTime(ttime)\r\n  return mtime.getFullYear() * 10000 + (mtime.getMonth() + 1) * 100 + mtime.getDate()\r\n}\r\n// time_t提取其中的分钟 1030\r\nexport function getMinute (ttime) {\r\n  const mtime = getMTime(ttime)\r\n  return mtime.getHours() * 100 + mtime.getMinutes()\r\n}\r\n// 求星期几 0-周日 6-周六\r\nexport function getDayWeek (day) {\r\n  const mtime = new Date(Math.floor(day / 10000), Math.floor((day % 10000) / 100) - 1, day % 100)\r\n  return mtime.getDay()\r\n}\r\n// 求星期几 0-周日 6-周六\r\nexport function getDayMon (day) {\r\n  const mtime = new Date(Math.floor(day / 10000), Math.floor((day % 10000) / 100) - 1, day % 100)\r\n  return mtime.getMonth() + 1\r\n}\r\n// 日期转换成time_t\r\nfunction _dayToTTime (day) {\r\n  const mtime = new Date(Math.floor(day / 10000), Math.floor((day % 10000) / 100) - 1, day % 100)\r\n  return mtime / 1000\r\n}\r\n// 得到两个日期间隔的天数\r\nexport function getDayGap (beginDay, endDay) {\r\n  return Math.floor((_dayToTTime(endDay) - _dayToTTime(beginDay)) / (24 * 3600))\r\n}\r\n// 格式化time_t为指定字符串\r\nexport function fromTTimeToStr (ttime, format, ttimePre) {\r\n  const mtime = getMTime(ttime)\r\n  switch (format) {\r\n    case 'minute':\r\n      if (ttimePre === undefined) {\r\n        return mtime.getHours() + ':' + addPreZero(mtime.getMinutes(), 2)\r\n      } else {\r\n        if (getMinute(ttime) === getMinute(ttimePre)) {\r\n          return ':' + addPreZero(mtime.getSeconds(), 2)\r\n        } else {\r\n          return mtime.getHours() + ':' + addPreZero(mtime.getMinutes(), 2)\r\n        }\r\n      }\r\n    case 'datetime':\r\n      return mtime.getFullYear() * 10000 + (mtime.getMonth() + 1) * 100 + mtime.getDate() +\r\n      '-' + mtime.getHours() + ':' + addPreZero(mtime.getMinutes(), 2)\r\n    default:\r\n      return ''\r\n  }\r\n}\r\n// 分钟转字符串 1500 -- 15:00\r\nexport function fromMinuteToStr (minute) {\r\n  return addPreZero(Math.floor(minute / 100), 2).toString() + ':' + addPreZero(minute % 100, 2).toString()\r\n}\r\n// 得到间隔分钟数\r\nexport function getMinuteGap (beginMin, endMin) {\r\n  return (Math.floor(endMin / 100) - Math.floor(beginMin / 100)) * 60 + endMin % 100 - beginMin % 100\r\n}\r\n\r\n// 偏移分钟数，offset 为分钟数\r\nexport function getMinuteOffset (minute, offset) {\r\n  const mincount = Math.floor(minute / 100) * 60 + minute % 100 + offset\r\n  return Math.floor(mincount / 60) * 100 + mincount % 60\r\n}\r\n\r\n// 公用无关性的函数集合\r\n\r\nexport function copyArrayOfDeep (obj) {\r\n  let out\r\n  if (Array.isArray(obj)) {\r\n    out = []\r\n    const len = obj.length\r\n    for (let i = 0; i < len; i++) {\r\n      out[i] = copyArrayOfDeep(obj[i])\r\n    }\r\n  } else {\r\n    out = obj\r\n  }\r\n  return out\r\n}\r\nexport function copyJsonOfDeep (obj) {\r\n  let out\r\n  if (obj instanceof Object) { // 数组和文档都为真\r\n    if (Array.isArray(obj)) { // 只有数组为真\r\n      out = copyArrayOfDeep(obj)\r\n    } else {\r\n      out = {}\r\n      for (const key in obj) {\r\n        out[key] = copyJsonOfDeep(obj[key])\r\n      }\r\n    }\r\n  } else {\r\n    out = obj\r\n  }\r\n  return out\r\n}\r\n// obj为子集，生成新的对象，仅仅替换source中存在的对应元素\r\n// 例如 obj = {a:[111],b:2} source = {a:[1,2,3]}\r\n// out = {a:[111,2,3]}\r\nexport function updateJsonOfDeep (obj, source) {\r\n  let out\r\n  if (source instanceof Object) {\r\n    if (Array.isArray(source)) {\r\n      out = []\r\n      for (const key in source) {\r\n        out[key] = obj && obj[key]\r\n          ? updateJsonOfDeep(obj[key], source[key])\r\n          : copyArrayOfDeep(source[key])\r\n      }\r\n    } else {\r\n      out = {}\r\n      for (const key in source) {\r\n        out[key] = obj && obj[key]\r\n          ? updateJsonOfDeep(obj[key], source[key])\r\n          : copyJsonOfDeep(source[key])\r\n      }\r\n    }\r\n  } else {\r\n    out = obj || source\r\n  }\r\n  return out\r\n}\r\n// // obj为原始集，不生成新的对象，用source中存在的对应元素替换obj的数据\r\n// // 例如 obj = {a:[111],b:2} source = {a:[1,2,3]}\r\n// // out = {a:[111,2,3],b:2}\r\nexport function mergeJsonOfDeep (obj, source) {\r\n  const out = updateJsonOfDeep(obj, source)\r\n\r\n  for (const key in obj) {\r\n    if (out[key] !== undefined) continue\r\n    if (obj[key] instanceof Object) {\r\n      if (Array.isArray(obj[key])) {\r\n        out[key] = copyArrayOfDeep(obj[key])\r\n      } else {\r\n        out[key] = copyJsonOfDeep(obj[key])\r\n      }\r\n    } else {\r\n      out[key] = obj[key]\r\n    }\r\n  }\r\n  return out\r\n}\r\n// 数组是否为空\r\nexport function isEmptyArray (obj) {\r\n  if (obj !== undefined && Array.isArray(obj)) {\r\n    if (obj.length > 0) return false\r\n  }\r\n  return true\r\n}\r\n// 根据offset返回一个新的矩形\r\n// rect:{left,top,width,height}\r\n// offset:{left,top,right,bottom}\r\nexport function offsetRect (rect, offset) {\r\n  if (rect === undefined) return { left: 0, top: 0, width: 0, height: 0 }\r\n  if (offset === undefined) return rect\r\n  return {\r\n    left: rect.left + offset.left,\r\n    top: rect.top + offset.top,\r\n    width: rect.width - (offset.left + offset.right),\r\n    height: rect.height - (offset.top + offset.bottom)\r\n  }\r\n}\r\n// 判断点是否在矩形内\r\nexport function inRect (rect, point) {\r\n  if (rect === undefined || point === undefined) return false\r\n  if (point.x >= rect.left && point.y >= rect.top &&\r\n    point.x < (rect.left + rect.width) &&\r\n    point.y < (rect.top + rect.height)) {\r\n    return true\r\n  }\r\n  return false\r\n}\r\n// 判断X是否在矩形宽度范围内\r\nexport function inRangeX (rect, xx) {\r\n  if (rect === undefined || xx === undefined) return false\r\n  if (xx >= rect.left &&\r\n    xx < (rect.left + rect.width)) {\r\n    return true\r\n  }\r\n  return false\r\n}\r\n// 判断Y是否在矩形高度范围内\r\nexport function inRangeY (rect, yy) {\r\n  if (rect === undefined || yy === undefined) return false\r\n  if (yy >= rect.top &&\r\n    yy < (rect.top + rect.height)) {\r\n    return true\r\n  }\r\n  return false\r\n}\r\n// 判断 v 是否在数组arr中, 比in准确\r\nexport function inArray (v, arr) {\r\n  if (arr.indexOf(v) < 0) return false\r\n  return true\r\n}\r\n// 求数组a和b的交集\r\nexport function intersectArray (a, b) {\r\n  const result = []\r\n  for (let ai = 0; ai < a.length; ai++) {\r\n    for (let bi = 0; bi < b.length; bi++) {\r\n      if (a[ai] === b[bi]) {\r\n        result.push(a[ai])\r\n        break\r\n      }\r\n    }\r\n  }\r\n  return result\r\n}\r\n// 求数组a和b的并集,去掉重复的元素\r\nexport function mergeArray (a, b) {\r\n  const result = []\r\n  for (let ai = 0; ai < a.length; ai++) {\r\n    result.push(a[ai])\r\n  }\r\n  for (let bi = 0; bi < b.length; bi++) {\r\n    if (!inArray(b[bi], result)) {\r\n      result.push(b[bi])\r\n    }\r\n  }\r\n  return result\r\n}\r\n// 格式化百分比\r\nexport function formatRate (value, zero) {\r\n  if (value === undefined || isNaN(value) || zero === undefined) return '--'\r\n  if (typeof value === 'string') value = parseFloat(value)\r\n\r\n  let result = Math.abs((value - zero) / zero * 100)\r\n  result = result.toFixed(2) + '%'\r\n  return result // 10.20%\r\n}\r\n// 格式化成交量\r\nexport function formatVolume (value, unit) {\r\n  if (value === undefined || isNaN(value)) return '--'\r\n  if (typeof value === 'string') value = parseFloat(value)\r\n\r\n  if (unit === undefined) unit = 100\r\n  let result = value / unit\r\n\r\n  if (result > 100000000000) result = (result / 100000000).toFixed(0) + '亿'\r\n  else if (result > 10000000000) result = (result / 100000000).toFixed(1) + '亿'\r\n  else if (result > 1000000000) result = (result / 100000000).toFixed(2) + '亿'\r\n  else if (result > 100000000) result = (result / 100000000).toFixed(3) + '亿'\r\n  else if (result > 10000000) result = (result / 10000).toFixed(0) + '万'\r\n  else if (result > 1000000) result = (result / 10000).toFixed(1) + '万'\r\n  else if (result > -0.000000001 && result < 0.000000001) result = '--'\r\n  else result = result.toFixed(0)\r\n  return String(result)\r\n}\r\n// 格式化价格 decimal为小数点，limit为最大长度[4,10]，\r\nexport function formatPrice (value, coinunit, limit, isopen) {\r\n  if (value === undefined || isNaN(value)) return '--'\r\n  // if (typeof value === 'string') value = parseFloat(value);\r\n\r\n  let result = value\r\n  if (coinunit === undefined || coinunit < 0 || coinunit > 10) coinunit = 0\r\n\r\n  if (value > -0.000000001 && value < 0.000000001 && !isopen) {\r\n    return '--'\r\n  }\r\n  result = result.toFixed(coinunit)\r\n\r\n  if (limit === undefined || limit < 4) return result\r\n  return result.substr(0, limit)\r\n}\r\n// 格式化时间\r\nexport function formatShowTime (key, value, minute) {\r\n  let out = value\r\n  switch (key) {\r\n    case 'M5':\r\n    case 'M15':\r\n    case 'M30':\r\n    case 'M60':\r\n      out = fromTTimeToStr(value, 'datetime')\r\n      break\r\n    case 'MIN':\r\n      if (minute === undefined) {\r\n        out = fromTTimeToStr(value, 'minute')\r\n      } else {\r\n        out = fromMinuteToStr(minute)\r\n      }\r\n      break\r\n    case 'DAY5':\r\n      out = fromTTimeToStr(value, 'minute')\r\n      break\r\n  }\r\n  return out\r\n}\r\n\r\nexport function formatInfo (value, format, coinunit, volzoom, middle) {\r\n  let out\r\n  if (format === 'rate') {\r\n    out = formatRate(value, middle)\r\n  } else {\r\n    if (format === 'price') {\r\n      if (coinunit === undefined) coinunit = 2\r\n      out = formatPrice(value, coinunit, 7)\r\n    } else {\r\n      if (volzoom === undefined) volzoom = 100\r\n      out = formatVolume(value, volzoom)\r\n    }\r\n  }\r\n  return out\r\n}\r\n\r\n// 数据转换函数集合\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\nimport {\r\n  FIELD_DAY,\r\n  FIELD_TICK,\r\n  FIELD_RIGHT,\r\n  FIELD_DAY5\r\n} from '../cl.data.def'\r\n\r\nimport {\r\n  copyArrayOfDeep,\r\n  isEmptyArray,\r\n  getDate,\r\n  getDayWeek,\r\n  getDayGap,\r\n  getDayMon,\r\n  getMinuteGap,\r\n  getMinute,\r\n  getMinuteOffset\r\n} from '../util/cl.tool'\r\n\r\n/** @module GetValue */\r\n\r\n// 按fields定义从数组value中获取，第index条标记为label的数据\r\n/**\r\n * get value\r\n * @export\r\n * @param {Object} {\r\n *   fields,\r\n *   value,\r\n * }\r\n * @param {String} label\r\n * @param {Number} [index=0]\r\n * @return {Number}\r\n */\r\nexport default function getValue ({\r\n  fields,\r\n  value\r\n}, label, index = 0) {\r\n  let val = 0\r\n  try {\r\n    // 支持二维数组和一维数组，判断如果是二维数组就取对应的值\r\n    let source = value\r\n    if (Array.isArray(value[0])) {\r\n      source = value[index]\r\n    }\r\n    switch (label) {\r\n      case 'idx':\r\n        // 序列，now 0-239，day5 0-5*239\r\n        // 非常重要，利用这里可以统一MIN和D5的画图\r\n        if (fields.idx === undefined) val = index\r\n        else val = source[fields.idx]\r\n        break\r\n      case 'coinzoom':\r\n        val = Math.pow(10, getValue({\r\n          fields,\r\n          value\r\n        }, 'coinzoom', 0))\r\n        break\r\n      case 'volzoom':\r\n        val = Math.pow(10, getValue({\r\n          fields,\r\n          value\r\n        }, 'volunit', 0))\r\n        break\r\n      // case 'before':\r\n      // case 'open':\r\n      // case 'high':\r\n      // case 'low':\r\n      // case 'close':\r\n      // case 'stophigh':\r\n      // case 'stoplow':\r\n      // case 'buy1':\r\n      // case 'buy2':\r\n      // case 'buy3':\r\n      // case 'buy4':\r\n      // case 'buy5':\r\n      // case 'sell1':\r\n      // case 'sell2':\r\n      // case 'sell3':\r\n      // case 'sell4':\r\n      // case 'sell5':\r\n      //   val = source[fields[label]]\r\n      //   break\r\n      case 'flow':\r\n      case 'total':\r\n        val = source[fields[label]] * 100\r\n        break\r\n      case 'decvol':\r\n        if (index === 0) {\r\n          val = source[fields.vol]\r\n        } else {\r\n          val = source[fields.vol] - getValue({\r\n            fields,\r\n            value\r\n          }, 'vol', index - 1)\r\n        }\r\n        break\r\n      case 'decmoney':\r\n        if (index === 0) {\r\n          val = source[fields.money]\r\n        } else {\r\n          val = source[fields.money] - getValue({\r\n            fields,\r\n            value\r\n          }, 'money', index - 1)\r\n        }\r\n        break\r\n      default:\r\n        if (source[fields[label]]) {\r\n          val = source[fields[label]]\r\n        }\r\n    }\r\n  } catch (error) {\r\n    val = 0\r\n  }\r\n  return val\r\n}\r\n\r\n// export function getTimeIndex(data, label, value) {\r\n//   let idx = -1;\r\n//   for (let i = data.value.length - 1; i >= 0; i--) {\r\n//     if (getValue(data, label, i) > value) continue;\r\n//     idx = i;\r\n//     break;\r\n//   }\r\n//   return idx;\r\n// }\r\n\r\n/**\r\n * get max value\r\n * @export\r\n * @param {Array} data\r\n * @param {String} label\r\n * @param {Number} value\r\n * @return {Number}\r\n */\r\nexport function getValueMax (data, label, value) {\r\n  let out = value\r\n  if (!Array.isArray(data.value)) return out\r\n  for (let k = 0; k < data.value.length; k++) {\r\n    const v = getValue(data, label, k)\r\n    if (v > out) out = v\r\n  }\r\n  return out\r\n}\r\n/**\r\n * get min value\r\n * @export\r\n * @param {Array} data\r\n * @param {String} label\r\n * @param {Number} value\r\n * @return {Number}\r\n */\r\nexport function getValueMin (data, label, value) {\r\n  let out = value\r\n  if (!Array.isArray(data.value)) return out\r\n  for (let k = 0; k < data.value.length; k++) {\r\n    const v = getValue(data, label, k)\r\n    if (v < out) out = v\r\n  }\r\n  return out\r\n}\r\n\r\n// 日线除权的函数集合\r\n\r\n/**\r\n * get exright para\r\n * @param {String} rightdata\r\n * @return {Object}\r\n */\r\nfunction _getExrightPara (rightdata) {\r\n  let exrightGs = 1000 // 送股数\r\n  let exrightPg = 0 // 配股数\r\n  let exrightPx = 0 // 利息\r\n  if (rightdata[FIELD_RIGHT.accrual]) exrightPx = rightdata[FIELD_RIGHT.accrual] / 10\r\n  if (rightdata[FIELD_RIGHT.sendstock] > 0 || rightdata[FIELD_RIGHT.allotstock] > 0) {\r\n    exrightGs = 1000 + rightdata[FIELD_RIGHT.sendstock] / 10 + rightdata[FIELD_RIGHT.allotstock] / 10\r\n    exrightPg = -rightdata[FIELD_RIGHT.allotprice] * rightdata[FIELD_RIGHT.allotstock] / 10000\r\n  }\r\n  return {\r\n    gs: exrightGs,\r\n    pg: exrightPg,\r\n    px: exrightPx\r\n  }\r\n}\r\n\r\n/**\r\n * @param {Number} price\r\n * @param {Object} rightpara\r\n * @param {String} mode\r\n * @return {Number}\r\n */\r\nfunction _getExrightPrice (price, rightpara, mode) {\r\n  if (mode === 'forword') {\r\n    price = (price * 1000 - rightpara.pg - rightpara.px) * 1000 / rightpara.gs\r\n  } else {\r\n    price = price * 1000 * rightpara.gs / 1000 + rightpara.pg + rightpara.px\r\n  }\r\n  return price / 1000\r\n}\r\n// 得到某个价格的除权价\r\n/**\r\n * Get an exemption price for a price\r\n * @export\r\n * @param {Number} start\r\n * @param {Number} stop\r\n * @param {Number} price\r\n  * @param {Array} rights\r\n * @return {Number}\r\n */\r\nexport function getExrightPriceRange (start, stop, price, rights) {\r\n  if (rights === undefined || rights.length < 1) return price\r\n  let rightpara\r\n  for (let j = 0; j < rights.length; j++) {\r\n    if (rights[j][0] > start && rights[j][0] <= stop) {\r\n      rightpara = _getExrightPara(rights[j])\r\n      price = _getExrightPrice(price, rightpara, 'forword')\r\n      break\r\n    }\r\n  }\r\n  return price\r\n}\r\n/**\r\n * transfer exright\r\n * @private\r\n * @param {Array} days\r\n * @param {Array} rightdata\r\n * @param {String} mode\r\n * @param {Number} start\r\n * @param {Number} end\r\n */\r\nfunction _transExright (days, rightdata, mode, start, end) {\r\n  const rightpara = _getExrightPara(rightdata)\r\n  if (mode === 'forword') {\r\n    for (let i = start; i < end; i++) {\r\n      days[i][FIELD_DAY.open] = _getExrightPrice(days[i][FIELD_DAY.open], rightpara, mode) // open\r\n      days[i][FIELD_DAY.high] = _getExrightPrice(days[i][FIELD_DAY.high], rightpara, mode) // high\r\n      days[i][FIELD_DAY.low] = _getExrightPrice(days[i][FIELD_DAY.low], rightpara, mode) // low\r\n      days[i][FIELD_DAY.close] = _getExrightPrice(days[i][FIELD_DAY.close], rightpara, mode) // new\r\n      days[i][FIELD_DAY.vol] = days[i][FIELD_DAY.vol] * rightpara.gs / 1000\r\n    }\r\n  }\r\n}\r\n\r\n// 判断是否有除权\r\n/**\r\n * check is right\r\n * @param {Date} dateBegin\r\n * @param {Date} dateEnd\r\n * @param {Date} rightdate\r\n * @return {Boolean}\r\n */\r\nfunction _isRight (dateBegin, dateEnd, rightdate) {\r\n  if (rightdate > dateBegin && rightdate <= dateEnd) {\r\n    return true\r\n  } else return false\r\n}\r\n// 对日线进行除权，周年线不能除权，,days传入时就是一个可修改的数组\r\n/**\r\n *\r\n *\r\n * @export\r\n * @param {Array} days\r\n * @param {Array} rights\r\n * @param {String} mode\r\n * @param {Number} start\r\n * @param {Number} end\r\n * @return {Array}\r\n */\r\nexport function transExrightDay (days, rights, mode, start, end) {\r\n  if (rights.length < 1 || days.length < 1) return days\r\n  if (mode === undefined) mode = 'forword' // 以最近的价格为基准,修正以前的价格;\r\n  if (start === undefined || start < 0 || start > days.length - 1) start = 0\r\n  if (end === undefined || end < 0) end = days.length - 1\r\n\r\n  if (mode === 'forword') {\r\n    for (let i = start; i <= end; i++) {\r\n      for (let j = 0; j < rights.length; j++) {\r\n        if (i < 1) continue\r\n        if (_isRight(days[i - 1][FIELD_DAY.time], days[i][FIELD_DAY.time], rights[j][FIELD_RIGHT.time])) {\r\n          _transExright(days, rights[j], mode, start, i)\r\n          break\r\n        }\r\n      }\r\n    }\r\n  } else if (mode === 'backword') {}\r\n  return days\r\n}\r\n\r\n// 对分钟线除权,days传入时就是一个可修改的数组\r\n/**\r\n * transfer exrigth min data\r\n * @export\r\n * @param {Array} days\r\n * @param {Array} rights\r\n * @param {String} mode\r\n * @param {Number} start\r\n * @param {Number} end\r\n * @return {Array}\r\n */\r\nexport function transExrightMin (days, rights, mode, start, end) {\r\n  if (rights.length < 1 || days.length < 1) return days\r\n  if (mode === undefined) mode = 'forword' // 以最近的价格为基准,修正以前的价格;\r\n  if (start === undefined || start < 0 || start > days.length - 1) start = 0\r\n  if (end === undefined || end < 0) end = days.length - 1\r\n\r\n  if (mode === 'forword') {\r\n    for (let i = start; i <= end; i++) {\r\n      for (let j = 0; j < rights.length; j++) {\r\n        if (i < 1) continue\r\n        if (_isRight(\r\n          getDate(days[i - 1][FIELD_DAY.time]),\r\n          getDate(days[i][FIELD_DAY.time]),\r\n          rights[j][FIELD_RIGHT.time])) {\r\n          _transExright(days, rights[j], mode, start, i)\r\n          break\r\n        }\r\n      }\r\n    }\r\n  } else if (mode === 'backword') {}\r\n  return days\r\n}\r\n\r\n// 检索数据函数集\r\n\r\n// 从分钟线查找对应记录\r\n/**\r\n * find index in min\r\n * @export\r\n * @param {Object} source\r\n * @param {Number} index\r\n * @return {Object}\r\n */\r\nexport function findIndexInMin (source, index) {\r\n  if (source.value.length < 1) {\r\n    return {\r\n      status: 'new',\r\n      index: -1\r\n    }\r\n  }\r\n  const lastIndex = source.value[source.value.length - 1][source.fields.time]\r\n  if (lastIndex === index) {\r\n    return {\r\n      status: 'old',\r\n      index: source.value.length - 1\r\n    }\r\n  } else if (lastIndex > index) {\r\n    return {\r\n      status: 'error',\r\n      index: source.value.length - 1\r\n    }\r\n  } else {\r\n    return {\r\n      status: 'new',\r\n      index: source.value.length - 1\r\n    }\r\n  }\r\n}\r\n// 从日线查找对应记录\r\n/**\r\n * find date in day\r\n * @export\r\n * @param {Object} source\r\n * @param {Number} today\r\n * @return {Object}\r\n */\r\nexport function findDateInDay (source, today) {\r\n  if (source === undefined || source.value === undefined || source.value.length < 1) {\r\n    return {\r\n      finded: false,\r\n      index: -1\r\n    }\r\n  }\r\n  const lastDate = source.value[source.value.length - 1][source.fields.time]\r\n  if (today === lastDate) {\r\n    return {\r\n      finded: true,\r\n      index: source.value.length - 1\r\n    }\r\n  }\r\n  return {\r\n    finded: false,\r\n    index: -1\r\n  }\r\n}\r\n// export function findDateInDay(source, today) {\r\n//   if (source === undefined || source.value === undefined || source.value.length < 1)\r\n//   {\r\n//     return {\r\n//       finded: false,\r\n//       index: -1\r\n//     };\r\n//   }\r\n//   const fields = source.fields;\r\n//   for (let i = source.value.length - 1; i >= 0; i--) {\r\n//     if (source.key === 'WEEK') {\r\n//       const curDay = source.value[i][fields.time];\r\n//       if (getDayGap(curDay, today) + getDayWeek(curDay) > 7) {\r\n//         return {\r\n//           finded: false,\r\n//           index: -1\r\n//         };\r\n//       } else {\r\n//         return {\r\n//           finded: true,\r\n//           index: i\r\n//         };\r\n//       }\r\n//     }\r\n//     if (source.key === 'MON') {\r\n//       const curMon = Math.floor(source.value[i][fields.time] / 100);\r\n//       const todayMon = Math.floor(today / 100);\r\n//       if (curMon !== todayMon) {\r\n//         return {\r\n//           finded: false,\r\n//           index: -1\r\n//         };\r\n//       } else {\r\n//         return {\r\n//           finded: true,\r\n//           index: i\r\n//         };\r\n//       }\r\n//     }\r\n//     if (source.key === 'DAY') {\r\n//       if (source.value[i][fields.time] === today) {\r\n//         return {\r\n//           finded: true,\r\n//           index: i\r\n//         };\r\n//       }\r\n//     }\r\n//   }\r\n//   return {\r\n//     finded: false,\r\n//     index: source.value.length - 1\r\n//   };\r\n// }\r\n\r\n// 检查数据完整性\r\n\r\n/**\r\n * get size\r\n * @export\r\n * @param {Object} source\r\n * @return {Boolean}\r\n */\r\nexport function getSize (source) {\r\n  if (source === undefined || isEmptyArray(source.value)) {\r\n    return 0\r\n  }\r\n  return source.value.length\r\n}\r\n/**\r\n * check zero\r\n * @export\r\n * @param {Array} value\r\n * @param {Object} fields\r\n * @return {Boolean}\r\n */\r\nexport function checkZero (value, fields) {\r\n  if (Array.isArray(value) &&\r\n    value[fields.open] > 0 &&\r\n    value[fields.high] > 0 &&\r\n    value[fields.low] > 0 &&\r\n    value[fields.close] > 0 &&\r\n    value[fields.vol] > 0 &&\r\n    value[fields.money] > 0) {\r\n    return false\r\n  } else {\r\n    return true\r\n  }\r\n}\r\n/**\r\n * check day zero\r\n * @export\r\n * @param {Object} source\r\n * @return {Array}\r\n */\r\nexport function checkDayZero (source) {\r\n  const out = []\r\n  if (!Array.isArray(source)) return out\r\n\r\n  for (let i = 0; i < source.length; i++) {\r\n    if (!checkZero(source[i], FIELD_DAY)) {\r\n      out.push(source[i])\r\n    }\r\n  }\r\n  return out\r\n}\r\n/**\r\n * check 5 day\r\n * @export\r\n * @param {Object} source\r\n * @param {Number} tradeDate\r\n * @param {Number} tradetime\r\n * @return {Array}\r\n */\r\nexport function checkDay5 (source, tradeDate, tradetime) {\r\n  const out = []\r\n  if (source.length < 1) return out\r\n\r\n  const lastDate = getDate(source[source.length - 1][FIELD_DAY5.time])\r\n  // 判断是否已经有收盘数据了\r\n  let maxDays = 5\r\n  if (!lastDate === tradeDate) maxDays = 4\r\n\r\n  let idx\r\n  let count = 0\r\n  let curDate = 0\r\n  for (idx = source.length - 1; idx >= 0; idx--) {\r\n    if (curDate !== getDate(source[idx][FIELD_DAY5.time])) {\r\n      curDate = getDate(source[idx][FIELD_DAY5.time])\r\n      count++\r\n      if (count > maxDays) {\r\n        idx++\r\n        break\r\n      }\r\n    }\r\n    out.splice(0, 0, [source[idx][FIELD_DAY5.time], source[idx][FIELD_DAY5.close], source[idx][FIELD_DAY5.vol]])\r\n  }\r\n\r\n  count = 0\r\n  curDate = 0\r\n  let vol = 0\r\n  let money = 0\r\n  const daymins = getMinuteCount(tradetime)\r\n  for (idx = 0; idx < out.length; idx++) {\r\n    if (curDate !== getDate(out[idx][FIELD_DAY5.time])) { // 增加记录\r\n      curDate = getDate(out[idx][FIELD_DAY5.time])\r\n      count++\r\n      vol = 0\r\n      money = 0\r\n    }\r\n    vol += out[idx][FIELD_DAY5.vol]\r\n    money += out[idx][FIELD_DAY5.close] * out[idx][FIELD_DAY5.vol]\r\n    let index = fromTradeTimeToIndex(out[idx][FIELD_DAY5.time], tradetime)\r\n    index += (count - 1) * daymins\r\n    out[idx][FIELD_DAY5.idx] = index\r\n    out[idx][FIELD_DAY5.allvol] = vol\r\n    out[idx][FIELD_DAY5.allmoney] = money\r\n  }\r\n  return out\r\n}\r\n/**\r\n * update static\r\n * @export\r\n * @param {Object} fields\r\n * @param {Array} value\r\n * @return {Array}\r\n */\r\nexport function updateStatic (fields, value) {\r\n  const coinzoom = getValue({\r\n    fields,\r\n    value\r\n  }, 'coinzoom')\r\n  const volzoom = getValue({\r\n    fields,\r\n    value\r\n  }, 'volzoom')\r\n  const out = {\r\n    stktype: getValue({\r\n      fields,\r\n      value\r\n    }, 'type'),\r\n    volzoom,\r\n    volunit: getValue({\r\n      fields,\r\n      value\r\n    }, 'volunit'),\r\n    coinzoom,\r\n    coinunit: getValue({\r\n      fields,\r\n      value\r\n    }, 'coinunit'),\r\n    before: getValue({\r\n      fields,\r\n      value\r\n    }, 'before'),\r\n    stophigh: getValue({\r\n      fields,\r\n      value\r\n    }, 'stophigh'),\r\n    stoplow: getValue({\r\n      fields,\r\n      value\r\n    }, 'stoplow')\r\n  }\r\n  return out\r\n}\r\n\r\n// 对数据进行周期性合并\r\n\r\n// export function matchMinToMinute(source, outkey) {\r\n//   switch (outkey) {\r\n//     case 'M15': out = matchMin5ToMinute(out, outkey, 15);\r\n//       break;\r\n//     case 'M30': out = matchMin5ToMinute(out, outkey, 30);\r\n//       break;\r\n//     case 'M60': out = matchMin5ToMinute(out, outkey, 60);\r\n//       break;\r\n//   }\r\n// export function mergeMin(daydata, rate) {\r\n// this.match_minute_line = function(srcfields, srcvalue, minfields, minvalue, period) {\r\n//   const out = copyArrayOfDeep(srcvalue);\r\n//   const cur_min = [];\r\n//   let base_vol = 0;\r\n//   let base_money = 0;\r\n\r\n//   let hasData = false;\r\n//   let stopIdx = 4;\r\n//   for (let k = 0; k < minvalue.length; k++) {\r\n//     const nowmin = minvalue[k][minfields.idx];\r\n//     if (nowmin < 0) continue;\r\n//     if (nowmin > stopIdx) {\r\n//       if (hasData) {\r\n//         cur_min[minfields.vol] = minvalue[k][minfields.vol] - base_vol;\r\n//         cur_min[minfields.money] = minvalue[k][minfields.money] - base_money;\r\n//         base_vol = minvalue[k][minfields.vol];\r\n//         base_money = minvalue[k][minfields.money];\r\n\r\n//         cur_min[minfields.time] = fromIndexToTradeTime(stopIdx, this.tradetime, this.tradeDate);\r\n//         out.push(copyArrayOfDeep(cur_min));\r\n//       }\r\n//       stopIdx = (Math.floor(nowmin / offset) + 1) * offset - 1;\r\n//       cur_min[minfields.open] = minvalue[k][minfields.open];\r\n//       cur_min[minfields.high] = minvalue[k][minfields.high];\r\n//       cur_min[minfields.low] = minvalue[k][minfields.low];\r\n//       cur_min[minfields.close] = minvalue[k][minfields.close];\r\n//       hasData = true;\r\n//     } else { // nowmin 在0-5之间\r\n//       if (hasData) {\r\n//         cur_min[minfields.high] = cur_min[minfields.high] > minvalue[k][minfields.high] ? cur_min[minfields.high] : minvalue[k][minfields.high];\r\n//         cur_min[minfields.low] = cur_min[minfields.low] < minvalue[k][minfields.low] || minvalue[k][minfields.low] === 0 ?\r\n//                                   cur_min[minfields.low] : minvalue[k][minfields.low];\r\n//         cur_min[minfields.close] = minvalue[k][minfields.close];\r\n//       } else {\r\n//         cur_min[minfields.open] = minvalue[k][minfields.open];\r\n//         cur_min[minfields.high] = minvalue[k][minfields.high];\r\n//         cur_min[minfields.low] = minvalue[k][minfields.low];\r\n//         cur_min[minfields.close] = minvalue[k][minfields.close];\r\n//         hasData = true;\r\n//       }\r\n//     }\r\n//   } // for i\r\n//   if (hasData) {\r\n//     cur_min[minfields.vol] = minvalue[minvalue.length - 1][minfields.vol] - base_vol;\r\n//     cur_min[minfields.money] = minvalue[minvalue.length - 1][minfields.money] - base_money;\r\n//     cur_min[minfields.time] = fromIndexToTradeTime(stopIdx, this.tradetime, this.tradeDate);\r\n//     out.push(copyArrayOfDeep(cur_min));\r\n//     // alert('4:'+out.toString());\r\n//   }\r\n//   return out;\r\n// }\r\n\r\n// 按rate率压缩日线和分钟数据，因为界面显示原因，可能会存在2日...7日等合并的线\r\n/**\r\n * get zip day\r\n * @export\r\n * @param {Array} daydata\r\n * @param {Number} rate\r\n * @return {Array}\r\n */\r\nexport function getZipDay (daydata, rate) {\r\n  if (rate < 1) return daydata\r\n  const out = []\r\n  const zipday = []\r\n\r\n  let count = 0\r\n  const field = FIELD_DAY\r\n  for (let k = 0; k < daydata.length; k++) {\r\n    if (count === 0) {\r\n      zipday[field.open] = daydata[k][field.open]\r\n      zipday[field.high] = daydata[k][field.high]\r\n      zipday[field.low] = daydata[k][field.low]\r\n      zipday[field.close] = daydata[k][field.close]\r\n      zipday[field.vol] = daydata[k][field.vol]\r\n      zipday[field.money] = daydata[k][field.money]\r\n      count = 1\r\n    } else {\r\n      zipday[field.high] = zipday[field.high] > daydata[k][field.high]\r\n        ? zipday[field.high] : daydata[k][field.high]\r\n      zipday[field.low] = zipday[field.low] < daydata[k][field.low] || daydata[k][field.low] === 0\r\n        ? zipday[field.low] : daydata[k][field.low]\r\n      zipday[field.close] = daydata[k][field.close]\r\n      zipday[field.vol] += daydata[k][field.vol]\r\n      zipday[field.money] += daydata[k][field.money]\r\n      count++\r\n      if (count >= rate) {\r\n        zipday[field.time] = daydata[k][field.time]\r\n        out.push(copyArrayOfDeep(zipday))\r\n        count = 0\r\n      }\r\n    }\r\n  } // for i\r\n  if (count > 0) {\r\n    zipday[field.time] = daydata[daydata.length - 1][field.time]\r\n    out.push(copyArrayOfDeep(zipday))\r\n  }\r\n  return out\r\n}\r\n// 日线到周线\r\n/**\r\n * convert day data to week data\r\n * @export\r\n * @param {Array} daydata\r\n * @return {Array}\r\n */\r\nexport function matchDayToWeek (daydata) {\r\n  const out = []\r\n  const zipday = []\r\n\r\n  const field = FIELD_DAY\r\n  let isBegin = true\r\n  for (let k = 0; k < daydata.length; k++) {\r\n    if (isBegin) {\r\n      zipday[field.open] = daydata[k][field.open]\r\n      zipday[field.high] = daydata[k][field.high]\r\n      zipday[field.low] = daydata[k][field.low]\r\n      isBegin = false\r\n    } else {\r\n      zipday[field.high] = zipday[field.high] > daydata[k][field.high]\r\n        ? zipday[field.high] : daydata[k][field.high]\r\n      zipday[field.low] = zipday[field.low] < daydata[k][field.low] || daydata[k][field.low] === 0\r\n        ? zipday[field.low] : daydata[k][field.low]\r\n    }\r\n    zipday[field.close] = daydata[k][field.close]\r\n    zipday[field.vol] = daydata[k][field.vol]\r\n    zipday[field.money] = daydata[k][field.money]\r\n\r\n    // 周五 or 下一个日期跨越一周\r\n    const week = getDayWeek(daydata[k][field.time])\r\n    if (k >= daydata.length - 1 || week === 5 ||\r\n      (getDayGap(daydata[k][field.time], daydata[k + 1][field.time]) + week > 7)) {\r\n      zipday[field.time] = daydata[k][field.time]\r\n      out.push(copyArrayOfDeep(zipday))\r\n      isBegin = true\r\n    }\r\n  } // for i\r\n  if (!isBegin) {\r\n    zipday[field.time] = daydata[daydata.length - 1][field.time]\r\n    out.push(copyArrayOfDeep(zipday))\r\n  }\r\n  return out\r\n}\r\n\r\n// 日线到月线\r\n/**\r\n * convert day data to month data\r\n * @export\r\n * @param {Array} daydata\r\n * @return {Array}\r\n */\r\nexport function matchDayToMon (daydata) {\r\n  let month\r\n  const out = []\r\n  const zipday = []\r\n\r\n  const field = FIELD_DAY\r\n  let isBegin = true\r\n  for (let k = 0; k < daydata.length; k++) {\r\n    if (isBegin) {\r\n      zipday[field.open] = daydata[k][field.open]\r\n      zipday[field.high] = daydata[k][field.high]\r\n      zipday[field.low] = daydata[k][field.low]\r\n      month = getDayMon(daydata[k][field.time])\r\n      isBegin = false\r\n    } else {\r\n      zipday[field.high] = zipday[field.high] > daydata[k][field.high]\r\n        ? zipday[field.high] : daydata[k][field.high]\r\n      zipday[field.low] = zipday[field.low] < daydata[k][field.low] || daydata[k][field.low] === 0\r\n        ? zipday[field.low] : daydata[k][field.low]\r\n    }\r\n    zipday[field.close] = daydata[k][field.close]\r\n    zipday[field.vol] = daydata[k][field.vol]\r\n    zipday[field.money] = daydata[k][field.money]\r\n\r\n    if (k >= daydata.length - 1 || getDayMon(daydata[k + 1][field.time]) !== month) {\r\n      zipday[field.time] = daydata[k][field.time]\r\n      out.push(copyArrayOfDeep(zipday))\r\n      isBegin = true\r\n    }\r\n  } // for i\r\n  if (!isBegin) {\r\n    zipday[field.time] = daydata[daydata.length - 1][field.time]\r\n    out.push(copyArrayOfDeep(zipday))\r\n  }\r\n  return out\r\n}\r\n\r\n// 求交易时间的总共分钟数 [{begin:930,end:1130},{...}]\r\n/**\r\n * get minute count\r\n * @export\r\n * @param {Number} tradetime\r\n * @return {Number}\r\n */\r\nexport function getMinuteCount (tradetime) { // time_t\r\n  let mincount = 0\r\n  for (let i = 0; i < tradetime.length; i++) {\r\n    mincount += getMinuteGap(tradetime[i].begin, tradetime[i].end)\r\n  }\r\n  return mincount\r\n}\r\n\r\n// 根据交易时间把time_t返回一个顺序值 time_t --> 0..239 -1表示没有非交易时间\r\n/**\r\n * convert time t to trade time\r\n * @export\r\n * @param {Number} ttime\r\n * @param {Number} tradetime\r\n * @return {Number}\r\n */\r\nexport function fromTradeTimeToIndex (ttime, tradetime) { // time_t 返回０－２３９\r\n  const minute = getMinute(ttime)\r\n\r\n  let nowmin = 0\r\n  let index = -1\r\n  for (let i = 0; i < tradetime.length; i++) {\r\n    // 9:31:00--11:29:59  13:01:00--14:59:59\r\n    if (minute > tradetime[i].begin && minute < tradetime[i].end) {\r\n      index = nowmin + getMinuteGap(tradetime[i].begin, minute)\r\n      break\r\n    }\r\n    if (minute <= tradetime[i].begin && i === 0) { // 8:00:00---9:30:59秒前都=0\r\n      return 0\r\n    }\r\n    if (minute <= tradetime[i].begin && (minute > getMinuteOffset(tradetime[i].begin, -5))) { // 12:55:59--13:00:59秒\r\n      return nowmin\r\n    }\r\n\r\n    nowmin += getMinuteGap(tradetime[i].begin, tradetime[i].end)\r\n\r\n    if (minute >= tradetime[i].end && i === tradetime.length - 1) { // 15:00:00秒后\r\n      return nowmin - 1\r\n    }\r\n    if (minute >= tradetime[i].end && (minute < getMinuteOffset(tradetime[i].end, 5))) { // 11:30:00--11:34:59秒\r\n      return nowmin - 1\r\n    }\r\n  }\r\n  return index\r\n}\r\n\r\n// 根据交易时间把0..239 转换为 time_t;  0 表示没有非交易时间\r\n/**\r\n * convert index to trade time\r\n * @export\r\n * @param {Number} tindex\r\n * @param {Number} tradetime\r\n * @param {Number} tradeDate\r\n * @return {Number}\r\n */\r\nexport function fromIndexToTradeTime (tindex, tradetime, tradeDate) {\r\n  let index = tindex\r\n  let offset = 0\r\n  let nowmin = 0\r\n  for (let i = 0; i < tradetime.length; i++) {\r\n    nowmin = getMinuteGap(tradetime[i].begin, tradetime[i].end)\r\n    if (index < nowmin) {\r\n      offset = getMinuteOffset(tradetime[i].begin, index + 1)\r\n      const ttime = new Date(Math.floor(tradeDate / 10000), Math.floor(tradeDate % 10000 / 100) - 1, tradeDate % 100,\r\n        Math.floor(offset / 100), offset % 100, 0)\r\n      return Math.floor(ttime / 1000)\r\n    }\r\n    index -= nowmin\r\n  }\r\n  return 0\r\n}\r\n/**\r\n * out put 5 day\r\n *\r\n * @export\r\n * @param {Object} source\r\n * @param {Number} tradetime\r\n * @return {Array}\r\n */\r\nexport function outputDay5 (source, tradetime) {\r\n  const out = {\r\n    key: 'DAY5',\r\n    fields: FIELD_DAY5,\r\n    value: []\r\n  }\r\n  if (source.length < 1) return out\r\n\r\n  let idx\r\n  let count = 0\r\n  let vol = 0\r\n  let money = 0\r\n  let curDate = 0\r\n  const daymins = getMinuteCount(tradetime)\r\n  for (idx = 0; idx < source.length; idx++) {\r\n    if (curDate !== getDate(source[idx][FIELD_TICK.time])) {\r\n      curDate = getDate(source[idx][FIELD_TICK.time])\r\n      count++\r\n      vol = 0\r\n      money = 0\r\n    }\r\n    vol += source[idx][FIELD_TICK.vol]\r\n    money += source[idx][FIELD_TICK.close] * source[idx][FIELD_TICK.vol]\r\n    let index = fromTradeTimeToIndex(source[idx][FIELD_TICK.time], tradetime)\r\n    index += (count - 1) * daymins\r\n    out.value.push([index, source[idx][FIELD_TICK.close], source[idx][FIELD_TICK.vol], money / vol])\r\n  }\r\n  return out\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n// 数据类型和数据名称分开；根据数据类型生成\r\n// 在comm中定义几个函数，用户可以自己定义数据类型，自己定义按钮，自己定义画线的方式，\r\n// 只要用户产生的类支持通用的接口onpaint等函数，并成功注册进来，就可以被chart拿来画图了\r\n// 这样扩展起来才方便\r\n// 而chart.line只画基础的一些图形，其他非标的图形由用户自行定义，包括数据生成的算法\r\n\r\nexport const STOCK_TYPE_INDEX = 0\r\nexport const STOCK_TYPE_A = 1\r\nexport const STOCK_TYPE_B = 4\r\nexport const STOCK_TYPE_OTHER = 5\r\n\r\nexport const STOCK_TRADETIME = [{\r\n  begin: 930,\r\n  end: 1130\r\n},\r\n{\r\n  begin: 1300,\r\n  end: 1500\r\n}\r\n]\r\n\r\n// 基本日线定义，历史分钟线，\r\nexport const FIELD_DAY = {\r\n  time: 0,\r\n  open: 1,\r\n  high: 2,\r\n  low: 3,\r\n  close: 4,\r\n  vol: 5,\r\n  money: 6\r\n}\r\nexport const FIELD_MIN = {\r\n  idx: 0,\r\n  open: 1,\r\n  high: 2,\r\n  low: 3,\r\n  close: 4,\r\n  vol: 5,\r\n  money: 6,\r\n  allvol: 5, // 增补\r\n  allmoney: 6 // 增补\r\n}\r\n\r\nexport const FIELD_TICK = {\r\n  time: 0,\r\n  close: 1,\r\n  vol: 2\r\n}\r\nexport const FIELD_DAY5 = {\r\n  time: 0,\r\n  close: 1,\r\n  vol: 2,\r\n  idx: 3, // 增补\r\n  allvol: 4, // 增补\r\n  allmoney: 5 // 增补\r\n}\r\n\r\n// 两种单线的定义\r\nexport const FIELD_LINE = {\r\n  time: 0,\r\n  value: 1\r\n}\r\nexport const FIELD_ILINE = {\r\n  idx: 0,\r\n  value: 1\r\n}\r\n\r\n// 标准5档实时行情\r\nexport const FIELD_NOW = {\r\n  time: 0,\r\n  open: 1,\r\n  high: 2,\r\n  low: 3,\r\n  close: 4,\r\n  vol: 5,\r\n  money: 6,\r\n  buy1: 7,\r\n  buyvol1: 8,\r\n  sell1: 9,\r\n  sellvol1: 10,\r\n  buy2: 11,\r\n  buyvol2: 12,\r\n  sell2: 13,\r\n  sellvol2: 14,\r\n  buy3: 15,\r\n  buyvol3: 16,\r\n  sell3: 17,\r\n  sellvol3: 18,\r\n  buy4: 19,\r\n  buyvol4: 20,\r\n  sell4: 21,\r\n  sellvol4: 22,\r\n  buy5: 23,\r\n  buyvol5: 24,\r\n  sell5: 25,\r\n  sellvol5: 26\r\n}\r\n// 简易一档实时行情\r\nexport const FIELD_ENOW = {\r\n  time: 0,\r\n  open: 1,\r\n  high: 2,\r\n  low: 3,\r\n  close: 4,\r\n  vol: 5,\r\n  money: 6,\r\n  buy1: 7,\r\n  buyvol1: 8,\r\n  sell1: 9,\r\n  sellvol1: 10\r\n}\r\n// 指数实时行情\r\nexport const FIELD_NOW_IDX = {\r\n  time: 0,\r\n  open: 1,\r\n  high: 2,\r\n  low: 3,\r\n  close: 4,\r\n  vol: 5,\r\n  money: 6,\r\n  ups: 7,\r\n  upvol: 8,\r\n  downs: 9,\r\n  downvol: 10,\r\n  mids: 11,\r\n  midvol: 12\r\n}\r\n\r\n// 股票信息定义\r\nexport const FIELD_INFO = {\r\n  marker: 0,\r\n  code: 1,\r\n  name: 2, // 股票名称\r\n  search: 3,\r\n  type: 4, // 股票类型\r\n  coinunit: 5, // 保留小数点\r\n  volunit: 6, // 成交量单位\r\n  before: 7, // 前收盘\r\n  stophigh: 8, // 涨停价\r\n  stoplow: 9 // 跌停价\r\n}\r\n\r\n// 除权字段定义\r\nexport const FIELD_RIGHT = {\r\n  time: 0,\r\n  sendstock: 1, // 10送股 放大1000倍\r\n  accrual: 2, // 10送红利 放大1000倍\r\n  allotstock: 3, // 10配股数 放大1000倍\r\n  allotprice: 4 // 配股价 放大1000倍\r\n}\r\n// 财务信息定义\r\nexport const FIELD_FINANCE = {\r\n  code: 0,\r\n  time: 1,\r\n  flow: 2, // 流通股\r\n  total: 3, // 总股本\r\n  earnings: 4 // 每股收益\r\n}\r\n\r\n// 以上为系统默认定义，用户定义数据类型可以放在下面\r\n\r\nexport const FIELD_TRADE = {\r\n  time: 0, // 交易时间\r\n  code: 1, // 股票代码\r\n  type: 2, // B S 买卖标志\r\n  price: 3, // 交易价格\r\n  vol: 4, // 成交量\r\n  money: 5, // 成交金额\r\n  info: 6 // 交易参数\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n// 预先定义好的公式，比如MA等，可在这里扩展公式定义\r\n// 用户可以自定义公式注册到ClData层，便于系统调用\r\n\r\nimport getValue from '../data/cl.data.tools'\r\n\r\n/**\r\n * Class representing ClFormula\r\n * @export\r\n * @class ClFormula\r\n */\r\nexport class ClFormula {\r\n  /**\r\n   * Creates an instance of ClFormula.\r\n   * @constructor\r\n   */\r\n  constructor () {\r\n    this.source = {\r\n      data: {},\r\n      minIndex: 0,\r\n      maxIndex: 0,\r\n      nowIndex: 0\r\n    }\r\n  }\r\n  /**\r\n   * get value from data layer\r\n   * @param {String} label\r\n   * @param {Number} offIndex\r\n   * @return {Array}\r\n   * @memberof ClFormula\r\n   */\r\n  getValue (label, offIndex) { // offIndex 向前偏移offIndex条记录\r\n    if (label === undefined) return 0\r\n    if (this.source.data === undefined || this.source.data.value === undefined) return 0\r\n\r\n    if (this.source.nowIndex === undefined) this.source.nowIndex = this.source.minIndex\r\n    const index = this.source.nowIndex - offIndex\r\n\r\n    return getValue(this.source.data, label, index)\r\n  }\r\n  /**\r\n   * calculate single stock data by formula\r\n   * @param {Object} source\r\n   * @param {String} formula\r\n   * @return {Array}\r\n   * @memberof ClFormula\r\n   */\r\n  runSingleStock (source, formula) {\r\n    // fix for Wechat mina do not support eval\r\n    if (!eval) {\r\n      const singleValue = []\r\n      const matchData = formula.match(/\\.(\\w+)(\\(.+)/)\r\n      const funcName = matchData[1]\r\n      if (typeof this[funcName] !== 'function') {\r\n        return singleValue\r\n      }\r\n      let argStr = matchData[2] || ''\r\n      argStr = argStr.replace(/\\(|\\)/g, '').split(',')\r\n      this.source = source\r\n      for (this.source.nowIndex = this.source.minIndex; this.source.nowIndex <= this.source.maxIndex; this.source.nowIndex++) {\r\n        const out = this[funcName](...argStr)\r\n        singleValue.push([this.getValue('idx', 0), out])\r\n      }\r\n      return singleValue\r\n    }\r\n    const singleValue = []\r\n    this.source = source\r\n    const command = `\r\n    for (this.source.nowIndex = this.source.minIndex;this.source.nowIndex <= this.source.maxIndex;this.source.nowIndex++) {\r\n          const ${formula}\r\n          singleValue.push([this.getValue('idx', 0), out]);\r\n    }`\r\n    eval(command)\r\n    return singleValue\r\n  }\r\n\r\n  //  自定义公式\r\n\r\n  /**\r\n   * calculate move averge data\r\n   * @param {String} label\r\n   * @param {Number} period\r\n   * @return {Array}\r\n   * @memberof ClFormula\r\n   */\r\n  MA (label, period) {\r\n    let off = 0\r\n    let value = 0\r\n    for (let m = 0; m < period; m++) {\r\n      const v = this.getValue(label, m)\r\n      if (v !== 0) {\r\n        off++\r\n        value += v\r\n      }\r\n    }\r\n    return off === 0 ? 0 : value / off\r\n  }\r\n  AVGPRC () {\r\n    let value = 0\r\n    value = this.getValue('allmoney', 0) / this.getValue('allvol', 0)\r\n    return value\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n/** @module DrawUtils */\r\n\r\n/**\r\n * get image data\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {Number} xx\r\n * @param {Number} yy\r\n * @param {Number} ww\r\n * @param {Number} hh\r\n * @return {Object}\r\n */\r\nexport function _getImageData (context, xx, yy, ww, hh) {\r\n  if (context.getImageData) {\r\n    return context.getImageData(xx, yy, ww, hh)\r\n  }\r\n  return undefined\r\n}\r\n/**\r\n * put image data\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {Object} img\r\n * @param {Number} xx\r\n * @param {Number} yy\r\n */\r\nexport function _putImageData (context, img, xx, yy) {\r\n  if (context.putImageData) {\r\n    context.putImageData(img, xx, yy)\r\n  }\r\n}\r\n\r\n/**\r\n * set line width\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {Number} l line width\r\n */\r\nexport function _setLineWidth (context, l) {\r\n  context.lineWidth = l\r\n}\r\n\r\n/**\r\n * get line width\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @return {Number} line width\r\n */\r\nexport function _getLineWidth (context) {\r\n  return context.lineWidth\r\n}\r\n\r\n// 画竖线\r\n/**\r\n * draw vertical line\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {Number} xx\r\n * @param {Number} yy1\r\n * @param {Number} yy2\r\n */\r\nexport function _drawVline (context, xx, yy1, yy2) {\r\n  context.moveTo(xx, yy1)\r\n  context.lineTo(xx, yy2)\r\n}\r\n// 画横线\r\n/**\r\n * draw horizontal line\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {Number} xx1\r\n * @param {Number} xx2\r\n * @param {Number} yy\r\n */\r\nexport function _drawHline (context, xx1, xx2, yy) {\r\n  context.moveTo(xx1, yy)\r\n  context.lineTo(xx2, yy)\r\n}\r\n// 画斜线\r\n/**\r\n * draw line\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {Number} xx1\r\n * @param {Number} yy1\r\n * @param {Number} xx2\r\n * @param {Number} yy2\r\n */\r\nexport function _drawline (context, xx1, yy1, xx2, yy2) {\r\n  context.moveTo(xx1, yy1)\r\n  context.lineTo(xx2, yy2)\r\n}\r\n\r\n/**\r\n * move to position\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {Number} xx\r\n * @param {Number} yy\r\n */\r\nexport function _drawmoveTo (context, xx, yy) {\r\n  context.moveTo(xx, yy)\r\n}\r\n\r\n/**\r\n * draw line to\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {Number} xx\r\n * @param {Number} yy\r\n */\r\nexport function _drawlineTo (context, xx, yy) {\r\n  context.lineTo(xx, yy)\r\n}\r\n\r\n// 画空心长方形\r\n/**\r\n * draw empty rect\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {Number} xx\r\n * @param {Number} yy\r\n * @param {Number} ww\r\n * @param {Number} hh\r\n */\r\nexport function _drawRect (context, xx, yy, ww, hh) {\r\n  context.strokeRect(xx, yy, ww, hh) // 这里的宽度是指不算xx的起始点的宽度，所以你写宽5，实际出来图形是6个像素，\r\n}\r\n// 画实心长方形\r\n/**\r\n * draw fill rect\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {Number} xx\r\n * @param {Number} yy\r\n * @param {Number} ww\r\n * @param {Number} hh\r\n * @param {String} fillclr\r\n */\r\nexport function _fillRect (context, xx, yy, ww, hh, fillclr) {\r\n  context.fillStyle = fillclr || context.fillStyle\r\n  context.fillRect(xx, yy, ww, hh)\r\n}\r\n/**\r\n * clear rect\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {Number} xx\r\n * @param {Number} yy\r\n * @param {Number} ww\r\n * @param {Number} hh\r\n */\r\nexport function _clearRect (context, xx, yy, ww, hh) {\r\n  context.clearRect(xx, yy, ww, hh)\r\n}\r\n// 画实心长方形\r\n/**\r\n * fill by color\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {String} fillclr\r\n */\r\nexport function _fill (context, fillclr) {\r\n  context.fillStyle = fillclr\r\n  context.fill()\r\n}\r\n// 开始画线\r\n/**\r\n * start draw line\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {String} clr\r\n */\r\nexport function _drawBegin (context, clr) {\r\n  context.beginPath()\r\n  context.strokeStyle = clr || context.strokeStyle\r\n}\r\n\r\n// 结束画线\r\n/**\r\n * end draw\r\n * @export\r\n * @param {Object} context canvas's context\r\n */\r\nexport function _drawEnd (context) {\r\n  context.stroke()\r\n}\r\n\r\n/**\r\n * get beveling\r\n * @private\r\n * @param {Number} x\r\n * @param {Number} y\r\n * @return {Number}\r\n */\r\nfunction __getBeveling (x, y) {\r\n  return Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2))\r\n}\r\n/**\r\n * draw dash line\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {Number} x1\r\n * @param {Number} y1\r\n * @param {Number} x2\r\n * @param {Number} y2\r\n * @param {Number} dashLen\r\n */\r\nexport function _drawDashLine (context, x1, y1, x2, y2, dashLen) {\r\n  dashLen = dashLen === undefined ? 5 : dashLen\r\n  // 得到斜边的总长度\r\n  const beveling = __getBeveling(x2 - x1, y2 - y1)\r\n  // 计算有多少个线段\r\n  const num = Math.floor(beveling / dashLen)\r\n\r\n  for (let i = 0; i < num; i++) {\r\n    context[i % 2 === 0 ? 'moveTo' : 'lineTo'](x1 + (x2 - x1) / num * i, y1 + (y2 - y1) / num * i)\r\n  }\r\n  // context.stroke();\r\n}\r\n\r\n// 以下显示文字\r\n\r\n/**\r\n * set font size\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {String} font\r\n * @param {Number} pixel\r\n */\r\nexport function _setFontSize (context, font, pixel) {\r\n  context.font = pixel + 'px ' + font\r\n}\r\n/**\r\n * draw text\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {Number} xx\r\n * @param {Number} yy\r\n * @param {String} txt\r\n * @param {String} font\r\n * @param {Number} pixel\r\n * @param {String} clr\r\n * @param {Object} pos\r\n */\r\nexport function _drawTxt (context, xx, yy, txt, font, pixel, clr, pos) {\r\n  _setFontSize(context, font, pixel)\r\n  context.fillStyle = clr || context.fillStyle\r\n  context.textBaseline = pos ? pos.y || 'top' : 'top' // top（默认）；middle bottom\r\n  context.textAlign = pos ? pos.x || 'start' : 'start' // start（默认）;center end\r\n  // 需要将txt转为string类型，不然gcanvas会报错\r\n  context.fillText(txt.toString(), xx, yy)\r\n}\r\n\r\n/**\r\n * get text width from charmap by fontsize\r\n * @param {Object} charMap\r\n * @param {String} txt\r\n * @param {Number} fontSize\r\n * @return {Number}\r\n */\r\nfunction getTxtWith (charMap, txt, fontSize) {\r\n  const scale = fontSize / 12\r\n  let allWidth = 0\r\n  for (let i = 0; i < txt.length; i++) {\r\n    const element = txt[i].toString()\r\n    if (charMap && charMap[element]) {\r\n      allWidth += charMap[element].width\r\n    } else {\r\n      allWidth += 12\r\n    }\r\n  }\r\n  return allWidth * scale\r\n}\r\n/**\r\n * get text width\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {String} txt\r\n * @param {String} font\r\n * @param {Number} pixel\r\n * @return {Number} string width\r\n */\r\nexport function _getTxtWidth (context, txt, font, pixel) {\r\n  _setFontSize(context, font, pixel)\r\n  let width\r\n  if (context.measureText) {\r\n    try {\r\n      width = context.measureText(txt).width\r\n    } catch (error) {\r\n      width = getTxtWith(context.charMap, txt, pixel)\r\n    }\r\n    // 简单的计算尺寸返回，这样子计算存在误差，特别是存在中英文的时候\r\n  } else {\r\n    width = getTxtWith(context.charMap, txt, pixel)\r\n  }\r\n  return width\r\n}\r\n// export function _getTxtWidth (context, txt, font, pixel) {\r\n//   _setFontSize(context, font, pixel)\r\n//   let width\r\n//   if (context.measureText) {\r\n//     try {\r\n//       width = context.measureText(txt).width\r\n//     } catch (error) {\r\n//       // 简单的计算尺寸返回，这样子计算存在误差，特别是存在中英文的时候\r\n//       width = pixel * txt.length\r\n//     }\r\n//   }\r\n//   return width\r\n// }\r\n\r\n// 获取文字显示的最适合的Rect\r\n/**\r\n * get text bound rect\r\n * @param {Object} context canvas's context\r\n * @param {String} txt\r\n * @param {Object} config\r\n * @return {Object}\r\n */\r\nfunction __getTxtRect (context, txt, config) {\r\n  const spaceX = config.spaceX || 2\r\n  const spaceY = config.spaceY || 2\r\n  const len = _getTxtWidth(context, txt, config.font, config.pixel)\r\n  return { width: len + 2 * spaceX, height: config.pixel + spaceY * 2 }\r\n}\r\n// 把文本画在矩形内\r\n/**\r\n * draw text rect\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {Number} xx\r\n * @param {Number} yy\r\n * @param {String} txt\r\n * @param {Object} config\r\n */\r\nexport function _drawTxtRect (context, xx, yy, txt, config) {\r\n  const spaceX = config.spaceX || 2\r\n  const spaceY = config.spaceY || 2\r\n  const tr = __getTxtRect(context, txt, config)\r\n\r\n  let xxx, yyy\r\n  yyy = yy // top\r\n  xxx = xx // start\r\n  if (config.y === 'middle') yyy = yy - Math.floor(tr.height / 2) // middle\r\n  if (config.x === 'end') xxx = xx - tr.width\r\n  if (config.x === 'center') xxx = xx - Math.floor(tr.width / 2)\r\n  _fillRect(context, xxx, yyy, tr.width, tr.height, config.bakclr)\r\n\r\n  _drawBegin(context, config.clr)\r\n  _drawRect(context, xxx, yyy, tr.width, tr.height)\r\n  xxx = xx\r\n  yyy = yy\r\n  if (config.x === 'start') xxx = xx + spaceX // ||config.x==='center'\r\n  if (config.x === 'end') xxx = xx - spaceX\r\n  if (config.y === 'top') yyy = yy - spaceY\r\n  _drawTxt(context, xxx, yyy, txt, config.font, config.pixel, config.clr, {\r\n    x: config.x,\r\n    y: config.y\r\n  })\r\n  _drawEnd(context)\r\n}\r\n\r\n// 画空心圆\r\n/**\r\n * draw circle\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {Number} x\r\n * @param {Number} y\r\n * @param {Number} r\r\n */\r\nexport function _drawCircle (context, x, y, r) {\r\n  context.moveTo(x + r, y)\r\n  context.arc(x, y, r, 0, Math.PI * 2, true)\r\n}\r\n\r\n// 画实心圆\r\n/**\r\n * draw circle center point\r\n * @param {Object} context canvas's context\r\n * @param {Number} x\r\n * @param {Number} y\r\n * @param {Number} r\r\n * @param {String} clr\r\n */\r\nfunction _drawCircleAndFilled (context, x, y, r, clr) {\r\n  context.moveTo(x + r, y)\r\n  context.arc(x, y, r, 0, Math.PI * 2, true)\r\n  context.fillStyle = clr\r\n  context.fill()\r\n}\r\n\r\n// 画一根独立的线，不影响后面的画线颜色\r\n/**\r\n * draw a alone lien\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {Number} xx\r\n * @param {Number} yy\r\n * @param {Number} xx1\r\n * @param {Number} yy1\r\n * @param {String} clr\r\n */\r\nexport function _drawLineAlone (context, xx, yy, xx1, yy1, clr) {\r\n  const oldclr = context.strokeStyle\r\n  _drawBegin(context, clr)\r\n  context.moveTo(xx, yy)\r\n  context.lineTo(xx1, yy1)\r\n  _drawEnd(context)\r\n  context.strokeStyle = oldclr\r\n}\r\n\r\n// 画一个椭圆\r\n/**\r\n * draw a ellipse\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {Number} x\r\n * @param {Number} y\r\n * @param {Number} a\r\n * @param {Number} b\r\n * @param {Number} h\r\n */\r\nexport function _BezierEllipse (context, x, y, a, b, h) {\r\n  const k = 0.5522848\r\n  const ox = a * k // 水平控制点偏移量\r\n  const oy = b * k // 垂直控制点偏移量\r\n\r\n  context.beginPath()\r\n  // 从椭圆的左端点开始顺时针绘制四条三次贝塞尔曲线\r\n  if (!h) {\r\n    context.moveTo(x - a, y)\r\n    context.bezierCurveTo(x - a, y - oy, x - ox, y - b, x, y - b)\r\n    context.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y)\r\n    context.bezierCurveTo(x + a, y + oy, x + ox, y + b, x, y + b)\r\n    context.bezierCurveTo(x - ox, y + b, x - a, y + oy, x - a, y)\r\n    context.closePath()\r\n  } else {\r\n    context.moveTo(x, y - b)\r\n    context.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y)\r\n    context.bezierCurveTo(x + a, y + oy, x + ox, y + b, x, y + b)\r\n  }\r\n  context.stroke()\r\n}\r\n\r\n// 画一个LOGO\r\n/**\r\n * draw logo\r\n * @export\r\n * @param {any} context\r\n * @param {any} xx\r\n * @param {any} yy\r\n * @param {any} size\r\n */\r\nexport function _drawLogo (context, xx, yy, size) {\r\n  context.beginPath()\r\n  const lw = size\r\n\r\n  context.lineWidth = lw\r\n  context.strokeStyle = '#efefef'\r\n\r\n  context.moveTo(xx - 0.5 * lw, yy) // 创建开始点\r\n  context.lineTo(xx + 5.5 * lw, yy) // 创建水平线\r\n  context.moveTo(xx, yy) // 创建开始点\r\n  context.lineTo(xx, yy + 13 * lw) // 创建水平线\r\n  context.moveTo(xx - 3 * lw, yy + 13 * lw) // 创建开始点\r\n  context.lineTo(xx + 5.5 * lw, yy + 13 * lw) // 创建水平线\r\n\r\n  context.moveTo(xx + 10 * lw, yy + 3.5 * lw)\r\n  context.lineTo(xx + 13.5 * lw, yy + 3.5 * lw) // 创建水平线\r\n  context.moveTo(xx + 10 * lw, yy + 9.5 * lw)\r\n  context.lineTo(xx + 13.5 * lw, yy + 9.5 * lw) // 创建水平线\r\n  context.stroke()\r\n\r\n  _BezierEllipse(context, xx + 5.5 * lw, yy + 6.5 * lw, 5 * lw, 6.5 * lw, true)\r\n  _BezierEllipse(context, xx + 9 * lw, yy + 6.5 * lw, 5 * lw, 6.5 * lw)\r\n  context.fillStyle = '#000'\r\n  context.fillRect(xx + 8.5 * lw, yy + 4 * lw, 6 * lw, 5 * lw)\r\n}\r\n\r\n// 以下函数只能调用上面的函数,不能直接画图\r\n\r\n// data {o,h,l,c}\r\n/**\r\n * draw sign plot\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {Number} x\r\n * @param {Number} y\r\n * @param {Object} Arc1\r\n * @param {Object} Arc2\r\n */\r\nexport function _drawSignPlot (context, x, y, Arc1, Arc2) {\r\n  if (Arc1 !== undefined && Arc1.r > 0) {\r\n    _drawBegin(context, Arc1.clr)\r\n    _drawmoveTo(context, x - Arc1.r, y)\r\n    _drawlineTo(context, x + Arc1.r, y)\r\n    _drawlineTo(context, x, y + 2 * Arc1.r)\r\n    _drawlineTo(context, x - Arc1.r, y)\r\n    _fill(context, Arc1.clr)\r\n    _drawCircleAndFilled(context, x, y, Arc1.r, Arc1.clr)\r\n    _drawEnd(context)\r\n  }\r\n  if (Arc2 !== undefined && Arc2.r > 0) {\r\n    _drawBegin(context, Arc2.clr)\r\n    _drawCircleAndFilled(context, x, y, Arc2.r, Arc2.clr)\r\n    _drawEnd(context)\r\n  }\r\n}\r\n/**\r\n * draw sign circle\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {Number} x\r\n * @param {Number} y\r\n * @param {Object} Arc1\r\n * @param {Object} Arc2\r\n * @param {Object} Arc3\r\n */\r\nexport function _drawSignCircle (context, x, y, Arc1, Arc2, Arc3) {\r\n  if (Arc1 !== undefined && Arc1.r > 0) {\r\n    _drawBegin(context, Arc1.clr)\r\n    _drawCircleAndFilled(context, x, y, Arc1.r, Arc1.clr)\r\n    _drawEnd(context)\r\n  }\r\n  if (Arc2 !== undefined && Arc2.r > 0) {\r\n    _drawBegin(context, Arc2.clr)\r\n    _drawCircleAndFilled(context, x, y, Arc2.r, Arc2.clr)\r\n    _drawEnd(context)\r\n  }\r\n  if (Arc3 !== undefined && Arc3.r > 0) {\r\n    _drawBegin(context, Arc3.clr)\r\n    _drawCircleAndFilled(context, x, y, Arc3.r, Arc3.clr)\r\n    _drawEnd(context)\r\n  }\r\n}\r\n/**\r\n * draw sing horizontal line\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {Object} config\r\n * @param {Object} item\r\n */\r\nexport function _drawSignHLine (context, config, item) {\r\n  _drawBegin(context, config.clr)\r\n  _drawDashLine(context, config.xx, config.yy, config.right - config.pixel / 2, config.yy, 7)\r\n  _drawEnd(context)\r\n\r\n  const spaceX = config.spaceX || config.linew * 2\r\n  const spaceY = config.spaceY || config.linew\r\n\r\n  config.width = config.right - config.xx\r\n  for (let i = 0; i < item.length; i++) {\r\n    if (item[i].display === 'false') continue\r\n    let xx = config.xx + config.width * item[i].set / 100\r\n    if (item[i].txt === 'arc') {\r\n      if ((xx + item[i].maxR) > config.right) xx = config.right - item[i].maxR\r\n      _drawSignCircle(context, xx, config.yy,\r\n        { r: item[i].maxR, clr: config.clr },\r\n        { r: item[i].minR, clr: config.bakclr }\r\n      )\r\n    } else {\r\n      const tr = __getTxtRect(context, item[i].txt, {\r\n        font: config.font, pixel: config.pixel, spaceX, spaceY\r\n      })\r\n      if ((xx + tr.width) > config.right) xx = config.right - tr.width\r\n      let yy = config.yy\r\n      if (config.top && yy < config.top + tr.height / 2) {\r\n        yy = config.top + tr.height / 2\r\n      }\r\n      if (config.bottom && yy > config.bottom - tr.height / 2) {\r\n        yy = config.bottom - tr.height / 2\r\n      }\r\n      _drawTxtRect(context, xx, yy, item[i].txt, {\r\n        font: config.font,\r\n        pixel: config.pixel,\r\n        clr: config.clr,\r\n        bakclr: config.bakclr,\r\n        x: 'start',\r\n        y: config.y,\r\n        spaceX,\r\n        spaceY\r\n      })\r\n    }\r\n  }\r\n}\r\n/**\r\n * draw sign vertical line\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {Object} config\r\n * @param {Object} item\r\n */\r\nexport function _drawSignVLine (context, config, item) {\r\n  _drawBegin(context, config.clr)\r\n  _drawDashLine(context, config.xx, config.yy, config.xx, config.bottom - config.pixel / 2, 7)\r\n  _drawEnd(context)\r\n\r\n  const spaceX = config.spaceX || config.linew * 2\r\n  const spaceY = config.spaceY || config.linew\r\n  config.height = config.bottom - config.yy\r\n  for (let i = 0; i < item.length; i++) {\r\n    if (item[i].display === 'false') continue\r\n    let yy = config.yy + config.height * item[i].set / 100\r\n\r\n    if (item[i].txt === 'arc') {\r\n      if ((yy + item[i].maxR) > config.bottom) yy = config.bottom - item[i].maxR\r\n      _drawSignCircle(context, config.xx, yy,\r\n        { r: item[i].maxR, clr: config.clr },\r\n        { r: item[i].minR, clr: config.bakclr }\r\n      )\r\n    } else {\r\n      const tr = __getTxtRect(context, item[i].txt, {\r\n        font: config.font, pixel: config.pixel, spaceX, spaceY\r\n      })\r\n      if ((yy + tr.height) > config.bottom) yy = config.bottom - tr.height\r\n      let xx = config.xx\r\n      if (config.left && xx < config.left + tr.width / 2) {\r\n        xx = config.left + tr.width / 2\r\n      }\r\n      _drawTxtRect(context, xx, yy, item[i].txt, {\r\n        font: config.font,\r\n        pixel: config.pixel,\r\n        clr: config.clr,\r\n        bakclr: config.bakclr,\r\n        x: 'center',\r\n        y: 'middle',\r\n        spaceX,\r\n        spaceY\r\n      })\r\n    }\r\n  }\r\n}\r\n// { index:k, unitX: unitX, spaceX:spaceX, unitY:unitY,maxmin:mm},\r\n// data {o,h,l,c}\r\n/**\r\n * draw kbar\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {Object} config\r\n * @param {Object} item\r\n */\r\nexport function _drawKBar (context, config, item) {\r\n  const xx = config.rect.left + config.index * (config.unitX + config.spaceX)\r\n  const xxm = xx + Math.floor(config.unitX / 2)\r\n  const yyh = config.rect.top + Math.round((config.maxmin.max - item[1]) * config.unitY)\r\n  const yyl = config.rect.top + config.rect.height - Math.round((item[2] - config.maxmin.min) * config.unitY)\r\n  let hh\r\n\r\n  const yy = config.rect.top + Math.round((config.maxmin.max - item[0]) * config.unitY)\r\n\r\n  if (item[0] === item[3]) {\r\n    hh = 0\r\n    _drawHline(context, xx, xx + config.unitX, yy)\r\n    if (item[1] > item[2]) {\r\n      _drawVline(context, xxm, yyh, yyl)\r\n    }\r\n  } else {\r\n    hh = Math.round((item[0] - item[3]) * config.unitY)\r\n    _drawVline(context, xxm, yyh, yy)\r\n    if (config.filled) {\r\n      _fillRect(context, xx, yy, config.unitX, hh, config.fillclr)\r\n    } else {\r\n      _drawRect(context, xx, yy, config.unitX, hh)\r\n    }\r\n    _drawVline(context, xxm, yy + hh, yyl)\r\n  }\r\n}\r\n// data {o,h,l,c}\r\n/**\r\n * draw volume bar\r\n * @export\r\n * @param {Object} context canvas's context\r\n * @param {Object} config\r\n * @param {Object} value\r\n */\r\nexport function _drawVBar (context, config, value) {\r\n  const xx = config.rect.left + config.index * (config.unitX + config.spaceX)\r\n  const yy = config.rect.top + Math.round((config.maxmin.max - value) * config.unitY)\r\n  const hh = config.rect.top + config.rect.height - yy\r\n  if (config.filled) {\r\n    _fillRect(context, xx, yy, config.unitX, hh, config.fillclr)\r\n  } else {\r\n    _drawRect(context, xx, yy, config.unitX, hh)\r\n  }\r\n}\r\n\r\n// 以下函数为辅助画图的工具函数\r\n// Adjust 灰度\r\n\r\n// 为传入的16进制颜色增加透明度 ‘#1F1F2F’ -> rgba(...)\r\n/**\r\n * transfer color to rgba\r\n * @export\r\n * @param {String} scolor\r\n * @param {Number} trans\r\n * @param {String} style\r\n * @return {String}\r\n */\r\nexport function _setTransColor (scolor, trans, style) {\r\n  const reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/\r\n  let sColor = scolor.toLowerCase()\r\n  if (sColor && reg.test(sColor)) {\r\n    if (sColor.length === 4) {\r\n      let sColorNew = '#'\r\n      for (let i = 1; i < 4; i += 1) {\r\n        sColorNew += sColor.slice(i, i + 1).concat(sColor.slice(i, i + 1))\r\n      }\r\n      sColor = sColorNew\r\n    }\r\n    // 处理六位的颜色值\r\n    const sColorChange = []\r\n    for (let i = 1; i < 7; i += 2) {\r\n      sColorChange.push(parseInt('0x' + sColor.slice(i, i + 2)))\r\n    }\r\n    // 效果处理\r\n    switch (style) {\r\n      case 'adjust':\r\n        const r = sColorChange[0]\r\n        const g = sColorChange[1]\r\n        const b = sColorChange[2]\r\n        sColorChange[0] = (r * 0.272) + (g * 0.534) + (b * 0.131)\r\n        sColorChange[1] = (r * 0.349) + (g * 0.686) + (b * 0.168)\r\n        sColorChange[2] = (r * 0.393) + (g * 0.769) + (b * 0.189)\r\n        break\r\n    }\r\n    sColor = sColorChange.join(',')\r\n    trans = trans || 1\r\n    return 'rgba(' + sColor + ',' + trans + ')'\r\n  } else {\r\n    return sColor\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\nimport getValue from '../data/cl.data.tools'\r\n\r\n// 和定位相关基本函数\r\n\r\n/** @module ChartTools */\r\n\r\n/**\r\n * According to the label in the data to find a matching record number\r\n * @export\r\n * @param {Object} data\r\n * @param {Number} findvalue\r\n * @param {String} label\r\n * @return {Number}\r\n */\r\nexport function findLabelToIndex (data, findvalue, label) {\r\n  for (let idx = 0; idx <= data.value.length - 1; idx++) {\r\n    if (findvalue === getValue(data, label, idx)) {\r\n      return idx\r\n    }\r\n  }\r\n  return -1\r\n}\r\n// 查找最匹配time的记录号，direction为forword的时候表示从后面向前开始寻找，\r\n/**\r\n * Find the record number that matches the time. When the direction is forword, it means to start looking from behind.\r\n * @export\r\n * @param {Object} data\r\n * @param {Number} findvalue\r\n * @param {String} label\r\n * @param {String} direction\r\n * @return {Number}\r\n */\r\nexport function findNearTimeToIndex (data, findvalue, label, direction) {\r\n  if (label === undefined) label = 'time'\r\n  if (direction && direction === 'forword') {\r\n    for (let idx = data.value.length - 1; idx >= 0; idx--) {\r\n      if (getValue(data, label, idx) > findvalue) continue\r\n      return idx\r\n    }\r\n  } else {\r\n    for (let idx = 0; idx <= data.value.length - 1; idx++) {\r\n      if (getValue(data, label, idx) < findvalue) continue\r\n      return idx\r\n    }\r\n  }\r\n  return -1\r\n}\r\n/**\r\n * Specifically dealing with the time-sharing map and the 5-day map all this data will be smaller than the interface, in this case elementW is generally only one pixel\r\n * @export\r\n * @param {Object} info\r\n * @param {Object} config\r\n */\r\nexport function setFixedLineFlags (info, config) {\r\n  info.showMode = 'fixed'\r\n  info.fixed = {\r\n    min: 0,\r\n    max: config.maxCount - 1,\r\n    left: 0,\r\n    right: 0\r\n  }\r\n  info.minIndex = 0\r\n  info.maxIndex = config.size - 1\r\n  // 5日线时 spaceX初始值设为0\r\n  info.maxCount = config.maxCount > 1 ? config.maxCount : 2\r\n  info.unitX = config.scale\r\n  info.spaceX = config.width / info.maxCount - info.unitX\r\n}\r\n/**\r\n * In this case spaceX requires a minimum of one pixel\r\n * @export\r\n * @param {Object} info\r\n * @param {Object} config\r\n */\r\nexport function setMoveLineFlags (info, config) {\r\n  const spaceX = info.unitX / 4\r\n  info.spaceX = spaceX < config.scale ? config.scale : spaceX\r\n  info.maxCount = Math.floor(config.width / (info.unitX + info.spaceX)) // 整个图形区域最大显示记录数\r\n  const offset = info.maxCount > config.size ? config.size : info.maxCount\r\n\r\n  switch (info.showMode) {\r\n    case 'fixed':\r\n    // 要根据fixed的最大最小值，合并数据\r\n      info.maxIndex = config.size - 1\r\n      info.minIndex = config.size - offset\r\n      break\r\n    case 'locked':\r\n      // info.locked.index = config.index ? config.index : info.locked.index;\r\n      // 把需要锁定的记录初始化，如果没有值就取当前画面中间的值\r\n      // info.locked.set = config.set ? config.set : info.locked.set;\r\n      break\r\n    case 'move':\r\n      break\r\n    default: // case 'last':\r\n      info.maxIndex = config.size - 1\r\n      info.minIndex = config.size - offset\r\n      break\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n/** @module SystemConfig */\r\n\r\nimport {\r\n  copyJsonOfDeep\r\n} from '../util/cl.tool'\r\n\r\nimport * as drawClass from '../util/cl.draw'\r\n\r\n/**\r\n * @constant\r\n */\r\nexport const COLOR_WHITE = {\r\n  sys: 'white',\r\n  line: ['#4048cc', '#dd8d2d', '#168ee0', '#ad7eac', '#ff8290', '#ba1215'],\r\n  back: '#fafafa',\r\n  txt: '#2f2f2f',\r\n  baktxt: '#2f2f2f',\r\n  axis: '#7f7f7f',\r\n  grid: '#cccccc',\r\n  red: '#ff6a6c',\r\n  green: '#32cb47',\r\n  white: '#7e7e7e',\r\n  vol: '#dd8d2d',\r\n  button: '#888888',\r\n  colume: '#41bfd0',\r\n  box: '#ddf4df',\r\n  code: '#3f3f3f'\r\n}\r\n/**\r\n * @constant\r\n */\r\nexport const COLOR_BLACK = {\r\n  sys: 'black',\r\n  line: ['#efefef', '#fdc104', '#5bbccf', '#ad7eac', '#bf2f2f', '#cfcfcf'],\r\n  back: '#232323',\r\n  txt: '#bfbfbf',\r\n  baktxt: '#2f2f2f',\r\n  axis: '#afafaf',\r\n  grid: '#373737',\r\n  red: '#ff6a6c',\r\n  green: '#6ad36d',\r\n  white: '#9f9f9f',\r\n  vol: '#fdc104',\r\n  button: '#9d9d9d',\r\n  colume: '#41bfd0',\r\n  box: '#373737',\r\n  code: '#41bfd0'\r\n}\r\n/**\r\n * @constant\r\n */\r\nexport const CHART_WIDTH_MAP = {\r\n  '0': {\r\n    'width': 7.1999969482421875\r\n  },\r\n  '1': {\r\n    'width': 4.8119964599609375\r\n  },\r\n  '2': {\r\n    'width': 7.1999969482421875\r\n  },\r\n  '3': {\r\n    'width': 7.1999969482421875\r\n  },\r\n  '4': {\r\n    'width': 7.1999969482421875\r\n  },\r\n  '5': {\r\n    'width': 7.1999969482421875\r\n  },\r\n  '6': {\r\n    'width': 7.1999969482421875\r\n  },\r\n  '7': {\r\n    'width': 6.563995361328125\r\n  },\r\n  '8': {\r\n    'width': 7.1999969482421875\r\n  },\r\n  '9': {\r\n    'width': 7.1999969482421875\r\n  },\r\n  '.': {\r\n    'width': 3.167999267578125\r\n  },\r\n  ',': {\r\n    'width': 3.167999267578125\r\n  },\r\n  '%': {\r\n    'width': 11.639999389648438\r\n  },\r\n  ':': {\r\n    'width': 3.167999267578125\r\n  },\r\n  ' ': {\r\n    'width': 3.9959869384765625\r\n  },\r\n  'K': {\r\n    'width': 8.279998779296875\r\n  },\r\n  'V': {\r\n    'width': 7.667999267578125\r\n  },\r\n  'O': {\r\n    'width': 9.203994750976562\r\n  },\r\n  'L': {\r\n    'width': 7.055999755859375\r\n  },\r\n  '-': {\r\n    'width': 7.2599945068359375\r\n  },\r\n  '[': {\r\n    'width': 3.9959869384765625\r\n  },\r\n  ']': {\r\n    'width': 3.9959869384765625\r\n  }\r\n}\r\n\r\n/**\r\n * The following several variables must be established when the system is established, which is a common configuration for everyone.\r\n */\r\nconst _systemInfo = {\r\n  runPlatform: 'normal', // 'react-native' | 'mina' | 'web'\r\n  axisPlatform: 'web', // 'web' | 'phone'\r\n  eventPlatform: 'web', // 'react-native' | 'mina' | 'web'\r\n  scale: 1, // Set the zoom ratio according to the dpi of different display devices\r\n  standard: 'china', // 'usa' | 'china' Drawing standards to support the United States and China\r\n  sysColor: 'black', // 'white' | 'black'\r\n  charMap: CHART_WIDTH_MAP, // Used to help degrade font width calculations for some platforms that do not support context measures\r\n  mainCanvas: {}, // Main canvas\r\n  cursorCanvas: {} // Cursor canvas\r\n}\r\n/**\r\n * set paint standard\r\n * @export\r\n * @param {any} standard\r\n */\r\nexport function setStandard (standard) {\r\n  _systemInfo.standard = standard || 'china'\r\n}\r\n/**\r\n * set system color\r\n * @export\r\n * @param {String} syscolor drawing theme\r\n * @returns system color\r\n */\r\nexport function setColor (syscolor) {\r\n  let color = {}\r\n  if (syscolor === 'white') {\r\n    color = copyJsonOfDeep(COLOR_WHITE)\r\n  } else {\r\n    color = copyJsonOfDeep(COLOR_BLACK)\r\n  }\r\n  // The contrast between the rise and fall of the US market and the Chinese market is opposite\r\n  if (_systemInfo.standard === 'usa') {\r\n    const clr = color.red\r\n    color.red = color.green\r\n    color.green = clr\r\n  }\r\n  // Update the current system color\r\n  _systemInfo.color = color\r\n  return color\r\n}\r\n/**\r\n * Used to help those platforms that don't support measureText, degraded calculation font span\r\n * @export\r\n * @param {Object} context canvas context\r\n * @param {String} txt text\r\n * @param {String} font font family\r\n * @param {Number} pixel font size\r\n * @return {Number} text width\r\n */\r\nexport function _getOtherTxtWidth (context, txt, font, pixel) {\r\n  const ww = _systemInfo.other.width\r\n  const hh = _systemInfo.other.height\r\n  drawClass._fillRect(0, 0, ww, hh, '#000')\r\n  drawClass._drawTxt(_systemInfo.other.context, 0, 0, txt, font, pixel, '#fff')\r\n  const imgData = _systemInfo.other.context.getImageData(0, 0, ww, hh).data\r\n  let width = 0\r\n  for (let i = 0; i < imgData.length; /* i += 4 */) {\r\n    if (imgData.data[i + 0] !== 0 || imgData.data[i + 1] !== 0 ||\r\n      imgData.data[i + 2] !== 0 || imgData.data[i + 3] !== 255) {\r\n      i += 4\r\n      width++\r\n    } else {\r\n      i += 4 * ww\r\n    }\r\n  }\r\n  return width\r\n}\r\n/**\r\n * set system scale\r\n * @export\r\n * @param {Object} canvas\r\n * @param {Number} scale\r\n * @return {Object}\r\n */\r\nexport function setScale (canvas, scale) {\r\n  canvas.width = canvas.clientWidth * scale\r\n  canvas.height = canvas.clientHeight * scale\r\n  return {\r\n    width: canvas.width,\r\n    height: canvas.height\r\n  }\r\n}\r\n/**\r\n * init system\r\n * @export\r\n * @param {Object} cfg system config\r\n * @return {Object} all system config\r\n */\r\nexport function initSystem (cfg) {\r\n  if (cfg === undefined) return\r\n  for (const key in _systemInfo) {\r\n    _systemInfo[key] = cfg[key] || _systemInfo[key]\r\n  }\r\n  _systemInfo.mainCanvas.canvas = cfg.mainCanvas.canvas\r\n  _systemInfo.mainCanvas.context = cfg.mainCanvas.context\r\n  _systemInfo.mainCanvas.context.charMap = _systemInfo.charMap\r\n  _systemInfo.cursorCanvas.canvas = cfg.cursorCanvas.canvas\r\n  _systemInfo.cursorCanvas.context = cfg.cursorCanvas.context\r\n  _systemInfo.cursorCanvas.context.charMap = _systemInfo.charMap\r\n\r\n  _systemInfo.color = setColor(_systemInfo.sysColor)\r\n\r\n  if (_systemInfo.runPlatform === 'normal') {\r\n    if (_systemInfo.mainCanvas.canvas !== undefined && _systemInfo.scale !== 1) {\r\n      setScale(_systemInfo.mainCanvas.canvas, _systemInfo.scale)\r\n      setScale(_systemInfo.cursorCanvas.canvas, _systemInfo.scale)\r\n    }\r\n  }\r\n  return _systemInfo\r\n}\r\n\r\n/**\r\n * Bind some basic properties when some chart objects are initialized\r\n * @export\r\n * @param {Object} chart\r\n * @param {Object} father\r\n */\r\nexport function initCommonInfo (chart, father) {\r\n  chart.father = father\r\n  chart.context = father.context\r\n  chart.scale = _systemInfo.scale\r\n  chart.color = _systemInfo.color\r\n  chart.axisPlatform = _systemInfo.axisPlatform\r\n  chart.eventPlatform = _systemInfo.eventPlatform\r\n}\r\n/**\r\n * checkout layout\r\n * @export\r\n * @param {Object} layout\r\n */\r\nexport function checkLayout (layout) {\r\n  const scale = _systemInfo.scale\r\n  layout.margin.top *= scale\r\n  layout.margin.left *= scale\r\n  layout.margin.bottom *= scale\r\n  layout.margin.right *= scale\r\n\r\n  layout.offset.top *= scale\r\n  layout.offset.left *= scale\r\n  layout.offset.bottom *= scale\r\n  layout.offset.right *= scale\r\n\r\n  layout.title.pixel *= scale\r\n  layout.title.height *= scale\r\n  layout.title.spaceX *= scale\r\n  layout.title.spaceY *= scale\r\n\r\n  if (layout.title.height < (layout.title.pixel + layout.title.spaceY + 2 * scale)) {\r\n    layout.title.height = layout.title.pixel + layout.title.spaceY + 2 * scale\r\n  }\r\n\r\n  layout.axisX.pixel *= scale\r\n  layout.axisX.width *= scale\r\n  layout.axisX.height *= scale\r\n  layout.axisX.spaceX *= scale\r\n\r\n  layout.scroll.pixel *= scale\r\n  layout.scroll.size *= scale\r\n  layout.scroll.spaceX *= scale\r\n\r\n  layout.digit.pixel *= scale\r\n  layout.digit.height *= scale\r\n  layout.digit.spaceX *= scale\r\n\r\n  if (layout.digit.height < (layout.digit.pixel + 2 * scale)) {\r\n    layout.digit.height = layout.digit.pixel + 2 * scale\r\n  }\r\n\r\n  layout.symbol.size *= scale\r\n  layout.symbol.spaceX *= scale\r\n  layout.symbol.spaceY *= scale\r\n}\r\n/**\r\n * Change mouse style\r\n * @export\r\n * @param {String} style\r\n */\r\nexport function changeCursorStyle (style) {\r\n  if (_systemInfo.eventPlatform === 'html5') {\r\n    _systemInfo.mainCanvas.canvas.style.cursor = style\r\n    _systemInfo.cursorCanvas.canvas.style.cursor = style\r\n  }\r\n}\r\n/**\r\n * Get system line color\r\n * @export\r\n * @param {Number} index\r\n * @return {String}\r\n */\r\nexport function getLineColor (index) {\r\n  if (index === undefined) index = 0\r\n  return _systemInfo.color.line[index % _systemInfo.color.line.length]\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n// 以下是 ClLineKBar 的实体定义\r\n\r\nimport {\r\n  _drawBegin,\r\n  _drawEnd,\r\n  // _setTransColor,\r\n  _drawKBar\r\n} from '../util/cl.draw'\r\nimport getValue from '../data/cl.data.tools'\r\nimport {\r\n  initCommonInfo\r\n} from '../chart/cl.chart.init'\r\n\r\n// 创建时必须带入父类，后面的运算定位都会基于父节点进行；\r\n// 这个类仅仅是画图, 因此需要把可以控制的rect传入进来\r\n/**\r\n * Class representing ClDrawKBar\r\n * @export\r\n * @class ClDrawKBar\r\n */\r\nexport default class ClDrawKBar {\r\n  /**\r\n\r\n   * Creates an instance of ClDrawKBar.\r\n   * @param {Object} father\r\n   * @param {Object} rectMain\r\n   */\r\n  constructor (father, rectMain) {\r\n    initCommonInfo(this, father)\r\n    this.rectMain = rectMain\r\n\r\n    this.linkInfo = father.father.linkInfo\r\n    this.source = father.father\r\n    this.maxmin = father.maxmin\r\n  }\r\n  /**\r\n   * paint\r\n   * @param {String} key\r\n   * @memberof ClDrawKBar\r\n   */\r\n  onPaint (key) {\r\n    if (key !== undefined) this.hotKey = key\r\n    this.data = this.source.getData(this.hotKey)\r\n    this.codeInfo = this.source.getData('INFO')\r\n\r\n    let clr = this.color.red\r\n    // clr = _setTransColor(clr, 1, 'adjust')\r\n    // clr = _setTransColor(clr, 0.7)\r\n    _drawBegin(this.context, clr)\r\n    let open, close\r\n    let before = getValue(this.codeInfo, 'before', 0)\r\n    for (let k = 0, idx = this.linkInfo.minIndex; idx <= this.linkInfo.maxIndex; k++, idx++) {\r\n      if (idx > 0) before = getValue(this.data, 'close', idx - 1)\r\n      open = getValue(this.data, 'open', idx)\r\n      close = getValue(this.data, 'close', idx)\r\n      if (open < close || (open === close && close >= before)) {\r\n      // getValue(this.data, 'high', idx),\r\n      // getValue(this.data, 'low', idx));\r\n        _drawKBar(this.context, {\r\n          filled: this.color.sys === 'white',\r\n          index: k,\r\n          spaceX: this.linkInfo.spaceX,\r\n          unitX: this.linkInfo.unitX,\r\n          unitY: this.maxmin.unitY,\r\n          maxmin: this.maxmin,\r\n          rect: this.rectMain,\r\n          fillclr: clr\r\n        },\r\n        [close,\r\n          getValue(this.data, 'high', idx),\r\n          getValue(this.data, 'low', idx),\r\n          open\r\n        ])\r\n      }\r\n    }\r\n    _drawEnd(this.context)\r\n    clr = this.color.green\r\n    // clr = _setTransColor(clr, 1, 'adjust')\r\n    // clr = _setTransColor(clr, 0.7)\r\n    _drawBegin(this.context, clr)\r\n    for (let k = 0, idx = this.linkInfo.minIndex; idx <= this.linkInfo.maxIndex; k++, idx++) {\r\n      if (idx > 0) before = getValue(this.data, 'close', idx - 1)\r\n      open = getValue(this.data, 'open', idx)\r\n      close = getValue(this.data, 'close', idx)\r\n      if (open > close || (open === close && close < before)) {\r\n        // getValue(this.data, 'high', idx),\r\n        // getValue(this.data, 'low', idx));\r\n        _drawKBar(this.context, {\r\n          filled: true,\r\n          index: k,\r\n          spaceX: this.linkInfo.spaceX,\r\n          unitX: this.linkInfo.unitX,\r\n          unitY: this.maxmin.unitY,\r\n          maxmin: this.maxmin,\r\n          rect: this.rectMain,\r\n          fillclr: clr\r\n        },\r\n        [open,\r\n          getValue(this.data, 'high', idx),\r\n          getValue(this.data, 'low', idx),\r\n          close\r\n        ])\r\n      }\r\n    }\r\n    _drawEnd(this.context)\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n// 以下是 ClLineKBar 的实体定义\r\n\r\nimport {\r\n  _drawBegin,\r\n  _drawEnd,\r\n  _drawmoveTo,\r\n  _drawlineTo\r\n} from '../util/cl.draw'\r\nimport getValue from '../data/cl.data.tools'\r\nimport {\r\n  initCommonInfo,\r\n  getLineColor\r\n} from '../chart/cl.chart.init'\r\nimport {\r\n  inRect\r\n} from '../util/cl.tool'\r\n\r\n/**\r\n * Class representing ClDrawLine\r\n * @export\r\n * @class ClDrawLine\r\n */\r\nexport default class ClDrawLine {\r\n  /**\r\n\r\n   * Creates an instance of ClDrawLine.\r\n   * @param {Object} father\r\n   * @param {Object} rectMain\r\n   */\r\n  constructor (father, rectMain) {\r\n    initCommonInfo(this, father)\r\n    this.rectMain = rectMain\r\n\r\n    this.linkInfo = father.father.linkInfo\r\n    this.source = father.father\r\n\r\n    this.maxmin = father.maxmin\r\n  }\r\n  /**\r\n   * paint\r\n   * @param {String} key\r\n   * @memberof ClDrawLine\r\n   */\r\n  onPaint (key) {\r\n    if (key !== undefined) this.hotKey = key\r\n    this.data = this.source.getData(this.hotKey)\r\n\r\n    if (this.info.labelX === undefined) this.info.labelX = 'idx'\r\n    if (this.info.labelY === undefined) this.info.labelY = 'value'\r\n    // 分钟线为‘close’\r\n\r\n    let xx, yy\r\n    let isBegin = false\r\n    let idx\r\n    let count = 0\r\n    let clr\r\n    if (this.info.color === undefined) {\r\n      clr = getLineColor(this.info.colorIndex)\r\n    } else {\r\n      clr = this.color[this.info.color]\r\n    }\r\n\r\n    _drawBegin(this.context, clr)\r\n    for (let k = this.linkInfo.minIndex, index = 0; k <= this.linkInfo.maxIndex; k++, index++) {\r\n      if (this.info.showSort === undefined) {\r\n        idx = index\r\n      } else {\r\n        idx = getValue(this.data, this.info.showSort, index)\r\n      }\r\n      // if (getValue(this.data, this.info.labelX, index) < 0) continue;\r\n      xx = this.rectMain.left + idx * (this.linkInfo.unitX + this.linkInfo.spaceX)\r\n      yy = this.rectMain.top + Math.round((this.maxmin.max - getValue(this.data, this.info.labelY, index)) * this.maxmin.unitY)\r\n      if (Math.floor(idx / this.info.skips) > count) {\r\n        count = Math.floor(idx / this.info.skips)\r\n        isBegin = false\r\n      }\r\n      if (!isBegin) {\r\n        isBegin = inRect(this.rectMain, { x: xx, y: yy })\r\n        if (isBegin) _drawmoveTo(this.context, xx, yy)\r\n        continue\r\n      }\r\n      _drawlineTo(this.context, xx, yy)\r\n    }\r\n    _drawEnd(this.context)\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n// 以下是 ClLineRight 的实体定义\r\n\r\nimport {\r\n  _getTxtWidth,\r\n  _drawTxt\r\n} from '../util/cl.draw'\r\nimport {\r\n  findNearTimeToIndex\r\n} from './cl.chart.tools'\r\nimport getValue, {\r\n  getSize\r\n} from '../data/cl.data.tools'\r\nimport {\r\n  initCommonInfo\r\n} from '../chart/cl.chart.init'\r\n// 创建时必须带入父类，后面的运算定位都会基于父节点进行；\r\n// 这个类仅仅是画图, 因此需要把可以控制的rect传入进来\r\n/**\r\n * Class representing ClDrawRight\r\n * @export\r\n * @class ClDrawRight\r\n */\r\nexport default class ClDrawRight {\r\n  /**\r\n\r\n   * Creates an instance of ClDrawRight.\r\n   * @param {Object} father\r\n   * @param {Object} rectMain\r\n   */\r\n  constructor (father, rectMain) {\r\n    initCommonInfo(this, father)\r\n    this.rectMain = rectMain\r\n\r\n    this.linkInfo = father.father.linkInfo\r\n    this.source = father.father\r\n    this.symbol = father.layout.symbol\r\n  }\r\n  /**\r\n   * paint\r\n   * @param {String} key\r\n   * @memberof ClDrawRight\r\n   */\r\n  onPaint (key) {\r\n    if (key !== undefined) this.hotKey = key\r\n    this.data = this.source.getData(this.hotKey)\r\n    this.rightData = this.source.getData('RIGHT')\r\n    if (getSize(this.rightData) < 1) return\r\n\r\n    const len = _getTxtWidth(this.context, '▲', this.symbol.font, this.symbol.pixel)\r\n    for (let i = 0; i < this.rightData.value.length; i++) {\r\n      const idx = findNearTimeToIndex(this.data, getValue(this.rightData, 'time', i))\r\n      const offset = idx - this.linkInfo.minIndex\r\n      const xx = this.rectMain.left + offset * (this.linkInfo.unitX + this.linkInfo.spaceX) + Math.floor(this.linkInfo.unitX / 2)\r\n      if (xx < this.rectMain.left) {\r\n        continue\r\n      }\r\n      let clr = this.color.button\r\n      if (this.linkInfo.rightMode !== 'no') clr = this.color.vol\r\n      _drawTxt(this.context, xx - Math.floor(len / 2), this.rectMain.top + this.rectMain.height - this.symbol.pixel - this.symbol.spaceY,\r\n        '▲', this.symbol.font, this.symbol.pixel, clr, { y: 'top' })\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n// 以下是 ClLineVBar 的实体定义\r\n\r\nimport {\r\n  _drawBegin,\r\n  _drawEnd,\r\n  _drawVBar\r\n} from '../util/cl.draw'\r\nimport getValue from '../data/cl.data.tools'\r\nimport {\r\n  initCommonInfo\r\n} from '../chart/cl.chart.init'\r\n\r\n// 创建时必须带入父类，后面的运算定位都会基于父节点进行；\r\n// 这个类仅仅是画图, 因此需要把可以控制的rect传入进来\r\n/**\r\n * Class representing ClDrawVBar\r\n * @export\r\n * @class ClDrawVBar\r\n */\r\nexport default class ClDrawVBar {\r\n  /**\r\n\r\n   * Creates an instance of ClDrawVBar.\r\n   * @param {Object} father\r\n   * @param {Object} rectMain\r\n   */\r\n  constructor (father, rectMain) {\r\n    initCommonInfo(this, father)\r\n    this.rectMain = rectMain\r\n\r\n    this.linkInfo = father.father.linkInfo\r\n    this.source = father.father\r\n\r\n    this.maxmin = father.maxmin\r\n  }\r\n  /**\r\n   * paint\r\n   * @param {String} key\r\n   * @memberof ClDrawVBar\r\n   */\r\n  onPaint (key) {\r\n    if (key !== undefined) this.hotKey = key\r\n    this.data = this.source.getData(this.hotKey)\r\n\r\n    _drawBegin(this.context, this.color.red)\r\n    for (let k = 0, idx = this.linkInfo.minIndex; idx <= this.linkInfo.maxIndex; k++, idx++) {\r\n      if (parseFloat(getValue(this.data, 'open', idx)) <= parseFloat(getValue(this.data, 'close', idx))) {\r\n        _drawVBar(this.context, {\r\n          filled: this.color.sys === 'white',\r\n          index: k,\r\n          spaceX: this.linkInfo.spaceX,\r\n          unitX: this.linkInfo.unitX,\r\n          unitY: this.maxmin.unitY,\r\n          maxmin: this.maxmin,\r\n          rect: this.rectMain,\r\n          fillclr: this.color.red\r\n        },\r\n        getValue(this.data, 'vol', idx))\r\n      }\r\n    }\r\n    _drawEnd(this.context)\r\n    _drawBegin(this.context, this.color.green)\r\n    for (let k = 0, idx = this.linkInfo.minIndex; idx <= this.linkInfo.maxIndex; k++, idx++) {\r\n      if (parseFloat(getValue(this.data, 'open', idx)) > parseFloat(getValue(this.data, 'close', idx))) {\r\n        _drawVBar(this.context, {\r\n          filled: true,\r\n          index: k,\r\n          spaceX: this.linkInfo.spaceX,\r\n          unitX: this.linkInfo.unitX,\r\n          unitY: this.maxmin.unitY,\r\n          maxmin: this.maxmin,\r\n          rect: this.rectMain,\r\n          fillclr: this.color.green\r\n        },\r\n        getValue(this.data, 'vol', idx))\r\n      }\r\n    }\r\n    _drawEnd(this.context)\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n// 以下是 ClLineKBar 的实体定义\r\n\r\nimport {\r\n  _drawBegin,\r\n  _drawEnd,\r\n  _drawLineAlone,\r\n  _drawmoveTo,\r\n  _drawlineTo\r\n} from '../util/cl.draw'\r\nimport getValue from '../data/cl.data.tools'\r\nimport {\r\n  initCommonInfo,\r\n  getLineColor\r\n} from '../chart/cl.chart.init'\r\n/**\r\n * Class representing ClDrawVLine\r\n * @export\r\n * @class ClDrawVLine\r\n */\r\nexport default class ClDrawVLine {\r\n  /**\r\n\r\n   * Creates an instance of ClDrawVLine.\r\n   * @param {Object} father\r\n   * @param {Object} rectMain\r\n   */\r\n  constructor (father, rectMain) {\r\n    initCommonInfo(this, father)\r\n    this.rectMain = rectMain\r\n    // this.rectMain = {\r\n    //   left:rectMain.left,\r\n    //   top:rectMain.top,\r\n    //   width:rectMain.width,\r\n    //   height:rectMain.height\r\n    // };\r\n    this.linkInfo = father.father.linkInfo\r\n    this.source = father.father\r\n    this.maxmin = father.maxmin\r\n  }\r\n  /**\r\n   * paint\r\n   * @param {String} key\r\n   * @memberof ClDrawVLine\r\n   */\r\n  onPaint (key) {\r\n    if (key !== undefined) this.hotKey = key\r\n    this.data = this.source.getData(this.hotKey)\r\n\r\n    if (this.info.labelX === undefined) this.info.labelX = 'time'\r\n    if (this.info.labelY === undefined) this.info.labelY = 'vol'\r\n\r\n    let xx, yy, value\r\n    let idx\r\n    let clr\r\n    if (this.info.color === undefined) {\r\n      clr = getLineColor(this.info.colorIndex)\r\n    } else {\r\n      clr = this.color[this.info.color]\r\n    }\r\n\r\n    _drawBegin(this.context, clr)\r\n    for (let k = this.linkInfo.minIndex, index = 0; k <= this.linkInfo.maxIndex; k++, index++) {\r\n      if (this.info.showSort === undefined) {\r\n        idx = index\r\n      } else {\r\n        idx = getValue(this.data, this.info.showSort, index)\r\n      }\r\n      // if (getValue(this.data, this.info.labelX, index) < 0) continue;\r\n      xx = this.rectMain.left + Math.floor(idx * (this.linkInfo.spaceX + this.linkInfo.unitX))\r\n      value = getValue(this.data, this.info.labelY, k)\r\n      if (value < 0) continue\r\n      yy = this.rectMain.top + Math.round((this.maxmin.max - value) * this.maxmin.unitY)\r\n      if (yy < this.rectMain.top) {\r\n        yy = this.rectMain.top + 1\r\n        _drawLineAlone(this.context, xx, this.rectMain.top + this.rectMain.height - 1, xx, yy, this.color.white)\r\n        continue\r\n      }\r\n      _drawmoveTo(this.context, xx, this.rectMain.top + this.rectMain.height - 1)\r\n      _drawlineTo(this.context, xx, yy)\r\n    }\r\n    _drawEnd(this.context)\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\nimport ClDrawKBar from './chart/cl.draw.kbar'\r\nimport ClDrawLine from './chart/cl.draw.line'\r\nimport ClDrawRight from './chart/cl.draw.right'\r\nimport ClDrawVBar from './chart/cl.draw.vbar'\r\nimport ClDrawVLine from './chart/cl.draw.vline'\r\n\r\n/** @module ClChartDef */\r\n\r\n/**\r\n * chart main layout config\r\n */\r\nexport const CHART_LAYOUT = {\r\n  margin: {\r\n    left: 0,\r\n    top: 0,\r\n    right: 0,\r\n    bottom: 0\r\n  },\r\n  offset: {\r\n    left: 2,\r\n    top: 2,\r\n    right: 2,\r\n    bottom: 0\r\n  },\r\n  title: {\r\n    pixel: 12,\r\n    height: 18,\r\n    spaceX: 10,\r\n    spaceY: 2,\r\n    font: 'sans-serif'\r\n  },\r\n  axisX: {\r\n    pixel: 12,\r\n    height: 18,\r\n    width: 50,\r\n    spaceX: 2,\r\n    font: 'sans-serif'\r\n  },\r\n  scroll: {\r\n    pixel: 12,\r\n    size: 15,\r\n    spaceX: 10,\r\n    font: 'sans-serif'\r\n  },\r\n  digit: {\r\n    pixel: 12,\r\n    height: 16,\r\n    spaceX: 3,\r\n    font: 'sans-serif'\r\n  },\r\n  symbol: {\r\n    pixel: 10,\r\n    size: 18,\r\n    spaceX: 3,\r\n    font: 'sans-serif'\r\n  }\r\n}\r\n\r\n/**\r\n * chart buttons config\r\n */\r\nexport const CHART_BUTTONS = [\r\n  { key: 'zoomin' },\r\n  { key: 'zoomout' },\r\n  { key: 'exright' }\r\n]\r\n\r\n/**\r\n * chart order config\r\n */\r\nexport const CHART_ORDER = {\r\n  style: 'normal', // 'tiny' only shows buy one sell one 'normal' 5 orders\r\n  title: {\r\n    display: 'text' // 'text' or 'none','none' does not display btn button text\r\n  }\r\n}\r\n\r\nconst ZOOM_INFO_DEF = {\r\n  index: 3,\r\n  list: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]\r\n}\r\n\r\n/**\r\n * chart kbar layout config\r\n */\r\nexport const CHART_KBAR = {\r\n  // buttons: ['zoomin', 'exright', 'zoomout'],\r\n  // title: { display: 'none' },\r\n  // scroll: {display: 'none'},\r\n  zoomInfo: ZOOM_INFO_DEF,\r\n  scroll: {\r\n    display: 'none' // 'none' does not show\r\n  },\r\n  title: {\r\n    display: 'text', // none does not show btn button text\r\n    label: 'K线' // label information to be displayed\r\n  },\r\n  axisX: {\r\n    lines: 0,\r\n    display: 'none', // 'none' | 'both' | 'block', 'none' does not show, 'both': show both, 'block': displays a value for each block based on lines = display coordinates\r\n    type: 'normal', // 'normal' | 'day1' | 'day5'\r\n    format: 'date' // date time datetime normal tradetime(9:30)\r\n  },\r\n  axisY: {\r\n    lines: 3,\r\n    left: {\r\n      display: 'both', // none不显示, both, noupper 不显示最上面, nofoot不显示最下面 = 显示坐标\r\n      middle: 'none', // 是否有中间值 'before'=前收盘 ‘zero’ 0为中间值\r\n      format: 'price' // 输出数据的格式 rate, price 保留一定小数位 vol 没有小数\r\n    },\r\n    right: {\r\n      display: 'both', // none不显示，noupper 不显示最上面, nofoot不显示最下面 = 显示坐标\r\n      middle: 'none', // 是否有中间值 'before'=前收盘 ‘zero’ 0为中间值\r\n      format: 'price' // rate, price vol\r\n    }\r\n  },\r\n  lines: [{\r\n    // type: 'l_kbar',\r\n    className: ClDrawKBar,\r\n    extremum: { // 如何取极值\r\n      method: 'normal', // fixedLeft fixedRight 上下固定,此时需要取axisY.middle的定义\r\n      maxvalue: ['high'], // 参与计算最大值的标签\r\n      minvalue: ['low'] // 参与计算最小值的标签\r\n    }\r\n    // 第一根线默认的key是跟随chart的hotKey变化而变化的，其他线要么自己有数据，要么根据hotKey加上公式计算出自己的key\r\n  },\r\n  {\r\n    className: ClDrawRight\r\n  },\r\n  {\r\n    className: ClDrawLine,\r\n    info: { // 输出在信息栏目的数据\r\n      txt: '5:',\r\n      labelY: 'value', // 从key中获取对应的数据标签 用于显示信息用\r\n      format: 'price'\r\n    },\r\n    formula: { // 数据生成方式，都需要基于基本数据，没有formula表示取绑定的数据\r\n      key: 'DAYM1', // 生成和获取数据的key，\r\n      command: `out = this.MA('close',5)` // 公式只能输出值到out中\r\n    }\r\n  },\r\n  {\r\n    className: ClDrawLine,\r\n    info: {\r\n      txt: '10:',\r\n      labelY: 'value',\r\n      format: 'price'\r\n    },\r\n    formula: {\r\n      key: 'DAYM2', // 获取数据的key，\r\n      command: `out = this.MA('close',10)` // 公式只能输出值到out中\r\n    }\r\n  },\r\n  {\r\n    className: ClDrawLine,\r\n    info: {\r\n      txt: '20:',\r\n      labelY: 'value',\r\n      format: 'price'\r\n    },\r\n    formula: {\r\n      key: 'DAYM3', // 获取数据的key，\r\n      command: `out = this.MA('close',20)` // 公式只能输出值到out中\r\n    }\r\n  },\r\n  {\r\n    className: ClDrawLine,\r\n    info: {\r\n      txt: '60:',\r\n      labelY: 'value',\r\n      format: 'price'\r\n    },\r\n    formula: {\r\n      key: 'DAYM4', // 获取数据的key，\r\n      command: `out = this.MA('close',60)` // 公式只能输出值到out中\r\n    }\r\n  }]\r\n}\r\n\r\n/**\r\n * chart vbar layout config\r\n */\r\nexport const CHART_VBAR = {\r\n  zoomInfo: ZOOM_INFO_DEF,\r\n  title: {\r\n    display: 'text', // none 不显示 btn 按钮 text 文字\r\n    label: 'VOL' // 需要显示的文字信息\r\n  },\r\n  axisX: {\r\n    lines: 0,\r\n    display: 'both', // 左右两边显示\r\n    type: 'normal', // 有 day1 day5 和 normal 三种模式\r\n    format: 'date' // date time datetime normal tradetime：根据交易时间此时label无用 = 显示的信息方式\r\n  },\r\n  axisY: {\r\n    lines: 1,\r\n    left: {\r\n      display: 'nofoot',\r\n      middle: 'none',\r\n      format: 'vol'\r\n    },\r\n    right: {\r\n      display: 'nofoot',\r\n      middle: 'none',\r\n      format: 'vol'\r\n    }\r\n  },\r\n  lines: [{\r\n    className: ClDrawVBar,\r\n    extremum: { // 如何取极值\r\n      method: 'normal', // fixedLeft fixedRight 上下固定,此时需要取axisY.middle的定义\r\n      maxvalue: ['vol'], // 参与计算最大值的标签\r\n      minvalue: [0] // 参与计算最小值的标签\r\n    },\r\n    info: {\r\n      labelY: 'vol', // 需要显示的变量，从key中获取对应的数据标签\r\n      format: 'vol'\r\n    }\r\n  },\r\n  {\r\n    className: ClDrawLine,\r\n    info: {\r\n      txt: '5:',\r\n      labelY: 'value', // 需要显示的变量，从key中获取对应的数据标签\r\n      format: 'vol'\r\n    },\r\n    formula: {\r\n      key: 'MVOL1', // 获取数据的key，\r\n      command: `out = this.MA('vol',5)` // 公式只能输出值到out中\r\n    }\r\n  },\r\n  {\r\n    className: ClDrawLine,\r\n    info: {\r\n      txt: '10:',\r\n      labelY: 'value', // 需要显示的变量，从key中获取对应的数据标签\r\n      format: 'vol'\r\n    },\r\n    formula: {\r\n      key: 'MVOL2', // 获取数据的key，\r\n      command: `out = this.MA('vol',10)` // 公式只能输出值到out中\r\n    }\r\n  },\r\n  {\r\n    className: ClDrawLine,\r\n    info: {\r\n      txt: '20:',\r\n      labelY: 'value', // 需要显示的变量，从key中获取对应的数据标签\r\n      format: 'vol'\r\n    },\r\n    formula: {\r\n      key: 'MVOL3', // 获取数据的key，\r\n      command: `out = this.MA('vol',20)` // 公式只能输出值到out中\r\n    }\r\n  }]\r\n}\r\n\r\n/**\r\n * chart now config\r\n */\r\nexport const CHART_NOW = {\r\n  title: {\r\n    display: 'none' // none 不显示 btn 按钮 text 文字\r\n  },\r\n  axisX: {\r\n    lines: 3,\r\n    display: 'none', // none不显示，sides：两边各一个值, block：根据块大小每个块显示一个值 = 显示坐标\r\n    type: 'day1', // 有 day1 day5 和 normal 三种模式\r\n    format: 'tradetime'\r\n  },\r\n  axisY: {\r\n    lines: 3,\r\n    left: {\r\n      display: 'both', // none不显示，all, noupper不显示最上面, nofoot不显示最下面 = 显示坐标\r\n      middle: 'before', // 是否有中间值 'before'=前收盘 ‘zero’ 0为中间值\r\n      format: 'price' // 输出数据的格式 rate, price, vol\r\n    },\r\n    right: {\r\n      display: 'both', // none不显示，noupper不显示最上面, nofoot不显示最下面 = 显示坐标\r\n      middle: 'before', // 是否有中间值 'before'=前收盘 ‘zero’ 0为中间值\r\n      format: 'rate' // rate, price vol\r\n    }\r\n  },\r\n  lines: [{\r\n    className: ClDrawLine,\r\n    extremum: { // 如何取极值\r\n      method: 'fixedLeft', // fixedLeft fixedRight 上下固定,此时需要取axisY.middle的定义\r\n      maxvalue: ['high'], // 参与计算最大值的标签\r\n      minvalue: ['low'] // 参与计算最小值的标签\r\n    },\r\n    info: {\r\n      labelX: 'idx',\r\n      labelY: 'close',\r\n      showSort: 'idx'\r\n    }\r\n  },\r\n  {\r\n    className: ClDrawLine,\r\n    info: {\r\n      showSort: 'idx'\r\n    },\r\n    formula: {\r\n      key: 'NOWM1', // 获取数据的key，\r\n      command: `out = this.AVGPRC()` // 均价,要根据股票类型做变化\r\n    }\r\n  }]\r\n}\r\n\r\n/**\r\n * min chart volume config\r\n */\r\nexport const CHART_NOWVOL = {\r\n  title: {\r\n    display: 'none' // none 不显示 btn 按钮 text 文字\r\n  },\r\n  axisX: {\r\n    lines: 3,\r\n    display: 'both', // 左右两边显示\r\n    type: 'day1', // 有 day1 day5 和 normal 三种模式\r\n    format: 'tradetime'\r\n  },\r\n  axisY: {\r\n    lines: 1,\r\n    left: {\r\n      display: 'nofoot',\r\n      middle: 'none',\r\n      format: 'vol'\r\n    },\r\n    right: {\r\n      display: 'nofoot',\r\n      middle: 'none',\r\n      format: 'vol'\r\n    }\r\n  },\r\n  lines: [{\r\n    className: ClDrawVLine,\r\n    extremum: { // 如何取极值\r\n      method: 'normal', // fixedLeft fixedRight 上下固定,此时需要取axisY.middle的定义\r\n      maxvalue: ['decvol'], // 参与计算最大值的标签\r\n      minvalue: [0] // 参与计算最小值的标签\r\n    },\r\n    info: {\r\n      showSort: 'idx',\r\n      labelX: 'idx',\r\n      labelY: 'decvol',\r\n      color: 'vol'\r\n    }\r\n  }]\r\n}\r\n/**\r\n * 5day chart config\r\n */\r\nexport const CHART_DAY5 = {\r\n  title: {\r\n    display: 'none' // none 不显示 btn 按钮 text 文字\r\n  },\r\n  axisX: {\r\n    lines: 4,\r\n    display: 'none', // none不显示，both 边各一个值, block 根据块大小每个块显示一个值 = 显示坐标\r\n    type: 'day5', // 有 day1 day5 和 normal 三种模式\r\n    format: 'date' // date time datetime normal tradetime：根据交易时间此时label无用 = 显示的信息方式\r\n  },\r\n  axisY: {\r\n    lines: 3,\r\n    left: {\r\n      display: 'both', // none不显示，all, noupper不显示最上面, nofoot不显示最下面 = 显示坐标\r\n      middle: 'before',\r\n      format: 'price' // 输出数据的格式 rate, price, vol\r\n    },\r\n    right: {\r\n      display: 'both', // none不显示，noupper不显示最上面, nofoot不显示最下面 = 显示坐标\r\n      middle: 'before',\r\n      format: 'rate' // rate, price vol\r\n    }\r\n  },\r\n  lines: [{\r\n    className: ClDrawLine,\r\n    extremum: { // 如何取极值\r\n      method: 'fixedLeft', // fixedLeft fixedRight 上下固定,此时需要取axisY.middle的定义\r\n      maxvalue: ['close'], // 参与计算最大值的标签\r\n      minvalue: ['close'] // 参与计算最小值的标签\r\n    },\r\n    info: {\r\n      showSort: 'idx',\r\n      labelX: 'time',\r\n      labelY: 'close'\r\n    }\r\n  },\r\n  {\r\n    className: ClDrawLine,\r\n    info: {\r\n      showSort: 'idx'\r\n    },\r\n    formula: {\r\n      key: 'NOWDAY5', // 获取数据的key，\r\n      command: `out = this.AVGPRC()` // 均价,要根据股票类型做变化\r\n    }\r\n  }]\r\n}\r\n\r\n/**\r\n * 5 days chart volume config\r\n */\r\nexport const CHART_DAY5VOL = {\r\n  title: {\r\n    display: 'none' // none 不显示 btn 按钮 text 文字\r\n  },\r\n  axisX: {\r\n    lines: 4,\r\n    display: 'block',\r\n    type: 'day5', // 有 day1 day5 和 normal 三种模式\r\n    format: 'date' // date time datetime normal 显示的x轴信息方式\r\n  },\r\n  axisY: {\r\n    lines: 1,\r\n    left: {\r\n      display: 'nofoot', // none不显示，all, noupper不显示最上面, nofoot不显示最下面 = 显示坐标\r\n      middle: 'none',\r\n      format: 'vol' // 输出数据的格式 rate, price, vol\r\n    },\r\n    right: {\r\n      display: 'nofoot', // none不显示，noupper不显示最上面, nofoot不显示最下面 = 显示坐标\r\n      middle: 'none',\r\n      format: 'vol' // rate, price vol\r\n    }\r\n  },\r\n  lines: [{\r\n    className: ClDrawVLine,\r\n    extremum: { // 如何取极值\r\n      method: 'normal', // fixedLeft fixedRight 上下固定,此时需要取axisY.middle的定义\r\n      maxvalue: ['vol'], // 参与计算最大值的标签\r\n      minvalue: [0] // 参与计算最小值的标签\r\n    },\r\n    info: {\r\n      showSort: 'idx',\r\n      labelX: 'time',\r\n      labelY: 'vol',\r\n      color: 'vol'\r\n    }\r\n  }]\r\n}\r\n\r\nexport const CHART_NORMAL = {\r\n  title: {\r\n    display: 'text', // none 不显示 btn 按钮 text 文字\r\n    label: 'NORMAL'\r\n  },\r\n  axisX: {\r\n    lines: 0,\r\n    display: 'none',\r\n    type: 'normal', // 有 day1 day5 和 normal 三种模式\r\n    format: 'date' // date time datetime normal 显示的x轴信息方式\r\n  },\r\n  axisY: {\r\n    lines: 1,\r\n    left: {\r\n      display: 'both',\r\n      middle: 'none',\r\n      format: 'price'\r\n    },\r\n    right: {\r\n      display: 'both',\r\n      middle: 'none',\r\n      format: 'price'\r\n    }\r\n  },\r\n  lines: [{\r\n    className: ClDrawLine\r\n  }]\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\nimport {\r\n  _drawRect,\r\n  _drawVline,\r\n  _drawHline,\r\n  _drawCircle,\r\n  _setLineWidth,\r\n  _drawTxt,\r\n  _fillRect,\r\n  _drawBegin,\r\n  _drawSignCircle,\r\n  _drawSignPlot,\r\n  _setTransColor,\r\n  _drawEnd\r\n} from '../util/cl.draw'\r\nimport {\r\n  initCommonInfo,\r\n  checkLayout\r\n} from '../chart/cl.chart.init'\r\nimport { CHART_LAYOUT } from '../cl.chart.def'\r\nimport { updateJsonOfDeep } from '../util/cl.tool'\r\n\r\nconst DEFAULT_BUTTON = {\r\n  shape: 'arc', // box range radio checkbox set(位置)\r\n  hotIdx: 0,\r\n  visible: true,\r\n  translucent: true, // 是否透明\r\n  status: 'enabled' // disable focused : 热点\r\n}\r\n\r\n// ▲▼※★☆○●◎☉√↑←→↓↖↗↘↙‰℃∧∨△□▽♂♀﹡\r\n/**\r\n * Class representing ClChartButton\r\n * @export\r\n * @class ClChartButton\r\n */\r\nexport default class ClChartButton {\r\n  /**\r\n\r\n   * Creates an instance of ClChartButton.\r\n   * @param {Object} father\r\n   */\r\n  constructor (father) {\r\n    initCommonInfo(this, father)\r\n  }\r\n  init (cfg, callback) {\r\n    this.callback = callback\r\n    this.rectMain = cfg.rectMain || {\r\n      left: 0,\r\n      top: 0,\r\n      width: 25,\r\n      height: 25\r\n    }\r\n    this.layout = updateJsonOfDeep(cfg.layout, CHART_LAYOUT)\r\n    this.config = updateJsonOfDeep(cfg.config, DEFAULT_BUTTON)\r\n\r\n    // If it is not below '+' '-' 'left' 'right', it means to directly display the string\r\n    this.info = cfg.info || [{\r\n      map: '+'\r\n    }]\r\n\r\n    // Make some checks on the configuration\r\n    this.checkConfig()\r\n  }\r\n  /**\r\n   * Check for conflicting configuration changes\r\n   * @memberof ClChartButton\r\n   */\r\n  checkConfig () {\r\n    checkLayout(this.layout)\r\n  }\r\n  setStatus (status) {\r\n    if (this.config.status !== status) {\r\n      this.config.status = status\r\n    }\r\n  }\r\n  /**\r\n   * handle click event\r\n   *\r\n   * @param {Object} event\r\n   * @memberof ClChartButton\r\n   */\r\n  onClick (event) {\r\n    if (!this.config.visible) return\r\n    // if (this.config.status === 'disabled') return\r\n    if (this.info.length > 1) {\r\n      this.config.hotIdx++\r\n      this.config.hotIdx %= this.info.length\r\n      this.onPaint()\r\n    }\r\n    if (this.config.hotIdx >= 0 && this.config.hotIdx < this.info.length) {\r\n      this.callback({\r\n        self: this,\r\n        info: this.info[this.config.hotIdx]\r\n      })\r\n    } else {\r\n      this.callback({\r\n        self: this\r\n      })\r\n    }\r\n    event.break = true\r\n  }\r\n  /**\r\n   * paint buttons\r\n   * @memberof ClChartButton\r\n   */\r\n  onPaint () {\r\n    if (!this.config.visible) return\r\n    _setLineWidth(this.context, this.scale)\r\n\r\n    let clr = this.color.button\r\n    if (this.config.status === 'disabled') clr = this.color.grid\r\n\r\n    _drawBegin(this.context, clr)\r\n    const center = {\r\n      xx: Math.floor(this.rectMain.width / 2),\r\n      yy: Math.floor(this.rectMain.height / 2),\r\n      offset: 4 * this.scale\r\n    }\r\n\r\n    const info = this.info[this.config.hotIdx]\r\n    switch (this.config.shape) {\r\n      case 'set':\r\n        if (this.config.status === 'focused') {\r\n          clr = this.color.red\r\n          if (this.config.translucent) clr = _setTransColor(clr, 0.95)\r\n          _drawSignPlot(this.context, this.rectMain.left + center.xx,\r\n            this.rectMain.top + center.xx, {\r\n              r: Math.round(this.layout.symbol.size / 2),\r\n              clr\r\n            }\r\n          )\r\n          center.yy = center.xx\r\n        } else {\r\n          clr = this.color.vol\r\n          if (this.config.translucent) clr = _setTransColor(clr, 0.85)\r\n          _drawSignCircle(this.context, this.rectMain.left + center.xx, this.rectMain.top + center.xx, {\r\n            r: Math.round(this.layout.symbol.size / 2),\r\n            clr\r\n          })\r\n        }\r\n        break\r\n      case 'arc':\r\n        _drawCircle(this.context, this.rectMain.left + center.xx, this.rectMain.top + center.xx, center.xx)\r\n        break\r\n      case 'box':\r\n        _fillRect(this.context, this.rectMain.left, this.rectMain.top, this.rectMain.width, this.rectMain.height, this.color.back)\r\n        _drawRect(this.context, this.rectMain.left, this.rectMain.top, this.rectMain.width, this.rectMain.height)\r\n        break\r\n      case 'range':\r\n        _drawCircle(this.context, this.rectMain.left + center.xx, this.rectMain.top + center.xx, center.xx)\r\n        break\r\n      case 'radio':\r\n        _drawCircle(this.context, this.rectMain.left + center.xx, this.rectMain.top + center.xx, center.xx)\r\n        break\r\n      case 'checkbox':\r\n        _drawCircle(this.context, this.rectMain.left + center.xx, this.rectMain.top + center.xx, center.xx)\r\n        break\r\n      default:\r\n    }\r\n    _drawEnd(this.context)\r\n    if (this.config.status === 'disabled') _drawBegin(this.context, this.color.grid)\r\n    else _drawBegin(this.context, this.color.button)\r\n    switch (info.map) {\r\n      case '+':\r\n        _drawVline(this.context, this.rectMain.left + center.xx, this.rectMain.top + center.offset,\r\n          this.rectMain.top + this.rectMain.height - center.offset)\r\n        _drawHline(this.context, this.rectMain.left + center.offset,\r\n          this.rectMain.left + this.rectMain.width - center.offset, this.rectMain.top + center.yy)\r\n        break\r\n      case '-':\r\n        _drawHline(this.context, this.rectMain.left + center.offset,\r\n          this.rectMain.left + this.rectMain.width - center.offset, this.rectMain.top + center.yy)\r\n        break\r\n      case '0':\r\n      case '1':\r\n      case '2':\r\n      case '3':\r\n      case '4':\r\n      case '5':\r\n      case '6':\r\n      case '7':\r\n      case '8':\r\n      case '9':\r\n        _drawTxt(this.context, this.rectMain.left + center.xx, this.rectMain.top + center.yy, info.map,\r\n          this.layout.title.font, this.layout.title.pixel, this.color.baktxt, {\r\n            x: 'center',\r\n            y: 'middle'\r\n          })\r\n        break\r\n      case '*':\r\n        _drawTxt(this.context, this.rectMain.left + center.xx, this.rectMain.top + center.yy - 2 * this.scale, '...',\r\n          this.layout.title.font, this.layout.title.pixel, this.color.baktxt, {\r\n            x: 'center',\r\n            y: 'middle'\r\n          })\r\n        break\r\n      case 'left':\r\n      case 'right':\r\n        break\r\n      default:\r\n        _drawTxt(this.context, this.rectMain.left + center.xx, this.rectMain.top + center.yy, info.map,\r\n          this.layout.title.font, this.layout.title.pixel, this.color.button, {\r\n            x: 'center',\r\n            y: 'middle'\r\n          })\r\n        break\r\n    }\r\n    _drawEnd(this.context)\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n// 可以拖动的滑动块定义\r\n// 支持锁定模式和自由模式，锁定模式滑动块固定大小，和传统滑动块类似，自由模式可左右选择范围，并返回值域，\r\n// 通常定义最大最小值，当前选定的最大最小值，并在鼠标放开后返回当前值域\r\n\r\nimport {\r\n  _getTxtWidth,\r\n  _setLineWidth,\r\n  _drawTxt,\r\n  _fillRect,\r\n  _drawRect,\r\n  _drawBegin,\r\n  _drawEnd\r\n} from '../util/cl.draw'\r\nimport {\r\n  changeCursorStyle,\r\n  initCommonInfo,\r\n  checkLayout\r\n} from '../chart/cl.chart.init'\r\nimport { CHART_LAYOUT } from '../cl.chart.def'\r\nimport {\r\n  updateJsonOfDeep,\r\n  offsetRect,\r\n  inRect\r\n} from '../util/cl.tool'\r\n\r\nconst DEFAULT_SCROLL = {\r\n  // display: 'none', // true\r\n  shape: 'fixed', // fixed 为固定宽度 free有边界\r\n  direct: 'horizontal', // ver 竖立 和横\r\n  range: 100,\r\n  select: { min: 40, max: 60 }, // min == beginIdx max = pageCount\r\n  status: 'enabled',\r\n  txt: {}\r\n}\r\n/**\r\n * Class representing ClChartScroll\r\n * @export\r\n * @class ClChartScroll\r\n */\r\nexport default class ClChartScroll {\r\n  /**\r\n\r\n   * Creates an instance of ClChartScroll.\r\n   * @param {Object} father order chart's parent context\r\n   */\r\n  constructor (father) {\r\n    initCommonInfo(this, father)\r\n  }\r\n  /**\r\n   * init\r\n   * @param {Object} cfg\r\n   * @param {any} callback initialized callback\r\n   * @memberof ClChartScroll\r\n   */\r\n  init (cfg, callback) {\r\n    this.callback = callback\r\n    this.rectMain = cfg.rectMain || { left: 0, top: 0, width: 200, height: 25 }\r\n    this.layout = updateJsonOfDeep(cfg.layout, CHART_LAYOUT)\r\n    this.config = updateJsonOfDeep(cfg.config, DEFAULT_SCROLL)\r\n\r\n    // 下面对配置做一定的校验\r\n    this.checkConfig()\r\n    // 再做一些初始化运算，下面的运算范围是初始化设置后基本不变的数据\r\n    this.setPublicRect()\r\n  }\r\n  /**\r\n   * check config\r\n   * @memberof ClChartScroll\r\n   */\r\n  checkConfig () {\r\n    checkLayout(this.layout)\r\n  }\r\n  /**\r\n   * Calculate all rectangular areas\r\n   * @memberof ClChartScroll\r\n   */\r\n  setPublicRect () { // 计算所有矩形区域\r\n    const count = this.config.range\r\n    let spaceX\r\n\r\n    this.rectChart = offsetRect(this.rectMain, this.layout.margin)\r\n\r\n    let start, stop, spaceY\r\n    if (this.config.direct === 'horizontal') {\r\n      spaceX = this.rectMain.width / (count - 1)\r\n      spaceY = this.rectMain.height - this.scale * 2\r\n      start = this.rectMain.left + spaceX * this.config.select.min\r\n      stop = this.rectMain.left + spaceX * this.config.select.max\r\n      if (this.config.shape === 'free') {\r\n        this.rectMin = {\r\n          left: start - this.layout.scroll.size / 2,\r\n          top: this.rectMain.top + this.scale,\r\n          width: this.layout.scroll.size,\r\n          height: spaceY\r\n        }\r\n        this.rectMax = {\r\n          left: stop - this.layout.scroll.size / 2,\r\n          top: this.rectMain.top + this.scale,\r\n          width: this.layout.scroll.size,\r\n          height: spaceY\r\n        }\r\n        this.rectMid = {\r\n          left: start + this.layout.scroll.size / 2,\r\n          top: this.rectMain.top + this.scale,\r\n          width: stop - start - this.layout.scroll.size,\r\n          height: spaceY\r\n        }\r\n      } else {\r\n        this.rectMid = {\r\n          left: start,\r\n          top: this.rectMain.top + this.scale,\r\n          width: stop - start,\r\n          height: spaceY\r\n        }\r\n      }\r\n    } else {\r\n      // spaceX = this.rectMain.height / (count - 1);\r\n      // spaceY = this.rectMain.width - this.scale * 2;\r\n      // start = this.rectMain.top + spaceX * this.config.select;\r\n      // stop = this.rectMain.top + spaceX * this.config.select;\r\n    }\r\n  }\r\n  /**\r\n   * paint scroll chart\r\n   * @memberof ClChartScroll\r\n   */\r\n  onPaint () {\r\n    _setLineWidth(this.context, this.scale)\r\n\r\n    this.drawClear()\r\n    this.drawGridline() // 先画线格\r\n    this.setPublicRect()\r\n    this.drawButton()\r\n  }\r\n  /**\r\n   * handle change info\r\n   * @param {Object} info\r\n   * @memberof ClChartScroll\r\n   */\r\n  onChange (info) {\r\n    this.config = updateJsonOfDeep(info, this.config)\r\n    if (this.config.select.max > this.config.range) this.config.select.max = this.config.range - 1\r\n    if (info.iscall) {\r\n      this.callback({ self: this, minIndex: this.config.select.min })\r\n    }\r\n  }\r\n  /**\r\n   * find mouse index\r\n   * @param {Number} xpos\r\n   * @return {Number} index\r\n   * @memberof ClChartScroll\r\n   */\r\n  findMouseIndex (xpos) {\r\n    const count = this.config.range\r\n    const spaceX = this.rectMain.width / (count - 1)\r\n    const idx = Math.round((xpos - this.rectMain.left) / spaceX)\r\n    return idx\r\n  }\r\n  /**\r\n   * check min\r\n   * @param {Number} min\r\n   * @return {Number}\r\n   * @memberof ClChartScroll\r\n   */\r\n  checkMin (min) {\r\n    if (min < 0) return 0\r\n    if (min > this.config.range - (this.config.select.max - this.config.select.min + 1)) {\r\n      return this.config.range - (this.config.select.max - this.config.select.min + 1)\r\n    }\r\n    return min\r\n  }\r\n  /**\r\n   * on init\r\n   * @memberof ClChartScroll\r\n   */\r\n  onInit () {\r\n    changeCursorStyle('default')\r\n    this.who = undefined\r\n  }\r\n  /**\r\n   * handle mouse out\r\n   * @memberof ClChartScroll\r\n   */\r\n  onMouseOut () {\r\n    changeCursorStyle('default')\r\n    this.who = undefined\r\n  }\r\n  /**\r\n   * hanlde mouse down\r\n   * @param {Object} event\r\n   * @memberof ClChartScroll\r\n   */\r\n  onMouseDown (event) {\r\n    const mousePos = event.mousePos\r\n    if (inRect(this.rectMin, mousePos)) {\r\n      this.who = 'min'\r\n    } else if (inRect(this.rectMax, mousePos)) {\r\n      this.who = 'max'\r\n    } else if (inRect(this.rectMid, mousePos)) {\r\n      this.who = 'mid'\r\n      this.index = this.findMouseIndex(mousePos.x)\r\n    } else {\r\n      this.who = undefined\r\n    }\r\n  }\r\n  /**\r\n   * handle mouse up\r\n   * @param {Object} event\r\n   * @memberof ClChartScroll\r\n   */\r\n  onMouseUp (event) {\r\n    if (this.config.shape !== 'free' && this.who === undefined) {\r\n      const mousePos = event.mousePos\r\n      const curIndex = this.findMouseIndex(mousePos.x)\r\n      let min = curIndex - Math.floor((this.config.select.max - this.config.select.min) / 2)\r\n      min = this.checkMin(min)\r\n      this.onChange({ min, iscall: true })\r\n    }\r\n    this.who = undefined\r\n  }\r\n  /**\r\n   * handle mouse move\r\n   * @param {Object} event\r\n   * @memberof ClChartScroll\r\n   */\r\n  onMouseMove (event) {\r\n    const mousePos = event.mousePos\r\n    if (inRect(this.rectMin, mousePos) || inRect(this.rectMax, mousePos)) {\r\n      changeCursorStyle('col-resize')\r\n    } else if (inRect(this.rectMid, mousePos)) {\r\n      changeCursorStyle('move')\r\n    } else {\r\n      changeCursorStyle('default')\r\n    }\r\n    if (this.who !== undefined) {\r\n      let min, max\r\n      const curIndex = this.findMouseIndex(mousePos.x)\r\n      if (this.config.shape === 'free') {\r\n        if (curIndex < this.config.select.max) {\r\n          if (this.who === 'max') {\r\n            max = curIndex\r\n          } else if (this.who === 'min') {\r\n            min = curIndex\r\n          }\r\n        } else if (curIndex >= this.config.select.max) {\r\n          if (this.who === 'min') {\r\n            min = this.config.select.max\r\n            max = curIndex\r\n            this.who = 'max'\r\n          } else if (this.who === 'max') {\r\n            max = curIndex\r\n          }\r\n        }\r\n        this.onChange({ min, max, iscall: true })\r\n      } else {\r\n        min = this.config.select.min + curIndex - this.index\r\n        this.index = curIndex\r\n        min = this.checkMin(min)\r\n        this.onChange({ min, iscall: true })\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * clear chart\r\n   * @memberof ClChartScroll\r\n   */\r\n  drawClear () {\r\n    _fillRect(this.context, this.rectMain.left, this.rectMain.top, this.rectMain.width, this.rectMain.height, this.color.back)\r\n  }\r\n  /**\r\n   * draw grid line\r\n   * @memberof ClChartScroll\r\n   */\r\n  drawGridline () {\r\n    _drawBegin(this.context, this.color.grid)\r\n    _drawRect(this.context, this.rectMain.left, this.rectMain.top, this.rectMain.width + this.scale / 2, this.rectMain.height)\r\n    _drawEnd(this.context)\r\n  }\r\n  drawButton () {\r\n    if (this.config.direct === 'horizontal') {\r\n      const spaceY = (this.rectChart.height - this.layout.scroll.height) / 2\r\n      if (this.config.txt.head !== undefined) {\r\n        _drawTxt(this.context, this.rectChart.left + this.scale, this.rectChart.top + spaceY,\r\n          this.config.txt.head,\r\n          this.layout.scroll.font, this.layout.scroll.pixel, this.color.axis)\r\n      }\r\n      if (this.config.txt.tail !== undefined) {\r\n        _drawTxt(this.context, this.rectChart.left + this.rectChart.width - this.scale,\r\n          this.rectChart.top + spaceY, this.config.txt.tail,\r\n          this.layout.scroll.font, this.layout.scroll.pixel, this.color.axis, { x: 'end' })\r\n      }\r\n\r\n      _drawBegin(this.context, this.color.colume)\r\n      _drawRect(this.context, this.rectMid.left, this.rectMid.top,\r\n        this.rectMid.width, this.rectMid.height)\r\n      _fillRect(this.context, this.rectMid.left, this.rectMid.top,\r\n        this.rectMid.width, this.rectMid.height, this.color.box)\r\n      if (this.config.shape === 'free') {\r\n        _fillRect(this.context, this.rectMin.left, this.rectMin.top,\r\n          this.rectMin.width, this.rectMin.height, this.color.colume)\r\n        _fillRect(this.context, this.rectMax.left, this.rectMax.top,\r\n          this.rectMax.width, this.rectMax.height, this.color.colume)\r\n      }\r\n      _drawEnd(this.context)\r\n      const len = _getTxtWidth(this.context, this.config.txt.left, this.layout.scroll.font, this.layout.scroll.pixel) + 2 * this.scale\r\n      if (this.config.txt.left !== undefined && this.rectMid.width > len) {\r\n        _drawTxt(this.context, this.rectMid.left + this.scale, this.rectMid.top + spaceY,\r\n          this.config.txt.left,\r\n          this.layout.scroll.font, this.layout.scroll.pixel, this.color.axis)\r\n      }\r\n      if (this.config.txt.right !== undefined && this.rectMid.width > 2 * len) {\r\n        _drawTxt(this.context, this.rectMid.left + this.rectMid.width - this.scale,\r\n          this.rectMid.top + spaceY, this.config.txt.right,\r\n          this.layout.scroll.font, this.layout.scroll.pixel, this.color.axis, { x: 'end' })\r\n      }\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n// 以下是 ClLineAxisX 的实体定义\r\n\r\nimport {\r\n  // _drawLineAlone,\r\n  _drawTxt\r\n} from '../util/cl.draw'\r\nimport getValue from '../data/cl.data.tools'\r\nimport {\r\n  getDate,\r\n  formatShowTime\r\n} from '../util/cl.tool'\r\nimport {\r\n  initCommonInfo\r\n} from '../chart/cl.chart.init'\r\n\r\n// 创建时必须带入父类，后面的运算定位都会基于父节点进行；\r\n// 这个类仅仅是画图, 因此需要把可以控制的rect传入进来\r\n/**\r\n * Class representing ClDrawAxisX\r\n * @export\r\n * @class ClDrawAxisX\r\n */\r\nexport default class ClDrawAxisX {\r\n  /**\r\n\r\n   * Creates an instance of ClDrawAxisX.\r\n   * @param {Object} father\r\n   * @param {Object} rectMain\r\n   */\r\n  constructor (father, rectMain) {\r\n    initCommonInfo(this, father)\r\n    this.rectMain = rectMain\r\n    this.linkInfo = father.father.linkInfo\r\n    this.axisX = father.config.axisX\r\n    this.maxmin = father.maxmin\r\n    this.text = father.layout.axisX\r\n  }\r\n  /**\r\n   * pain axisx\r\n   * @memberof ClDrawAxisX\r\n   */\r\n  onPaint () {\r\n    this.data = this.father.data\r\n    if (this.axisX.display === 'none') return\r\n\r\n    let xx, value, spaceX\r\n    xx = this.rectMain.left + this.text.spaceX\r\n\r\n    const yy = this.rectMain.top + this.rectMain.height / 2\r\n    if (this.axisX.display === 'block') {\r\n      let count = -1\r\n      let days = 0\r\n      const daymins = this.linkInfo.maxCount / (this.axisX.lines + 1)\r\n      spaceX = this.rectMain.width / (this.axisX.lines + 1)\r\n      for (let k = this.linkInfo.minIndex; k <= this.linkInfo.maxIndex; k++) {\r\n        const index = getValue(this.data, 'idx', k)\r\n        if (index < 0) continue\r\n        days = Math.floor(index / daymins)\r\n        if (days > count) {\r\n          count = days\r\n          xx = this.rectMain.left + spaceX / 2 + spaceX * count\r\n          value = getDate(getValue(this.data, 'time', k))\r\n          _drawTxt(this.context, xx, yy, value,\r\n            this.text.font, this.text.pixel, this.color.axis, { y: 'middle', x: 'center' })\r\n        }\r\n      }\r\n    } else {\r\n      if (this.axisX.format === 'tradetime') {\r\n        this.tradeTime = this.father.father.dataLayer.tradeTime\r\n        value = formatShowTime(this.data.key, 0, this.tradeTime[0].begin)\r\n        _drawTxt(this.context, xx, yy, value,\r\n          this.text.font, this.text.pixel, this.color.axis, {\r\n            y: 'middle'\r\n          })\r\n\r\n        xx = this.rectMain.left + this.rectMain.width - 3\r\n        value = formatShowTime(this.data.key, 0, this.tradeTime[this.tradeTime.length - 1].end)\r\n        _drawTxt(this.context, xx, yy, value,\r\n          this.text.font, this.text.pixel, this.color.axis, {\r\n            y: 'middle',\r\n            x: 'end'\r\n          })\r\n      } else {\r\n        // _drawLineAlone(this.context, this.rectMain.left, this.rectMain.top,\r\n        //   this.rectMain.left + this.rectMain.width, this.rectMain.top, this.color.red)\r\n        value = getValue(this.data, 'time', this.linkInfo.minIndex)\r\n        value = formatShowTime(this.data.key, value, this.maxmin.min)\r\n        _drawTxt(this.context, xx, yy, value,\r\n          this.text.font, this.text.pixel, this.color.axis, {\r\n            y: 'middle'\r\n          })\r\n\r\n        xx = this.rectMain.left + this.rectMain.width - 3\r\n        value = getValue(this.data, 'time', this.linkInfo.maxIndex)\r\n        value = formatShowTime(this.data.key, value, this.maxmin.max)\r\n        _drawTxt(this.context, xx, yy, value,\r\n          this.text.font, this.text.pixel, this.color.axis, {\r\n            y: 'middle',\r\n            x: 'end'\r\n          })\r\n      }\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n// 以下是 ClLineAxisY 的实体定义\r\n\r\nimport {\r\n  _drawTxt\r\n} from '../util/cl.draw'\r\nimport {\r\n  initCommonInfo\r\n} from '../chart/cl.chart.init'\r\nimport {\r\n  formatInfo\r\n} from '../util/cl.tool'\r\n\r\n// 创建时必须带入父类，后面的运算定位都会基于父节点进行；\r\n// 这个类仅仅是画图, 因此需要把可以控制的rect传入进来\r\n/**\r\n * Class representing ClDrawAxisY\r\n * @export\r\n * @class ClDrawAxisY\r\n */\r\nexport default class ClDrawAxisY {\r\n  /**\r\n\r\n   * Creates an instance of ClDrawAxisY.\r\n   * @param {Object} father\r\n   * @param {Object} rectMain\r\n   * @param {Object} align\r\n   */\r\n  constructor (father, rectMain, align) {\r\n    initCommonInfo(this, father)\r\n    this.rectMain = rectMain\r\n    this.linkInfo = father.father.linkInfo\r\n\r\n    this.static = father.static\r\n\r\n    this.align = align\r\n    this.axisY = father.config.axisY\r\n\r\n    this.maxmin = father.maxmin\r\n    this.text = father.layout.title\r\n  }\r\n  /**\r\n   * paint\r\n   * @memberof ClDrawAxisY\r\n   */\r\n  onPaint () {\r\n    if (this.axisY[this.align].display === 'none') return\r\n    if (this.linkInfo.hideInfo) return\r\n\r\n    let xx, yy\r\n    let value, clr\r\n\r\n    let posX\r\n    const offX = this.axisPlatform === 'phone' ? 2 * this.scale : -2 * this.scale\r\n\r\n    if (this.align === 'left') {\r\n      if (this.axisPlatform === 'phone') {\r\n        posX = 'start'\r\n        xx = this.rectMain.left + offX\r\n      } else {\r\n        posX = 'end'\r\n        xx = this.rectMain.left + this.rectMain.width + offX\r\n      }\r\n    } else {\r\n      if (this.axisPlatform === 'phone') {\r\n        posX = 'end'\r\n        xx = this.rectMain.left + this.rectMain.width - offX\r\n      } else {\r\n        posX = 'start'\r\n        xx = this.rectMain.left - offX\r\n      }\r\n    }\r\n    yy = this.rectMain.top + this.scale // 画最上面的\r\n\r\n    // 画不画最上面的坐标\r\n    if (this.axisY[this.align].display !== 'noupper') {\r\n      yy = this.rectMain.top + this.scale // 画最上面的\r\n      clr = this.axisY[this.align].middle !== 'before' ? this.color.axis : this.color.red\r\n      value = formatInfo(\r\n        this.maxmin.max,\r\n        this.axisY[this.align].format,\r\n        this.static.coinunit,\r\n        this.static.volzoom,\r\n        this.static.before)\r\n      _drawTxt(this.context, xx, yy, value,\r\n        this.text.font, this.text.pixel, clr,\r\n        { x: posX, y: 'top' })\r\n    }\r\n    // 画不画最下面的坐标\r\n    if (this.axisY[this.align].display !== 'nofoot') {\r\n      clr = this.axisY[this.align].middle !== 'before' ? this.color.axis : this.color.green\r\n      yy = this.rectMain.top + this.rectMain.height - this.scale\r\n      value = formatInfo(\r\n        this.maxmin.min,\r\n        this.axisY[this.align].format,\r\n        this.static.coinunit,\r\n        this.static.volzoom,\r\n        this.static.before)\r\n      _drawTxt(this.context, xx, yy, value,\r\n        this.text.font, this.text.pixel, clr,\r\n        { x: posX, y: 'bottom' })\r\n    }\r\n    // 画其他的坐标线\r\n    const offy = this.rectMain.height / (this.axisY.lines + 1)\r\n\r\n    for (let i = 0; i < this.axisY.lines; i++) {\r\n      value = this.maxmin.max - offy * (i + 1) / this.maxmin.unitY\r\n      yy = this.rectMain.top + Math.round((i + 1) * offy)\r\n      clr = this.color.axis\r\n      if (this.axisY[this.align].middle !== 'none') {\r\n        if ((i + 1) < Math.round(this.axisY.lines / 2)) clr = this.color.red\r\n        if ((i + 1) > Math.round(this.axisY.lines / 2)) clr = this.color.green\r\n        if ((i + 1) === Math.round(this.axisY.lines / 2)) {\r\n          value = this.axisY[this.align].middle === 'zero' ? 0 : this.static.before\r\n        }\r\n      }\r\n\r\n      value = formatInfo(\r\n        value,\r\n        this.axisY[this.align].format,\r\n        this.static.coinunit,\r\n        this.static.volzoom,\r\n        this.static.before)\r\n\r\n      _drawTxt(this.context, xx, yy, value,\r\n        this.text.font, this.text.pixel, clr,\r\n        { x: posX, y: 'middle' })\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n// 以下是 ClDrawCursor 的实体定义\r\n\r\nimport {\r\n  _getTxtWidth,\r\n  _drawTxtRect,\r\n  _clearRect,\r\n  _drawLineAlone\r\n} from '../util/cl.draw'\r\nimport {\r\n  initCommonInfo\r\n} from '../chart/cl.chart.init'\r\nimport {\r\n  inRangeX,\r\n  inRangeY,\r\n  formatShowTime,\r\n  formatInfo\r\n} from '../util/cl.tool'\r\n// 创建时必须带入父类，后面的运算定位都会基于父节点进行；\r\n// 这个类仅仅是画图, 因此需要把可以控制的rect传入进来\r\n/**\r\n * Class representing ClDrawCursor\r\n * @export\r\n * @class ClDrawCursor\r\n */\r\nexport default class ClDrawCursor {\r\n  /**\r\n\r\n   * Creates an instance of ClDrawCursor.\r\n   * @param {Object} father\r\n   * @param {Object} rectMain\r\n   * @param {Object} rectChart\r\n   */\r\n  constructor (father, rectMain, rectChart) {\r\n    initCommonInfo(this, father)\r\n    this.rectFather = father.rectMain\r\n    this.rectMain = rectMain // 画十字线和边界标签\r\n    this.rectChart = rectChart // 鼠标有效区域\r\n\r\n    this.linkInfo = father.father.linkInfo\r\n    this.static = father.static\r\n\r\n    this.axisXInfo = father.config.axisX\r\n    this.axisYInfo = father.config.axisY\r\n\r\n    this.maxmin = father.maxmin\r\n    this.axisX = father.layout.axisX\r\n\r\n    this.context = father.father.cursorCanvas.context\r\n  }\r\n  /**\r\n   * handle clear\r\n   * @memberof ClDrawCursor\r\n   */\r\n  onClear () {\r\n    _clearRect(this.context, this.rectFather.left, this.rectFather.top,\r\n      this.rectFather.left + this.rectFather.width,\r\n      this.rectFather.top + this.rectFather.height)\r\n  }\r\n  /**\r\n   * paint\r\n   * @param {Object} mousePos\r\n   * @param {Number} valueX\r\n   * @param {Number} valueY\r\n   * @memberof ClDrawCursor\r\n   */\r\n  onPaint (mousePos, valueX, valueY) {\r\n    if (typeof this.context._beforePaint === 'function') {\r\n      this.context._beforePaint()\r\n    }\r\n    if (inRangeX(this.rectChart, mousePos.x) === false) return\r\n    this.onClear()\r\n\r\n    let txt\r\n    let xx = mousePos.x\r\n    let yy = mousePos.y\r\n    const offX = this.axisPlatform === 'phone' ? 2 * this.scale : -2 * this.scale\r\n\r\n    // 如果鼠标在本图区域，就画横线信息\r\n    if (inRangeY(this.rectChart, mousePos.y)) {\r\n      if (valueY === undefined) {\r\n        valueY = this.maxmin.max - (mousePos.y - this.rectChart.top) / this.maxmin.unitY\r\n      } else {\r\n        yy = (this.maxmin.max - valueY) * this.maxmin.unitY + this.rectChart.top\r\n      }\r\n\r\n      _drawLineAlone(this.context, this.rectMain.left, yy, this.rectMain.left + this.rectMain.width, yy, this.color.grid)\r\n      let posX = this.axisPlatform === 'phone' ? 'start' : 'end'\r\n\r\n      if (this.axisYInfo.left.display !== 'none') {\r\n        txt = formatInfo(\r\n          valueY,\r\n          this.axisYInfo.left.format,\r\n          this.static.coinunit,\r\n          this.static.volzoom,\r\n          this.static.before)\r\n        xx = this.rectMain.left + offX\r\n        _drawTxtRect(this.context, xx, yy, txt, {\r\n          font: this.axisX.font,\r\n          pixel: this.axisX.pixel,\r\n          spaceX: this.axisX.spaceX,\r\n          clr: this.color.txt,\r\n          bakclr: this.color.grid,\r\n          x: posX,\r\n          y: 'middle'\r\n        })\r\n      }\r\n      if (this.axisYInfo.right.display !== 'none') {\r\n        txt = formatInfo(\r\n          valueY,\r\n          this.axisYInfo.right.format,\r\n          this.static.coinunit,\r\n          this.static.volzoom,\r\n          this.static.before)\r\n        posX = this.axisPlatform === 'phone' ? 'end' : 'start'\r\n        xx = this.rectMain.left + this.rectMain.width - offX\r\n        _drawTxtRect(this.context, xx, yy, txt, {\r\n          font: this.axisX.font,\r\n          pixel: this.axisX.pixel,\r\n          spaceX: this.axisX.spaceX,\r\n          clr: this.color.txt,\r\n          bakclr: this.color.grid,\r\n          x: posX,\r\n          y: 'middle'\r\n        })\r\n      }\r\n    }\r\n\r\n    _drawLineAlone(this.context, mousePos.x, this.rectMain.top, mousePos.x, this.rectMain.top + this.rectMain.height - 1, this.color.grid)\r\n    if (this.axisXInfo.display !== 'none') {\r\n      xx = mousePos.x\r\n      const th = Math.floor((this.axisX.height - this.axisX.pixel - this.scale) / 2)\r\n      yy = this.rectMain.top + this.rectMain.height + th\r\n      txt = formatShowTime(this.father.data.key, valueX)\r\n      const len = Math.round(_getTxtWidth(this.context, txt, this.axisX.font, this.axisX.pixel) / 2)\r\n      let posX = 'center'\r\n      if (xx - len < this.rectMain.left + offX) { xx = this.rectMain.left + offX; posX = 'start' }\r\n      if (xx + len > this.rectMain.left + this.rectMain.width - offX) {\r\n        xx = this.rectMain.left + this.rectMain.width - offX\r\n        posX = 'end'\r\n      }\r\n      _drawTxtRect(this.context, xx, yy, txt, {\r\n        font: this.axisX.font,\r\n        pixel: this.axisX.pixel,\r\n        spaceX: this.axisX.spaceX,\r\n        clr: this.color.txt,\r\n        bakclr: this.color.grid,\r\n        x: posX,\r\n        y: 'top'\r\n      })\r\n    }\r\n    if (typeof this.context._afterPaint === 'function') {\r\n      this.context._afterPaint()\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n// 以下是 ClLineKBar 的实体定义\r\n\r\nimport {\r\n  _drawBegin,\r\n  _drawEnd,\r\n  _drawHline,\r\n  _drawVline\r\n} from '../util/cl.draw'\r\nimport {\r\n  initCommonInfo\r\n} from '../chart/cl.chart.init'\r\n\r\n// 创建时必须带入父类，后面的运算定位都会基于父节点进行；\r\n// 这个类仅仅是画图, 因此需要把可以控制的rect传入进来\r\n/**\r\n * Class representing ClDrawGrid\r\n * @export\r\n * @class ClDrawGrid\r\n */\r\nexport default class ClDrawGrid {\r\n  /**\r\n\r\n   * Creates an instance of ClDrawGrid.\r\n   * @param {Object} father\r\n   * @param {Object} rectMain\r\n   */\r\n  constructor (father, rectMain) {\r\n    initCommonInfo(this, father)\r\n    this.rectMain = rectMain\r\n\r\n    this.axisX = father.config.axisX\r\n    this.axisY = father.config.axisY\r\n  }\r\n  /**\r\n   * paint\r\n   * @memberof ClDrawGrid\r\n   */\r\n  onPaint () {\r\n    _drawBegin(this.context, this.color.grid)\r\n    _drawHline(this.context, this.rectMain.left, this.rectMain.left + this.rectMain.width, this.rectMain.top)\r\n    if (this.axisY.lines > 0) {\r\n      const offy = this.rectMain.height / (this.axisY.lines + 1)\r\n      for (let i = 0; i < this.axisY.lines; i++) {\r\n        _drawHline(this.context, this.rectMain.left, this.rectMain.left + this.rectMain.width, this.rectMain.top + Math.round((i + 1) * offy))\r\n      }\r\n    }\r\n    if (this.axisX.display !== 'none') {\r\n      _drawHline(this.context, this.rectMain.left, this.rectMain.left + this.rectMain.width, this.rectMain.top + this.rectMain.height)\r\n    }\r\n    // 画纵坐标\r\n    if (this.axisX.lines > 0) {\r\n      const offx = this.rectMain.width / (this.axisX.lines + 1)\r\n      for (let i = 0; i < this.axisX.lines; i++) {\r\n        _drawVline(this.context, this.rectMain.left + Math.round((i + 1) * offx), this.rectMain.top, this.rectMain.top + this.rectMain.height)\r\n      }\r\n    }\r\n    if (this.axisPlatform !== 'phone') {\r\n      _drawVline(this.context, this.rectMain.left, this.rectMain.top, this.rectMain.top + this.rectMain.height)\r\n      _drawVline(this.context, this.rectMain.left + this.rectMain.width, this.rectMain.top, this.rectMain.top + this.rectMain.height)\r\n    }\r\n    _drawEnd(this.context)\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n// 以下是 ClLineKBar 的实体定义\r\n\r\nimport {\r\n  _fillRect,\r\n  _getTxtWidth,\r\n  _drawTxt\r\n} from '../util/cl.draw'\r\nimport {\r\n  initCommonInfo\r\n} from '../chart/cl.chart.init'\r\n\r\n// 创建时必须带入父类，后面的运算定位都会基于父节点进行；\r\n// 这个类仅仅是画图, 因此需要把可以控制的rect传入进来\r\n/**\r\n * Class representing ClDrawInfo\r\n * @export\r\n * @class ClDrawInfo\r\n */\r\nexport default class ClDrawInfo {\r\n  /**\r\n\r\n   * Creates an instance of ClDrawInfo.\r\n   * @param {Object} father\r\n   * @param {Object} rectMain\r\n   * @param {Object} rectMess\r\n   */\r\n  constructor (father, rectMain, rectMess) {\r\n    initCommonInfo(this, father)\r\n    this.rectMain = rectMain\r\n    this.rectMess = rectMess\r\n\r\n    this.linkInfo = father.father.linkInfo\r\n\r\n    this.title = father.layout.title\r\n    this.titleInfo = father.config.title\r\n  }\r\n  /**\r\n   * paint\r\n   * @param {Object} message\r\n   * @memberof ClDrawInfo\r\n   */\r\n  onPaint (message) {\r\n    if (this.titleInfo.display === 'none' || this.linkInfo.hideInfo) return\r\n\r\n    _fillRect(this.context, this.rectMain.left + this.scale, this.rectMain.top + this.scale,\r\n      this.rectMess.left + this.rectMess.width - 2 * this.scale,\r\n      this.rectMain.height - 2 * this.scale, this.color.back)\r\n\r\n    let clr = this.color.txt\r\n    const spaceY = Math.round((this.title.height - this.title.pixel) / 2) - this.scale\r\n    const yy = this.rectMess.top + spaceY\r\n\r\n    if (this.titleInfo.label !== undefined) {\r\n      _drawTxt(this.context, this.rectMain.left + this.scale, yy, this.titleInfo.label,\r\n        this.title.font, this.title.pixel, clr)\r\n    }\r\n    let xx = this.rectMess.left + this.scale\r\n    for (let i = 0; i < message.length; i++) {\r\n      clr = this.color.line[i]\r\n      if (message[i].txt !== undefined) {\r\n        _drawTxt(this.context, xx, yy, message[i].txt, this.title.font, this.title.pixel, clr)\r\n        xx += _getTxtWidth(this.context, message[i].txt, this.title.font, this.title.pixel) + this.title.spaceX\r\n      }\r\n      if (message[i].value === undefined) continue\r\n      _drawTxt(this.context, xx, yy, ' ' + message[i].value, this.title.font, this.title.pixel, clr)\r\n      xx += _getTxtWidth(this.context, ' ' + message[i].value, this.title.font, this.title.pixel) + this.title.spaceX\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n// 以下是ClChartLine的实体定义  --- 画线类\r\n\r\n// 实际上就是获取某种类型数据，然后横坐标 0 开始排序，永远是数值型，但显示出什么要到对应的数组中找\r\n// 纵坐标根据数据类型，计算最大最小值，然后根据画线类型画出数据线，所有的不同全部在ClChart中处理\r\n\r\nimport {\r\n  _fillRect,\r\n  _drawRect,\r\n  // _getImageData,\r\n  // _putImageData,\r\n  _setLineWidth,\r\n  _getTxtWidth,\r\n  _drawBegin,\r\n  _drawEnd\r\n} from '../util/cl.draw'\r\nimport {\r\n  findLabelToIndex,\r\n  setFixedLineFlags,\r\n  setMoveLineFlags\r\n} from './cl.chart.tools'\r\nimport {\r\n  initCommonInfo,\r\n  checkLayout\r\n} from '../chart/cl.chart.init'\r\nimport { CHART_LAYOUT } from '../cl.chart.def'\r\nimport {\r\n  updateJsonOfDeep,\r\n  copyJsonOfDeep,\r\n  offsetRect,\r\n  inArray,\r\n  isEmptyArray,\r\n  formatShowTime,\r\n  formatInfo,\r\n  inRangeX\r\n} from '../util/cl.tool'\r\n\r\nimport {\r\n  STOCK_TYPE_INDEX\r\n} from '../data/../cl.data.def'\r\nimport getValue, {\r\n  getSize,\r\n  fromIndexToTradeTime,\r\n  getMinuteCount\r\n} from '../data/cl.data.tools'\r\n\r\nimport ClChartButton from './cl.chart.button'\r\nimport ClChartScroll from './cl.chart.scroll'\r\nimport ClDrawAxisX from './cl.draw.axisX'\r\nimport ClDrawAxisY from './cl.draw.axisY'\r\nimport ClDrawCursor from './cl.draw.cursor'\r\nimport ClDrawGrid from './cl.draw.grid'\r\nimport ClDrawInfo from './cl.draw.info'\r\nimport ClDrawLine from './cl.draw.line'\r\nimport ClDrawVLine from './cl.draw.vline'\r\n\r\n/**\r\n * Class representing ClChartLine\r\n * @export\r\n * @class ClChartLine\r\n */\r\nexport default class ClChartLine {\r\n  /**\r\n\r\n   * Creates an instance of ClChartLine.\r\n   * @param {Object} father line chart's parent context\r\n   */\r\n  constructor (father) {\r\n    initCommonInfo(this, father)\r\n    this.linkInfo = father.linkInfo\r\n    this.static = this.father.dataLayer.static\r\n    this.data = {}\r\n    this.maxmin = {}\r\n  }\r\n  /**\r\n   * init line\r\n   * @param {Object} cfg line's config\r\n   * @param {any} callback initialized callback\r\n   * @memberof ClChartLine\r\n   */\r\n  init (cfg, callback) {\r\n    this.callback = callback\r\n    this.rectMain = cfg.rectMain || {\r\n      left: 0,\r\n      top: 0,\r\n      width: 400,\r\n      height: 200\r\n    }\r\n\r\n    this.layout = updateJsonOfDeep(cfg.layout, CHART_LAYOUT)\r\n    this.config = copyJsonOfDeep(cfg.config)\r\n    // 这里直接赋值是因为外部已经设置好了配置才会开始初始化\r\n    this.buttons = cfg.buttons || []\r\n    this.scroll = cfg.config.scroll || {\r\n      display: 'none'\r\n    }\r\n    this.childCharts = {}\r\n\r\n    // 下面对配置做一定的校验\r\n    this.checkConfig()\r\n    // 再做一些初始化运算，下面的运算范围是初始化设置后基本不变的数据\r\n    this.setPublicRect()\r\n    // 初始化子窗口\r\n    this.childDraws = {}\r\n    this.setChildDraw()\r\n    this.childLines = {}\r\n    this.setChildLines()\r\n    // 初始化按钮\r\n    this.setButtons()\r\n    // 初始化滚动条\r\n    this.setScroll()\r\n  }\r\n  /**\r\n   * check config\r\n   * @memberof ClChartLine\r\n   */\r\n  checkConfig () { // 检查配置有冲突的修正过来\r\n    checkLayout(this.layout)\r\n    if (this.config.zoomInfo !== undefined) {\r\n      this.setZoomInfo()\r\n    }\r\n  }\r\n  /**\r\n   * set public rect\r\n   * @memberof ClChartLine\r\n   */\r\n  setPublicRect () { // 计算所有矩形区域\r\n    // rectChart 画图区\r\n    // rectTitle rectMess\r\n    // rectAxisX\r\n    // rectScroll\r\n    // rectAxisYLeft rectAxisYRight\r\n    // rectGridLine 坐标线区域\r\n\r\n    this.rectChart = offsetRect(this.rectMain, this.layout.margin)\r\n    const axisInfo = {\r\n      width: this.layout.axisX.width\r\n    } //\r\n\r\n    // 计算title和mess矩形位置\r\n    this.rectTitle = {\r\n      left: this.rectMain.left,\r\n      top: this.rectMain.top,\r\n      width: 0,\r\n      height: 0\r\n    }\r\n    this.rectMess = {\r\n      left: this.rectMain.left,\r\n      top: this.rectMain.top,\r\n      width: 0,\r\n      height: 0\r\n    }\r\n    if (this.config.title.display !== 'none') {\r\n      this.rectTitle = {\r\n        left: this.rectChart.left,\r\n        top: this.rectChart.top,\r\n        width: axisInfo.width,\r\n        height: this.layout.title.height\r\n      }\r\n      this.rectMess = {\r\n        left: this.rectChart.left + axisInfo.width + this.scale,\r\n        top: this.rectChart.top,\r\n        width: this.rectChart.width - axisInfo.width * 2,\r\n        height: this.layout.title.height\r\n      }\r\n    }\r\n\r\n    // 计算rectAxisX和rectScroll矩形位置\r\n    axisInfo.left = this.rectChart.left\r\n    axisInfo.right = this.rectChart.left + this.rectChart.width\r\n    axisInfo.top = this.rectTitle.top + this.rectTitle.height\r\n    axisInfo.bottom = this.rectChart.top + this.rectChart.height\r\n\r\n    if (this.axisPlatform !== 'phone') {\r\n      if (this.config.axisY.left.display !== 'none') axisInfo.left += this.layout.axisX.width\r\n      if (this.config.axisY.right.display !== 'none') axisInfo.right -= this.layout.axisX.width\r\n    }\r\n    if (this.config.axisX.display !== 'none') {\r\n      axisInfo.bottom -= this.layout.axisX.height\r\n    }\r\n    if (this.scroll.display !== 'none') {\r\n      axisInfo.bottom -= this.layout.scroll.size\r\n    }\r\n    // 此时已经可以得出画坐标线的区域了\r\n    this.rectGridLine = {\r\n      left: axisInfo.left,\r\n      top: axisInfo.top,\r\n      width: axisInfo.right - axisInfo.left,\r\n      height: axisInfo.bottom - axisInfo.top\r\n    }\r\n    this.rectAxisYLeft = {\r\n      left: this.rectChart.left,\r\n      top: axisInfo.top,\r\n      width: axisInfo.width,\r\n      height: axisInfo.bottom - axisInfo.top\r\n    }\r\n    this.rectAxisYRight = {\r\n      left: this.rectChart.left + this.rectChart.width - axisInfo.width,\r\n      top: axisInfo.top,\r\n      width: axisInfo.width,\r\n      height: axisInfo.bottom - axisInfo.top\r\n    }\r\n\r\n    this.rectChart = offsetRect(this.rectGridLine, this.layout.offset)\r\n\r\n    this.rectAxisX = {\r\n      left: 0,\r\n      top: axisInfo.bottom,\r\n      width: 0,\r\n      height: 0\r\n    }\r\n    if (this.config.axisX.display !== 'none') {\r\n      this.rectAxisX = {\r\n        left: axisInfo.left,\r\n        top: axisInfo.bottom + this.scale,\r\n        width: axisInfo.right - axisInfo.left,\r\n        height: this.layout.axisX.height\r\n      }\r\n    }\r\n    if (this.scroll.display !== 'none') {\r\n      this.rectScroll = {\r\n        left: axisInfo.left,\r\n        top: this.rectAxisX.top + this.rectAxisX.height + this.scale,\r\n        width: axisInfo.right - axisInfo.left,\r\n        height: this.layout.scroll.size\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * get line by data key\r\n   * @param {String} line\r\n   * @return {Object} line instance\r\n   * @memberof ClChartLine\r\n   */\r\n  getLineDataKey (line) {\r\n    if (line.formula === undefined) return this.hotKey\r\n    return line.formula.key\r\n  }\r\n  /**\r\n   * set child line instance\r\n   * @memberof ClChartLine\r\n   */\r\n  setChildLines () {\r\n    // l_kbar，l_line，l_nowvol，l_vbar l_nowline\r\n    let line\r\n    let clr = 0\r\n    for (let i = 0; i < this.config.lines.length; i++) {\r\n      const ClassName = this.config.lines[i].className\r\n      line = new ClassName(this, this.rectChart)\r\n\r\n      this.childLines['NAME' + i] = line\r\n      line.name = 'NAME' + i\r\n      line.hotKey = this.getLineDataKey(this.config.lines[i])\r\n      if (inArray(ClassName, [ClDrawLine, ClDrawVLine])) {\r\n        line.info = {\r\n          labelX: 'idx',\r\n          labelY: 'value'\r\n        }\r\n        if (this.config.lines[i].info !== undefined) line.info = this.config.lines[i].info\r\n        if (this.config.axisX.type === 'day5') {\r\n          // 专用于5日线跨天的连线问题\r\n          line.info.skips = getMinuteCount(this.father.dataLayer.tradeTime)\r\n        }\r\n        line.info.colorIndex = clr\r\n        clr++\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * set child draw instance\r\n   * @memberof ClChartLine\r\n   */\r\n  setChildDraw () {\r\n    let draw\r\n    draw = new ClDrawCursor(this, this.rectGridLine, this.rectChart)\r\n    this.childDraws['CURSOR'] = draw\r\n\r\n    if (this.config.title.display !== 'none') {\r\n      draw = new ClDrawInfo(this, this.rectTitle, this.rectMess)\r\n      this.childDraws['TITLE'] = draw\r\n    }\r\n    if (this.config.axisY.left.display !== 'none') {\r\n      draw = new ClDrawAxisY(this, this.rectAxisYLeft, 'left')\r\n      this.childDraws['AXISY_LEFT'] = draw\r\n    }\r\n    if (this.config.axisY.right.display !== 'none') {\r\n      draw = new ClDrawAxisY(this, this.rectAxisYRight, 'right')\r\n      this.childDraws['AXISY_RIGHT'] = draw\r\n    }\r\n    if (this.config.axisX.display !== 'none') {\r\n      draw = new ClDrawAxisX(this, this.rectAxisX)\r\n      this.childDraws['AXISX'] = draw\r\n    }\r\n    draw = new ClDrawGrid(this, this.rectGridLine)\r\n    this.childDraws['GRID'] = draw\r\n    // 下面是line的定义\r\n  }\r\n  /**\r\n   * set scroll instance\r\n   * @memberof ClChartLine\r\n   */\r\n  setScroll () {\r\n    if (this.scroll.display === 'none') return\r\n    const chart = new ClChartScroll(this)\r\n    chart.name = 'HSCROLL'\r\n    // this.father.bindEvent(chart);\r\n    this.childCharts[chart.name] = chart\r\n\r\n    chart.init({\r\n      rectMain: this.rectScroll,\r\n      config: {\r\n        width: 8\r\n      }\r\n    },\r\n    result => {\r\n      const self = result.self.father\r\n      if (self.father.linkInfo.minIndex !== result.minIndex) {\r\n        self.father.linkInfo.minIndex = result.minIndex\r\n        self.father.onPaint()\r\n      }\r\n    })\r\n  }\r\n  /**\r\n   * create button\r\n   * @param {String} name button name\r\n   * @return {Object} button instacne\r\n   * @memberof ClChartLine\r\n   */\r\n  createButton (name) {\r\n    if (this.childCharts[name] !== undefined) return this.childCharts[name]\r\n    const chart = new ClChartButton(this)\r\n    chart.name = name\r\n    // this.father.bindEvent(chart);\r\n    this.childCharts[name] = chart\r\n    return chart\r\n  }\r\n  /**\r\n   * check has button by key\r\n   * @param {String} key button key\r\n   * @param {Array} buttons buttons array\r\n   * @return {Boolean}\r\n   * @memberof ClChartLine\r\n   */\r\n  hasButton (key, buttons) {\r\n    for (let k = 0; k < buttons.length; k++) {\r\n      if (key === buttons[k].key) return true\r\n    }\r\n    return false\r\n  }\r\n  /**\r\n   * set buttons\r\n   * @memberof ClChartLine\r\n   */\r\n  setButtons () {\r\n    let chart\r\n    let xx, yy\r\n    let ww = 25 * this.scale\r\n    if (this.hasButton('zoomin', this.buttons) || this.hasButton('zoomout', this.buttons)) {\r\n      chart = this.createButton('zoomin')\r\n      xx = Math.floor((this.rectChart.width - (ww + ww) * 2) / 4)\r\n      yy = this.rectChart.top + this.rectChart.height * 0.95 - ww\r\n      chart.init({\r\n        rectMain: {\r\n          left: xx,\r\n          top: yy,\r\n          width: ww,\r\n          height: ww\r\n        },\r\n        info: [{\r\n          map: '-'\r\n        }]\r\n      },\r\n      (/* result */) => {\r\n        // const self = result.self.father;\r\n        if (this.config.zoomInfo.index > 0) {\r\n          this.config.zoomInfo.index--\r\n          this.setZoomInfo()\r\n          this.father.onPaint()\r\n        }\r\n      })\r\n      chart = this.createButton('zoomout')\r\n      xx += 2 * ww\r\n      chart.init({\r\n        rectMain: {\r\n          left: xx,\r\n          top: yy,\r\n          width: ww,\r\n          height: ww\r\n        },\r\n        info: [{\r\n          map: '+'\r\n        }]\r\n      },\r\n      (/* result */) => {\r\n        // const self = result.self.father;\r\n        if (this.config.zoomInfo.index < this.config.zoomInfo.list.length - 1) {\r\n          this.config.zoomInfo.index++\r\n          this.setZoomInfo()\r\n          this.father.onPaint()\r\n        }\r\n      })\r\n    }\r\n    if (this.hasButton('exright', this.buttons)) {\r\n      chart = this.createButton('exright')\r\n      ww = _getTxtWidth(this.context, '前复权', this.layout.title.font, this.layout.title.pixel)\r\n      xx = this.rectMain.left + this.rectMain.width - ww - this.layout.title.spaceX\r\n      if (this.config.title.display !== 'none') {\r\n        yy = (this.rectMess.height - this.layout.title.pixel - 2 * this.layout.title.spaceY) / 2\r\n      } else {\r\n        yy = this.rectMain.top + this.layout.title.spaceY\r\n      }\r\n      chart.init({\r\n        rectMain: {\r\n          left: xx,\r\n          top: this.rectMess.top + yy,\r\n          width: ww + this.layout.title.spaceX,\r\n          height: this.layout.title.pixel + 2 * this.layout.title.spaceY\r\n        },\r\n        config: {\r\n          shape: 'box'\r\n        },\r\n        info: [{\r\n          map: '不除权',\r\n          value: 'no'\r\n        },\r\n        {\r\n          map: '前复权',\r\n          value: 'forword'\r\n        }\r\n          // , {\r\n          //   map: '后复权',\r\n          //   value: 'back'\r\n          // }\r\n        ]\r\n      },\r\n      result => {\r\n        // const self = result.self.father;\r\n        this.father.linkInfo.rightMode = result.info.value\r\n        this.father.fastDrawEnd()\r\n        this.father.onPaint()\r\n      })\r\n      chart.hotIdx = 0\r\n    }\r\n  }\r\n\r\n  // 下面开始是功能性函数 主要用于简化主函数的结构\r\n\r\n  addLine (line) {\r\n    // this.removeLine(line.name);\r\n    this.config.lines.push(line)\r\n  }\r\n  /**\r\n   * remove line by name\r\n   * @param {String} name line name\r\n   * @memberof ClChartLine\r\n   */\r\n  removeLine (name) {\r\n    for (let i = 0; i < this.config.lines.length; i++) {\r\n      if (this.config.lines[i].name === undefined) continue\r\n      if (this.config.lines[i].name === name) {\r\n        this.config.lines.splice(i, 1)\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * set zoom info\r\n   * @memberof ClChartLine\r\n   */\r\n  setZoomInfo () {\r\n    const info = this.config.zoomInfo\r\n    info.index = info.index > info.list.length - 1 ? info.list.length - 1 : info.index\r\n    info.index = info.index < 0 ? 0 : info.index\r\n    const value = info.list[info.index]\r\n\r\n    this.linkInfo.unitX = value * this.scale\r\n    if (this.linkInfo.unitX < this.scale) this.linkInfo.unitX = this.scale\r\n    this.linkInfo.spaceX = this.linkInfo.unitX / 4\r\n    if (this.linkInfo.spaceX < this.scale) this.linkInfo.spaceX = this.scale\r\n\r\n    if (this.childCharts['zoomin']) {\r\n      if (info.index === 0) this.childCharts['zoomin'].setStatus('disabled')\r\n      else this.childCharts['zoomin'].setStatus('enabled')\r\n    }\r\n    if (this.childCharts['zoomout']) {\r\n      if (info.index === info.list.length - 1) this.childCharts['zoomout'].setStatus('disabled')\r\n      else this.childCharts['zoomout'].setStatus('enabled')\r\n    }\r\n    this.father.fastDrawEnd()\r\n  }\r\n  /**\r\n   * set hot button\r\n   * @param {Object} chart chart instance\r\n   * @memberof ClChartLine\r\n   */\r\n  setHotButton (chart) {\r\n    for (const name in this.childCharts) {\r\n      if (this.childCharts[name] === chart) {\r\n        this.childCharts[name].focused = true\r\n      } else {\r\n        this.childCharts[name].focused = false\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * clear chart\r\n   * @memberof ClChartLine\r\n   */\r\n  drawClear () {\r\n    _fillRect(this.context, this.rectMain.left, this.rectMain.top, this.rectMain.width, this.rectMain.height, this.color.back)\r\n    _drawBegin(this.context, this.color.grid)\r\n    _drawRect(this.context, this.rectMain.left, this.rectMain.top, this.rectMain.width, this.rectMain.height)\r\n    _drawEnd(this.context)\r\n  }\r\n  /**\r\n   * draw child charts\r\n   * @memberof ClChartLine\r\n   */\r\n  drawChildCharts () {\r\n    let top\r\n    for (const name in this.childCharts) {\r\n      if (!this.childCharts[name].focused) {\r\n        this.childCharts[name].onPaint()\r\n      } else {\r\n        top = this.childCharts[name]\r\n      }\r\n    }\r\n    if (top) top.onPaint()\r\n  }\r\n  /**\r\n   * before location\r\n   * @memberof ClChartLine\r\n   */\r\n  beforeLocation () {\r\n    for (const name in this.childLines) {\r\n      if (this.childLines[name].beforeLocation) {\r\n        this.childLines[name].beforeLocation()\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * draw child lines\r\n   * @memberof ClChartLine\r\n   */\r\n  drawChildLines () {\r\n    for (const name in this.childLines) {\r\n      if (this.childLines[name].hotKey !== undefined) {\r\n        this.childLines[name].onPaint(this.childLines[name].hotKey)\r\n      } else {\r\n        this.childLines[name].onPaint(this.hotKey)\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * According to the record index to obtain a set of data according to the keys, the data is {MA:[]...} is mainly provided for mouse movement\r\n   * @param {Number} index\r\n   * @return {Array}\r\n   * @memberof ClChartLine\r\n   */\r\n  getMoveData (index) {\r\n    let lines = this.config.lines\r\n    const out = []\r\n    if (!Array.isArray(lines)) return out\r\n\r\n    let value, info\r\n    for (let k = 0; k < lines.length; k++) {\r\n      if (lines[k].info === undefined) continue\r\n      if (lines[k].info.labelY !== undefined) {\r\n        if (lines[k].formula === undefined) {\r\n          value = getValue(this.data, lines[k].info.labelY, index)\r\n        } else {\r\n          value = getValue(this.father.getData(lines[k].formula.key), lines[k].info.labelY,\r\n            index - this.linkInfo.minIndex)\r\n        }\r\n        info = formatInfo(value, lines[k].info.format, this.static.coinunit, this.static.volzoom)\r\n        out.push({\r\n          index: k,\r\n          txt: lines[k].info.txt,\r\n          value: info\r\n        })\r\n      } else {\r\n        out.push({\r\n          index: k,\r\n          txt: lines[k].info.txt\r\n        })\r\n      }\r\n    }\r\n    return out\r\n  }\r\n  /**\r\n   * draw title info\r\n   * @param {Number} index title index\r\n   * @memberof ClChartLine\r\n   */\r\n  drawTitleInfo (index) {\r\n    if (this.config.title.display === 'none') return\r\n    if (index === undefined || index < 0 || index > this.linkInfo.maxIndex) index = this.linkInfo.maxIndex\r\n    this.childDraws['TITLE'].onPaint(this.getMoveData(index))\r\n  }\r\n  /**\r\n   * draw child\r\n   * @param {String} name child draw's name\r\n   * @memberof ClChartLine\r\n   */\r\n  drawChildDraw (name) {\r\n    if (this.childDraws[name] !== undefined) {\r\n      if (name === 'TITLE') {\r\n        this.drawTitleInfo(this.linkInfo.moveIndex)\r\n      } else {\r\n        this.childDraws[name].onPaint()\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * draw all the layers contained in this area\r\n   * @memberof ClChartLine\r\n   */\r\n  onPaint () {\r\n    this.beforeLocation() // 数据定位前需要做的事情\r\n\r\n    this.data = this.father.getData(this.hotKey)\r\n    this.locationData()\r\n    this.father.readyData(this.data, this.config.lines)\r\n\r\n    _setLineWidth(this.context, this.scale)\r\n    this.drawClear() // 清理画图区\r\n\r\n    this.drawChildDraw('GRID') // 先画线格\r\n\r\n    // 为画图做准备工作\r\n    this.readyDraw()\r\n    this.drawChildDraw('AXISX')\r\n    this.drawChildDraw('AXISY_LEFT')\r\n    this.drawChildDraw('AXISY_RIGHT')\r\n\r\n    this.drawChildLines() // 画出所有的线\r\n\r\n    this.drawChildDraw('TITLE')\r\n    this.drawChildCharts()\r\n\r\n    // this.img = _getImageData(this.context, this.rectMain.left, this.rectMain.top, this.rectMain.width, this.rectMain.height)\r\n  }\r\n\r\n  // 画图前的准备工作\r\n\r\n  /**\r\n   * get middle\r\n   * @param {String} method\r\n   * @return {Number}\r\n   * @memberof ClChartLine\r\n   */\r\n  getMiddle (method) {\r\n    let middle = this.config.axisY.left.middle\r\n    if (method === 'fixedRight') middle = this.config.axisY.right.middle\r\n    if (middle === 'before') return this.static.before\r\n    if (middle === 'zero') return 0\r\n    return 0\r\n  }\r\n  /**\r\n   * calc max and min data\r\n   * @param {Array} data\r\n   * @param {Object} extremum\r\n   * @param {Number} start\r\n   * @param {Number} stop\r\n   * @return {Object}\r\n   * @memberof ClChartLine\r\n   */\r\n  calcMaxMin (data, extremum, start, stop) {\r\n    const mm = {\r\n      max: 0.0,\r\n      min: 0.0\r\n    }\r\n    if (extremum.method === 'fixedLeft' || extremum.method === 'fixedRight') {\r\n      const middle = this.getMiddle(extremum.method)\r\n      mm.min = middle * (1 - 0.01)\r\n      mm.max = middle * (1 + 0.01)\r\n    }\r\n    if (data === undefined || isEmptyArray(data.value)) return mm\r\n\r\n    let value\r\n    if (start === undefined) start = 0\r\n    if (stop === undefined) stop = data.value.length - 1\r\n\r\n    for (let k = start; k <= stop; k++) {\r\n      if (!isEmptyArray(extremum.maxvalue)) {\r\n        for (let m = 0; m < extremum.maxvalue.length; m++) {\r\n          if (typeof (extremum.maxvalue[m]) !== 'string') continue\r\n          value = getValue(data, extremum.maxvalue[m], k)\r\n          if (value > 0 && value > mm.max) {\r\n            mm.max = value\r\n          }\r\n        }\r\n      }\r\n      if (!isEmptyArray(extremum.minvalue)) {\r\n        for (let m = 0; m < extremum.minvalue.length; m++) {\r\n          if (typeof (extremum.minvalue[m]) !== 'string') continue\r\n          value = getValue(data, extremum.minvalue[m], k)\r\n          if (mm.min === 0.0) mm.min = value\r\n          if (value > 0 && value < mm.min) {\r\n            mm.min = value\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!isEmptyArray(extremum.maxvalue)) {\r\n      for (let m = 0; m < extremum.maxvalue.length; m++) {\r\n        if (typeof (extremum.maxvalue[m]) === 'number') {\r\n          mm.max = extremum.maxvalue[m]\r\n          break\r\n        }\r\n      }\r\n    }\r\n    if (!isEmptyArray(extremum.minvalue)) {\r\n      for (let m = 0; m < extremum.minvalue.length; m++) {\r\n        if (typeof (extremum.minvalue[m]) === 'number') {\r\n          mm.min = extremum.minvalue[m]\r\n          break\r\n        }\r\n      }\r\n    }\r\n\r\n    if (extremum.method === 'fixedLeft' || extremum.method === 'fixedRight') {\r\n      const middle = this.getMiddle(extremum.method)\r\n      if (mm.max === mm.min) {\r\n        if (mm.max > middle) mm.min = middle\r\n        if (mm.min < middle) mm.max = middle\r\n      }\r\n      const maxrate = Math.abs(mm.max - middle) / middle\r\n      const minrate = Math.abs(middle - mm.min) / middle\r\n      if (maxrate < 0.01 && minrate < 0.01 &&\r\n        this.static.stktype !== STOCK_TYPE_INDEX) {\r\n        mm.min = middle * (1 - 0.01)\r\n        mm.max = middle * (1 + 0.01)\r\n      } else {\r\n        if (maxrate > minrate) {\r\n          // mm.min = middle / (1 + maxrate)\r\n          mm.min = middle * (1 - maxrate)\r\n        } else {\r\n          mm.max = middle * (1 + minrate)\r\n        }\r\n      }\r\n      if (mm.min < 0) mm.min = 0\r\n    }\r\n\r\n    return mm\r\n  }\r\n  /**\r\n   * ready for draw scroll\r\n   * @memberof ClChartLine\r\n   */\r\n  readyScroll () {\r\n    if (this.scroll.display === 'none') return\r\n    if (this.childCharts['HSCROLL'] !== undefined) {\r\n      let left = getValue(this.data, 'time', this.linkInfo.minIndex)\r\n      left = formatShowTime(this.data.key, left, this.father.dataLayer.tradeTime[0].begin)\r\n      let right = getValue(this.data, 'time', this.linkInfo.maxIndex)\r\n      right = formatShowTime(this.data.key, right,\r\n        this.father.dataLayer.tradeTime[this.father.dataLayer.tradeTime.length - 1].end)\r\n      let head = getValue(this.data, 'time', 0)\r\n      head = formatShowTime(this.data.key, head, this.father.dataLayer.tradeTime[0].begin)\r\n      let tail = getValue(this.data, 'time', this.data.value.length - 1)\r\n      tail = formatShowTime(this.data.key, tail,\r\n        this.father.dataLayer.tradeTime[this.father.dataLayer.tradeTime.length - 1].end)\r\n\r\n      this.childCharts['HSCROLL'].onChange({\r\n        head,\r\n        tail,\r\n        left,\r\n        right,\r\n        min: this.linkInfo.minIndex,\r\n        max: this.linkInfo.maxIndex,\r\n        range: this.data.value.length\r\n      })\r\n    }\r\n  }\r\n  /**\r\n   * get data range\r\n   * @param {Array} data\r\n   * @return {Object}\r\n   * @memberof ClChartLine\r\n   */\r\n  getDataRange (data) {\r\n    const out = {\r\n      minIndex: -1,\r\n      maxIndex: -1\r\n    }\r\n    if (isEmptyArray(data.value) || isEmptyArray(this.data.value)) return out\r\n    const start = getValue(this.data, 'time', this.linkInfo.minIndex)\r\n    const stop = getValue(this.data, 'time', this.linkInfo.maxIndex)\r\n    for (let k = 0; k <= data.value.length - 1; k++) {\r\n      const tt = getValue(data, 'time', k)\r\n      if (tt >= start) {\r\n        out.minIndex = k\r\n        break\r\n      }\r\n    }\r\n    for (let k = data.value.length - 1; k >= 0; k--) {\r\n      const tt = getValue(data, 'time', k)\r\n      if (tt <= stop) {\r\n        out.maxIndex = k\r\n        break\r\n      }\r\n    }\r\n    return out\r\n  }\r\n  /**\r\n   * location data\r\n   * @memberof ClChartLine\r\n   */\r\n  locationData () {\r\n    if (this.data === undefined) return\r\n    const size = getSize(this.data)\r\n    if (this.config.axisX.type === 'day1') {\r\n      setFixedLineFlags(\r\n        this.linkInfo, {\r\n          width: this.rectChart.width,\r\n          size,\r\n          scale: this.scale,\r\n          maxCount: getMinuteCount(this.father.dataLayer.tradeTime)\r\n        }\r\n      )\r\n    } else if (this.config.axisX.type === 'day5') {\r\n      setFixedLineFlags(\r\n        this.linkInfo, {\r\n          width: this.rectChart.width,\r\n          size,\r\n          scale: this.scale,\r\n          maxCount: 5 * getMinuteCount(this.father.dataLayer.tradeTime)\r\n        }\r\n      )\r\n    } else {\r\n      setMoveLineFlags(\r\n        this.linkInfo, {\r\n          width: this.rectChart.width,\r\n          scale: this.scale,\r\n          size\r\n        }\r\n      )\r\n    }\r\n  }\r\n  /**\r\n   * set ready for draw\r\n   * @memberof ClChartLine\r\n   */\r\n  readyDraw () { // 计算最大最小值等\r\n    // 画滚动块\r\n    this.readyScroll()\r\n\r\n    // 求最大最小值\r\n    let mm, maxmin\r\n    // const force = true;   // 由于定义了没有在后面使用，因此注释掉\r\n    for (let i = 0; i < this.config.lines.length; i++) {\r\n      if (this.config.lines[i].extremum === undefined) continue\r\n      if (isEmptyArray(this.config.lines[i].extremum.maxvalue) &&\r\n        isEmptyArray(this.config.lines[i].extremum.minvalue)) continue\r\n      // 只对第一个线和有需要的线计算最大最小值\r\n      // const ds = this.getLineDS(this.config.lines[i]);\r\n      const formula = this.config.lines[i].formula\r\n      if (formula !== undefined) {\r\n        const newdata = this.father.getData(formula.key)\r\n        const range = this.getDataRange(newdata)\r\n        mm = this.calcMaxMin(newdata, this.config.lines[i].extremum,\r\n          range.minIndex, range.maxIndex)\r\n      } else {\r\n        mm = this.calcMaxMin(this.data, this.config.lines[i].extremum,\r\n          this.linkInfo.minIndex, this.linkInfo.maxIndex)\r\n      }\r\n      if (maxmin === undefined) maxmin = mm\r\n      else {\r\n        maxmin.max = maxmin.max > mm.max ? maxmin.max : mm.max\r\n        maxmin.min = maxmin.min < mm.min ? maxmin.min : mm.min\r\n      }\r\n    } // for\r\n    this.maxmin.max = maxmin.max\r\n    this.maxmin.min = maxmin.min\r\n    this.maxmin.unitY = (this.rectChart.height - 2) / (this.maxmin.max - this.maxmin.min) // 一个单位价位多少像素\r\n  }\r\n\r\n  /**\r\n   * handle click event\r\n   * @param {Object} event\r\n   * @memberof ClChartLine\r\n   */\r\n  onClick (event) {\r\n    if (this.axisPlatform !== 'phone1') {\r\n      this.linkInfo.showCursorLine = !this.linkInfo.showCursorLine\r\n      if (this.linkInfo.showCursorLine) {\r\n        this.father.eventLayer.boardEvent(this.father, 'onMouseMove', event)\r\n      } else {\r\n        event.reDraw = true // 需要重画\r\n        this.father.eventLayer.boardEvent(this.father, 'onMouseOut', event)\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * handle long press\r\n   * @param {Object} event\r\n   * @memberof ClChartLine\r\n   */\r\n  onLongPress (event) {\r\n    this.linkInfo.showCursorLine = true\r\n    this.father.eventLayer.boardEvent(this.father, 'onMouseMove', event)\r\n  }\r\n  /**\r\n   * handle pinch\r\n   * @param {Object} event\r\n   * @memberof ClChartLine\r\n   */\r\n  onPinch (event) {\r\n    if (!this.config.zoomInfo) {\r\n      return\r\n    }\r\n    if (event.scale > 0) {\r\n      this.config.zoomInfo.index++\r\n    } else {\r\n      this.config.zoomInfo.index--\r\n    }\r\n    if (this.config.zoomInfo.index < 0) {\r\n      this.config.zoomInfo.index = 0\r\n      return\r\n    }\r\n    // this.setZoomInfo(Math.pow(2, this.config.zoomInfo.index) + 1)\r\n    this.setZoomInfo(this.config.zoomInfo.index * 2 + 1)\r\n    this.father.onPaint()\r\n  }\r\n  /**\r\n   * handle mouse out\r\n   * @param {Object} event\r\n   * @memberof ClChartLine\r\n   */\r\n  onMouseOut (event) {\r\n    if (this.linkInfo.showCursorLine || event.reDraw) {\r\n      this.linkInfo.moveIndex = this.linkInfo.maxIndex\r\n      this.drawTitleInfo(this.linkInfo.moveIndex)\r\n      // this.father.onPaint(this)\r\n    }\r\n    this.childDraws['CURSOR'].onClear()\r\n  }\r\n  /**\r\n   * handle mouse wheel\r\n   * @param {Object} event\r\n   * @memberof ClChartLine\r\n   */\r\n  onMouseWheel (event) {\r\n    if (this.config.zoomInfo === undefined) return\r\n\r\n    let step = Math.floor(event.deltaY / 10)\r\n    if (step === 0) step = event.deltaY > 0 ? 1 : -1\r\n    let newIndex\r\n    if (step > 0) newIndex = this.config.zoomInfo.index - 1\r\n    else newIndex = this.config.zoomInfo.index + 1\r\n    if (newIndex >= 0 && newIndex <= this.config.zoomInfo.list.length - 1) {\r\n      this.config.zoomInfo.index = newIndex\r\n      this.setZoomInfo()\r\n      this.father.onPaint()\r\n    }\r\n  }\r\n  /**\r\n   * handle key down\r\n   * @param {Object} event\r\n   * @memberof ClChartLine\r\n   */\r\n  onKeyDown (event) {\r\n    switch (event.keyCode) {\r\n      case 38: // up\r\n        break\r\n      case 40: // down\r\n        break\r\n      case 37: // left\r\n        break\r\n      case 39: // right\r\n        break\r\n    }\r\n  }\r\n  /**\r\n   * handle mouse move\r\n   * @param {Object} event\r\n   * @memberof ClChartLine\r\n   */\r\n  onMouseMove (event) {\r\n    if (this.linkInfo.hideInfo) return\r\n    if (!this.linkInfo.showCursorLine) return\r\n    // this.draw_clear();\r\n    // 找到X坐标对应的数据索引\r\n    const mousePos = event.mousePos\r\n    // if (this.img !== undefined) {\r\n    //   _putImageData(this.context, this.img, this.rectMain.left, this.rectMain.top)\r\n    // }\r\n\r\n    const mouseIndex = this.getMouseMoveData(mousePos.x)\r\n    let idx, valueY\r\n    let valueX = mouseIndex\r\n    if (mouseIndex > 0) {\r\n      if (this.config.axisX.type === 'day1' || this.config.axisX.type === 'day5') {\r\n        valueX = valueX % 240\r\n        valueX = fromIndexToTradeTime(valueX, this.father.dataLayer.tradeTime, this.father.dataLayer.tradeDate)\r\n        idx = findLabelToIndex(this.data, mouseIndex, 'idx')\r\n      } else {\r\n        valueX = getValue(this.data, 'time', mouseIndex)\r\n        idx = mouseIndex\r\n      }\r\n      if (inRangeX(this.rectChart, mousePos.x)) {\r\n        this.drawTitleInfo(idx)\r\n      }\r\n      if (this.linkInfo.moveIndex !== mouseIndex) {\r\n        this.linkInfo.moveIndex = mouseIndex\r\n        this.callback({\r\n          event: 'mousemove',\r\n          before: mouseIndex > 0 ? getValue(this.data, 'close', mouseIndex - 1) : getValue(this.data, 'open', 0),\r\n          data: this.data.value[mouseIndex]\r\n        })\r\n      }\r\n    }\r\n    this.childDraws['CURSOR'].onPaint(mousePos, valueX, valueY)\r\n  }\r\n  /**\r\n   * get mouse move data\r\n   * @param {Number} xpos\r\n   * @return {Number}\r\n   * @memberof ClChartLine\r\n   */\r\n  getMouseMoveData (xpos) {\r\n    const idx = Math.round((xpos - this.rectChart.left) / (this.linkInfo.unitX + this.linkInfo.spaceX) - 0.5)\r\n    if (this.config.axisX.type === 'day1') {\r\n      return idx\r\n    } else if (this.config.axisX.type === 'day5') {\r\n      return idx\r\n    } else {\r\n      return this.linkInfo.minIndex + idx\r\n    }\r\n  }\r\n\r\n  // /// ClChart end.\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n//   画买卖盘\r\n\r\n// 画买卖盘和Tick\r\n\r\nimport {\r\n  _fillRect,\r\n  _drawRect,\r\n  _drawHline,\r\n  _setLineWidth,\r\n  _drawTxt,\r\n  _getTxtWidth,\r\n  _drawBegin,\r\n  _drawEnd\r\n} from '../util/cl.draw'\r\nimport {\r\n  fromTTimeToStr,\r\n  formatVolume,\r\n  formatPrice,\r\n  updateJsonOfDeep,\r\n  offsetRect\r\n} from '../util/cl.tool'\r\nimport {\r\n  initCommonInfo,\r\n  checkLayout\r\n} from '../chart/cl.chart.init'\r\nimport {\r\n  CHART_LAYOUT,\r\n  CHART_ORDER\r\n} from '../cl.chart.def'\r\nimport getValue from '../data/cl.data.tools'\r\nimport {\r\n  FIELD_NOW,\r\n  FIELD_NOW_IDX,\r\n  FIELD_TICK\r\n} from '../data/../cl.data.def'\r\n\r\n/**\r\n * Class representing ClChartOrder\r\n * @export\r\n * @class ClChartOrder\r\n */\r\nexport default class ClChartOrder {\r\n  /**\r\n\r\n   * Creates an instance of ClChartOrder.\r\n   * @param {Object} father order chart's parent context\r\n   */\r\n  constructor (father) {\r\n    initCommonInfo(this, father)\r\n    this.linkInfo = father.linkInfo\r\n    this.static = this.father.dataLayer.static\r\n  }\r\n  /**\r\n   * init order chart\r\n   * @param {Object} cfg\r\n   * @memberof ClChartOrder\r\n   */\r\n  init (cfg) {\r\n    this.rectMain = cfg.rectMain || { left: 0, top: 0, width: 200, height: 300 }\r\n    this.layout = updateJsonOfDeep(cfg.layout, CHART_LAYOUT)\r\n\r\n    this.config = updateJsonOfDeep(cfg.config, CHART_ORDER)\r\n\r\n    this.style = cfg.config.style || 'normal'\r\n    // 下面对配置做一定的校验\r\n    this.checkConfig()\r\n    // 再做一些初始化运算，下面的运算范围是初始化设置后基本不变的数据\r\n    this.setPublicRect()\r\n  }\r\n  /**\r\n   * check config\r\n   * @memberof ClChartOrder\r\n   */\r\n  checkConfig () { // 检查配置有冲突的修正过来\r\n    checkLayout(this.layout)\r\n    this.txtLen = _getTxtWidth(this.context, '涨', this.layout.digit.font, this.layout.digit.pixel)\r\n    this.timeLen = _getTxtWidth(this.context, '15:30', this.layout.digit.font, this.layout.digit.pixel)\r\n    this.volLen = _getTxtWidth(this.context, '888888', this.layout.digit.font, this.layout.digit.pixel)\r\n    this.closeLen = _getTxtWidth(this.context, '888.88', this.layout.digit.font, this.layout.digit.pixel)\r\n  }\r\n  /**\r\n   * Calculate all rectangular areas\r\n   * @memberof ClChartOrder\r\n   */\r\n  setPublicRect () {\r\n    this.rectChart = offsetRect(this.rectMain, this.layout.margin)\r\n  }\r\n  /**\r\n   * handle click event\r\n   * @memberof ClChartOrder\r\n   */\r\n  onClick (/* e */) {\r\n    if (this.isIndex) return // 如果是指数就啥也不干\r\n    if (this.style === 'normal') {\r\n      this.style = 'tiny'\r\n    } else {\r\n      this.style = 'normal'\r\n    }\r\n    this.father.onPaint(this)\r\n  }\r\n  /**\r\n   * paint order chart\r\n   * @memberof ClChartOrder\r\n   */\r\n  onPaint () {\r\n    this.codeInfo = this.father.getData('INFO')\r\n    this.orderData = this.father.getData('NOW')\r\n    this.tickData = this.father.getData('TICK')\r\n    if (this.orderData === undefined || this.tickData === undefined) return\r\n    this.orderData.coinunit = this.static.coinunit\r\n    this.tickData.coinunit = this.static.coinunit\r\n    this.isIndex = getValue(this.codeInfo, 'type') === 0\r\n\r\n    _setLineWidth(this.context, this.scale)\r\n    this.drawClear() // 清理画图区\r\n    this.drawReady() // 数据准备\r\n\r\n    if (this.isIndex) {\r\n      this.drawIndex()\r\n    } else {\r\n      this.drawOrder()\r\n    }\r\n    this.drawTick()\r\n  }\r\n  /**\r\n   * clear chart\r\n   * @memberof ClChartOrder\r\n   */\r\n  drawClear () {\r\n    _fillRect(this.context, this.rectMain.left, this.rectMain.top, this.rectMain.width, this.rectMain.height, this.color.back)\r\n  }\r\n  /**\r\n   * set ready for draw\r\n   * @memberof ClChartOrder\r\n   */\r\n  drawReady () {\r\n    if (this.tickData === undefined) {\r\n      this.tickData = {\r\n        key: 'TICK',\r\n        fields: FIELD_TICK,\r\n        value: []\r\n      }\r\n    }\r\n    if (this.orderData === undefined) {\r\n      this.orderData = {\r\n        key: 'NOW',\r\n        fields: FIELD_NOW,\r\n        value: []\r\n      }\r\n    }\r\n    let yy\r\n    if (this.style === 'normal') {\r\n      yy = this.rectChart.top + (this.layout.digit.height + this.layout.digit.spaceX) * 10\r\n    } else {\r\n      yy = this.rectChart.top + (this.layout.digit.height + this.layout.digit.spaceX) * 2\r\n    }\r\n    if (this.isIndex) {\r\n      yy = this.rectChart.top + (this.layout.digit.height + this.layout.digit.spaceX) * 4\r\n      this.rectOrder = {\r\n        left: this.rectChart.left,\r\n        top: this.rectChart.top,\r\n        width: this.rectChart.width,\r\n        height: yy\r\n      }\r\n    } else {\r\n      this.rectOrder = {\r\n        left: this.rectChart.left,\r\n        top: this.rectChart.top,\r\n        width: this.rectChart.width,\r\n        height: yy\r\n      }\r\n    }\r\n    if (this.config.title.display !== 'none') {\r\n      this.rectTitle = {\r\n        left: this.rectChart.left,\r\n        top: yy,\r\n        width: this.rectChart.width,\r\n        height: this.layout.title.height\r\n      }\r\n    } else {\r\n      this.rectTitle = {\r\n        left: 0,\r\n        top: 0,\r\n        width: 0,\r\n        height: 0\r\n      }\r\n    }\r\n    yy += this.rectTitle.height\r\n    this.rectTick = {\r\n      left: this.rectChart.left,\r\n      top: yy,\r\n      width: this.rectChart.width,\r\n      height: this.rectChart.height - yy - this.layout.digit.height / 2\r\n    }\r\n  }\r\n  /**\r\n   * get color by close and before data\r\n   * @param {Number} close\r\n   * @param {Number} before\r\n   * @return {String} color\r\n   * @memberof ClChartOrder\r\n   */\r\n  getColor (close, before) {\r\n    if (close > before) {\r\n      return this.color.red\r\n    } else if (close < before) {\r\n      return this.color.green\r\n    } else {\r\n      return this.color.white\r\n    }\r\n  }\r\n  /**\r\n   * draw index\r\n   * @memberof ClChartOrder\r\n   */\r\n  drawIndex () {\r\n    _drawBegin(this.context, this.color.grid)\r\n    _drawRect(this.context, this.rectMain.left, this.rectMain.top, this.rectMain.width, this.rectMain.height)\r\n\r\n    const offy = this.rectOrder.height / 3\r\n    const offx = this.rectOrder.width / 3\r\n    let xx, yy, len\r\n    let value\r\n\r\n    yy = this.rectOrder.top + Math.floor((offy - this.layout.digit.height) / 2) // 画最上面的\r\n\r\n    xx = this.rectOrder.left + (offx - this.txtLen) / 2\r\n    _drawTxt(this.context, xx, yy, '涨', this.layout.digit.font, this.layout.digit.pixel, this.color.txt)\r\n    xx = this.rectOrder.left + offx + (offx - this.txtLen) / 2\r\n    _drawTxt(this.context, xx, yy, '跌', this.layout.digit.font, this.layout.digit.pixel, this.color.txt)\r\n    xx = this.rectOrder.left + 2 * offx + (offx - this.txtLen) / 2\r\n    _drawTxt(this.context, xx, yy, '平', this.layout.digit.font, this.layout.digit.pixel, this.color.txt)\r\n\r\n    const inow = {\r\n      key: 'NOW',\r\n      fields: FIELD_NOW_IDX,\r\n      value: this.orderData.value\r\n    }\r\n    yy = this.rectOrder.top + offy + Math.floor((offy - this.layout.digit.height) / 2) // 画最上面的\r\n    value = formatVolume(getValue(inow, 'ups'), 1)\r\n    len = _getTxtWidth(this.context, value, this.layout.digit.font, this.layout.digit.pixel)\r\n    xx = this.rectOrder.left + (offx - len) / 2\r\n    _drawTxt(this.context, xx, yy, value, this.layout.digit.font, this.layout.digit.pixel, this.color.txt)\r\n\r\n    value = formatVolume(getValue(inow, 'downs'), 1)\r\n    len = _getTxtWidth(this.context, value, this.layout.digit.font, this.layout.digit.pixel)\r\n    xx = this.rectOrder.left + offx + (offx - len) / 2\r\n    _drawTxt(this.context, xx, yy, value, this.layout.digit.font, this.layout.digit.pixel, this.color.txt)\r\n\r\n    value = formatVolume(getValue(inow, 'mids'), 1)\r\n    len = _getTxtWidth(this.context, value, this.layout.digit.font, this.layout.digit.pixel)\r\n    xx = this.rectOrder.left + 2 * offx + (offx - len) / 2\r\n    _drawTxt(this.context, xx, yy, value, this.layout.digit.font, this.layout.digit.pixel, this.color.txt)\r\n\r\n    yy = this.rectOrder.top + 2 * offy + Math.floor((offy - this.layout.digit.height) / 2)\r\n\r\n    value = formatVolume(getValue(inow, 'upvol'), 1)\r\n    len = _getTxtWidth(this.context, value, this.layout.digit.font, this.layout.digit.pixel)\r\n    xx = this.rectOrder.left + (offx - len) / 2\r\n    _drawTxt(this.context, xx, yy, value, this.layout.digit.font, this.layout.digit.pixel, this.color.txt)\r\n\r\n    value = formatVolume(getValue(inow, 'downvol'), 1)\r\n    len = _getTxtWidth(this.context, value, this.layout.digit.font, this.layout.digit.pixel)\r\n    xx = this.rectOrder.left + offx + (offx - len) / 2\r\n    _drawTxt(this.context, xx, yy, value, this.layout.digit.font, this.layout.digit.pixel, this.color.txt)\r\n\r\n    if (this.config.title.display !== 'none') {\r\n      _drawHline(this.context, this.rectTitle.left, this.rectTitle.left + this.rectTitle.width, this.rectTitle.top)\r\n      _drawHline(this.context, this.rectTitle.left, this.rectTitle.left + this.rectTitle.width, this.rectTitle.top + this.rectTitle.height)\r\n      const ticklen = _getTxtWidth(this.context, '分时成交', this.layout.title.font, this.layout.digit.pixel)\r\n      xx = this.rectTitle.left + (this.rectTitle.width - ticklen) / 2\r\n      yy = this.rectTitle.top + 3 * this.scale\r\n      _drawTxt(this.context, xx, yy, '分时成交',\r\n        this.layout.digit.font, this.layout.digit.pixel, this.color.txt)\r\n    }\r\n    _drawEnd(this.context)\r\n  }\r\n  /**\r\n   * draw order\r\n   * @memberof ClChartOrder\r\n   */\r\n  drawOrder () {\r\n    const xpos = this.drawGridLine() // 先画线格\r\n    if (this.orderData === undefined || this.orderData.value.length < 1) {\r\n      return\r\n    }\r\n    const offx = (this.rectOrder.width - xpos - 2 * this.layout.digit.spaceX - this.closeLen - this.volLen) / 2\r\n\r\n    let mmpCount = 1\r\n    if (this.style === 'normal') {\r\n      mmpCount = 5\r\n    }\r\n    const offy = this.rectOrder.height / (mmpCount * 2)\r\n\r\n    let xx, yy\r\n    let value, clr\r\n\r\n    yy = this.rectOrder.top + Math.floor((offy - this.layout.digit.height) / 2) // 画最上面的\r\n    for (let idx = mmpCount; idx >= 1; idx--) {\r\n      xx = this.rectOrder.left + xpos + offx + this.closeLen\r\n      if (!this.linkInfo.hideInfo) {\r\n        value = getValue(this.orderData, 'sell' + idx)\r\n        clr = this.getColor(value, this.static.before)\r\n        _drawTxt(this.context, xx, yy, formatPrice(value, this.static.coinunit),\r\n          this.layout.digit.font, this.layout.digit.pixel, clr, {\r\n            x: 'end'\r\n          })\r\n      }\r\n\r\n      xx += offx + this.volLen + this.layout.digit.spaceX\r\n      value = getValue(this.orderData, 'sellvol' + idx)\r\n      clr = this.color.vol\r\n      _drawTxt(this.context, xx, yy, formatVolume(value, this.static.volzoom),\r\n        this.layout.digit.font, this.layout.digit.pixel, clr, {\r\n          x: 'end'\r\n        })\r\n\r\n      yy += offy\r\n    }\r\n    for (let idx = 1; idx <= mmpCount; idx++) {\r\n      xx = this.rectOrder.left + xpos + offx + this.closeLen\r\n      if (!this.linkInfo.hideInfo) {\r\n        value = getValue(this.orderData, 'buy' + idx)\r\n        clr = this.getColor(value, this.static.before)\r\n        _drawTxt(this.context, xx, yy, formatPrice(value, this.static.coinunit),\r\n          this.layout.digit.font, this.layout.digit.pixel, clr, {\r\n            x: 'end'\r\n          })\r\n      }\r\n      xx += offx + this.volLen + this.layout.digit.spaceX\r\n      value = getValue(this.orderData, 'buyvol' + idx)\r\n      clr = this.color.vol\r\n      _drawTxt(this.context, xx, yy, formatVolume(value, this.static.volzoom),\r\n        this.layout.digit.font, this.layout.digit.pixel, clr, {\r\n          x: 'end'\r\n        })\r\n\r\n      yy += offy\r\n    }\r\n  }\r\n  /**\r\n   * draw tick\r\n   * @memberof ClChartOrder\r\n   */\r\n  drawTick () {\r\n    if (this.tickData === undefined || this.tickData.value.length < 1) return\r\n    const maxlines = Math.floor(this.rectTick.height / this.layout.digit.height) - 1 // 屏幕最大能显示多少条记录\r\n    const recs = this.tickData.value.length\r\n    const beginIndex = recs > maxlines ? recs - maxlines : 0\r\n    const offy = this.rectTick.height / maxlines\r\n\r\n    let xx, yy\r\n    let value, clr\r\n    let offx = (this.rectTick.width - 4 * this.layout.digit.spaceX - this.timeLen - this.closeLen - this.volLen) / 2\r\n    if (this.isIndex) offx = (this.rectTick.width - 3 * this.layout.digit.spaceX - this.timeLen - this.closeLen) / 2\r\n\r\n    yy = this.rectTick.top + 2 + Math.floor((offy - this.layout.digit.pixel) / 2) // 画最上面的\r\n    for (let idx = recs - 1; idx >= beginIndex; idx--) {\r\n      // for (let idx = beginIndex; idx < recs; idx++) {\r\n      xx = this.rectTick.left + this.layout.digit.spaceX + this.timeLen\r\n      value = getValue(this.tickData, 'time', idx)\r\n      clr = this.color.txt\r\n      let str\r\n      if (idx === 0) {\r\n        str = fromTTimeToStr(value, 'minute')\r\n      } else {\r\n        str = fromTTimeToStr(value, 'minute', getValue(this.tickData, 'time', idx - 1))\r\n      }\r\n      _drawTxt(this.context, xx, yy, str,\r\n        this.layout.digit.font, this.layout.digit.pixel, clr, {\r\n          x: 'end'\r\n        })\r\n\r\n      if (this.isIndex) {\r\n        xx = this.rectTick.left + this.rectTick.width - this.layout.digit.spaceX\r\n\r\n        value = getValue(this.tickData, 'close', idx)\r\n        clr = this.getColor(value, this.static.before)\r\n        _drawTxt(this.context, xx, yy, formatPrice(value, this.static.coinunit),\r\n          this.layout.digit.font, this.layout.digit.pixel, clr, {\r\n            x: 'end'\r\n          })\r\n        yy += offy\r\n        continue\r\n      }\r\n      xx += offx + this.closeLen + this.layout.digit.spaceX\r\n\r\n      if (!this.linkInfo.hideInfo) {\r\n        value = getValue(this.tickData, 'close', idx)\r\n        clr = this.getColor(value, this.static.before)\r\n        _drawTxt(this.context, xx, yy, formatPrice(value, this.static.coinunit),\r\n          this.layout.digit.font, this.layout.digit.pixel, clr, {\r\n            x: 'end'\r\n          })\r\n      }\r\n      xx += offx + this.volLen + this.layout.digit.spaceX\r\n\r\n      value = getValue(this.tickData, 'decvol', idx)\r\n      clr = this.color.vol\r\n      _drawTxt(this.context, xx, yy, formatVolume(value, this.static.volzoom),\r\n        this.layout.digit.font, this.layout.digit.pixel, clr, {\r\n          x: 'end'\r\n        })\r\n\r\n      yy += offy\r\n    }\r\n  }\r\n  /**\r\n   * draw grid line\r\n   * @return {Number}\r\n   * @memberof ClChartOrder\r\n   */\r\n  drawGridLine () {\r\n    _drawBegin(this.context, this.color.grid)\r\n    _drawRect(this.context, this.rectMain.left, this.rectMain.top, this.rectMain.width, this.rectMain.height)\r\n\r\n    let mmpCount = 1\r\n    if (this.style === 'normal') {\r\n      mmpCount = 5\r\n    }\r\n    let len = 0\r\n    _drawHline(this.context, this.rectOrder.left, this.rectOrder.left + this.rectOrder.width, this.rectOrder.top + Math.floor(this.rectOrder.height / 2))\r\n\r\n    let xx, yy, value\r\n    const strint = ['①', '②', '③', '④', '⑤']\r\n    const offy = this.rectOrder.height / (mmpCount * 2)\r\n\r\n    len = _getTxtWidth(this.context, '卖①', this.layout.title.font, this.layout.digit.height)\r\n    yy = this.rectOrder.top + Math.floor((offy - this.layout.digit.pixel) / 2) // 画最上面的\r\n    for (let idx = mmpCount - 1; idx >= 0; idx--) {\r\n      xx = this.rectOrder.left + this.layout.digit.spaceX\r\n      value = '卖' + strint[idx]\r\n      _drawTxt(this.context, xx, yy, value,\r\n        this.layout.digit.font, this.layout.digit.pixel, this.color.txt)\r\n      yy += offy\r\n    }\r\n    for (let idx = 0; idx < mmpCount; idx++) {\r\n      xx = this.rectOrder.left + this.layout.digit.spaceX\r\n      value = '买' + strint[idx]\r\n      _drawTxt(this.context, xx, yy, value,\r\n        this.layout.digit.font, this.layout.digit.pixel, this.color.txt)\r\n      yy += offy\r\n    }\r\n    if (this.config.title.display !== 'none') {\r\n      _drawHline(this.context, this.rectTitle.left, this.rectTitle.left + this.rectTitle.width, this.rectTitle.top)\r\n      _drawHline(this.context, this.rectTitle.left, this.rectTitle.left + this.rectTitle.width, this.rectTitle.top + this.rectTitle.height)\r\n      if (this.style === 'normal') {\r\n        value = '分时成交 △'\r\n      } else {\r\n        value = '分时成交 ▽'\r\n      }\r\n      const ticklen = _getTxtWidth(this.context, value, this.layout.title.font, this.layout.digit.pixel)\r\n      xx = this.rectTitle.left + (this.rectTitle.width - ticklen) / 2\r\n      yy = this.rectTitle.top + 3 * this.scale\r\n      _drawTxt(this.context, xx, yy, value,\r\n        this.layout.digit.font, this.layout.digit.pixel, this.color.txt)\r\n    }\r\n    _drawEnd(this.context)\r\n    return len\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n// Following is the entity definition of ClChart\r\n// generally only use this class to implement the function\r\n// A ClChart class is just a drawing of the chart belonging to the dispatch framework, mouse and keyboard events, and does not store data\r\n// When multiple maps are linked, the subgraphs are all here to get relevant information.\r\n\r\nimport {\r\n  copyJsonOfDeep\r\n} from '../util/cl.tool'\r\nimport ClChartLine from './cl.chart.line'\r\nimport ClChartOrder from './cl.chart.order'\r\nimport { setColor, setStandard } from '../chart/cl.chart.init'\r\n\r\nconst DEFAULT_LINKINFO = {\r\n  showMode: 'last',\r\n  // 'last' Targeted by the latest data, maxIndex=-1 shows the latest data\r\n  // 'move' Set this parameter when the move occurs, -- may not be required\r\n  // 'fixed' Fixed display of a certain range of time-shared charts and 5-day lines.\r\n  // 'locked' Specify a record in the middle\r\n  fixed: { // 对应fixed模式\r\n    min: -1, // 最小记录, 为-1表示最小记录加上left\r\n    max: -1, // 最大记录, 为-1表式最大记录减去right\r\n    left: 20,\r\n    right: 20\r\n  },\r\n  locked: { // 只有当showMode==‘locked’模式才有作用\r\n    index: -1, // 当前锁定的记录号，\r\n    set: 0.5 // 表示锁定在中间，1表示锁定在最后一条记录，当前记录的百分比\r\n  },\r\n  minIndex: -1, // 当前画面的起始记录号 -1 表示第一次\r\n  maxIndex: -1, // 当前画面的最大记录号 -1 表示第一次\r\n  hotIndex: -1, // 循环时需要定位当前数据的指针定位\r\n  showCursorLine: false, // 是否显示光标信息\r\n  moveIndex: -1, // 当前鼠标所在位置的记录号 -1 表示没有鼠标事件或第一次\r\n  spaceX: 2, // 每个数据的间隔像素，可以根据实际情况变化，但不能系统参数里设定的spaceX小\r\n  unitX: 5, // 每天数据的宽度 默认为5， 可以在1..50之间切换\r\n  rightMode: 'no', // 除权模式\r\n  hideInfo: false // 是否显示价格\r\n}\r\n/**\r\n * Class representing ClChart\r\n * @export\r\n * @class ClChart\r\n */\r\nexport default class ClChart {\r\n  /**\r\n\r\n   * Creates an instance of ClChart.\r\n   * @param {Object} syscfg\r\n   */\r\n  constructor (syscfg) {\r\n    this.context = syscfg.mainCanvas.context\r\n    this.cursorCanvas = syscfg.cursorCanvas\r\n    this.sysColor = syscfg.sysColor\r\n    // Use this to determine if it is the root element\r\n    this.father = undefined\r\n  }\r\n  /**\r\n   * Re-initialize Chart to clean up all charts and data\r\n   * @param {any} dataLayer data layer\r\n   * @param {any} eventLayer event layer\r\n   * @memberof ClChart\r\n   */\r\n  initChart (dataLayer, eventLayer) {\r\n    // linkInfo 是所有子chart公用的参数集合，也是dataLayer应用的集合\r\n    this.linkInfo = copyJsonOfDeep(DEFAULT_LINKINFO)\r\n    // this.checkConfig();\r\n    // 初始化子chart为空\r\n    this.childCharts = {}\r\n    // 设置数据层，同时对外提供设置接口\r\n    this.setDataLayer(dataLayer)\r\n    // 设置事件层，同时对外提供设置接口\r\n    this.setEventLayer(eventLayer)\r\n  }\r\n  /**\r\n   * clear current data and recharge linkinfo\r\n   *\r\n   * @memberof ClChart\r\n   */\r\n  clear () {\r\n    this.childCharts = {}\r\n    this.fastDraw = false\r\n    this.dataLayer.clearData()\r\n    // this.eventLayer.clear();\r\n    this.linkInfo = copyJsonOfDeep(DEFAULT_LINKINFO)\r\n  }\r\n  /**\r\n   * get child chart by key\r\n   * @param {String} key child chart key\r\n   * @return {Object} child chart\r\n   * @memberof ClChart\r\n   */\r\n  getChart (key) {\r\n    return this.childCharts[key]\r\n  }\r\n\r\n  // 以下是设置chart的事件关联接口，element表示映射的chart类\r\n  // 所有事件由外部获取事件后传递到eventLayer后，再统一分发给相应的图表\r\n  // eventLayer中有针对html5的鼠标键盘事件处理接口，其他事件处理接口另外再做\r\n\r\n  /**\r\n   * get event layer\r\n   * @return {Object} event layer\r\n   * @memberof ClChart\r\n   */\r\n  getEventLayer () {\r\n    return this.eventLayer\r\n  }\r\n  setEventLayer (layer) {\r\n    if (layer === undefined) return\r\n    this.eventLayer = layer\r\n    this.eventLayer.bindChart && this.eventLayer.bindChart(this) // 把chart绑定到事件处理层\r\n  }\r\n  // bindEvent (chart) {\r\n  //   this.eventLayer.bindEvent(chart);\r\n  // }\r\n\r\n  /**\r\n   * get data layer\r\n   * @return {Object} data layer\r\n   * @memberof ClChart\r\n   */\r\n  getDataLayer () {\r\n    return this.dataLayer\r\n  }\r\n  /**\r\n   * set data layer\r\n   * @param {Object} layer\r\n   * @memberof ClChart\r\n   */\r\n  setDataLayer (layer) {\r\n    if (layer === undefined) return\r\n    this.dataLayer = layer\r\n    layer.father = this\r\n    this.static = this.dataLayer.static\r\n  }\r\n  /**\r\n   * Set the corresponding basic data key of the chart\r\n   * @param {Object} chart\r\n   * @param {String} key\r\n   * @memberof ClChart\r\n   */\r\n  bindData (chart, key) {\r\n    if (chart.hotKey !== key) {\r\n      this.linkInfo.showMode = 'last' // 切换数据后需要重新画图\r\n      this.linkInfo.minIndex = -1\r\n      chart.hotKey = key // hotKey 针对chart的数据都调用该数据源\r\n      this.fastDrawEnd() // 热点数据改变，就重新计算\r\n    }\r\n  }\r\n  /**\r\n   * init data\r\n   * @param {Number} tradeDate trade date\r\n   * @param {Number} tradetime  trade time\r\n   * @memberof ClChart\r\n   */\r\n  initData (tradeDate, tradetime) {\r\n    this.dataLayer.initData(tradeDate, tradetime)\r\n  }\r\n  /**\r\n   * set data\r\n   * @param {String} key data key\r\n   * @param {Object} fields data field definition\r\n   * @param {any} value\r\n   * @memberof ClChart\r\n   */\r\n  setData (key, fields, value) {\r\n    let info = value\r\n    if (typeof value === 'string') info = JSON.parse(value)\r\n    this.dataLayer.setData(key, fields, info)\r\n    this.fastDrawEnd() // 新的数据被设置，就重新计算\r\n  }\r\n  /**\r\n   * get data from datalayer by key\r\n   * @param {String} key\r\n   * @return {Array}\r\n   * @memberof ClChart\r\n   */\r\n  getData (key) {\r\n    if (this.fastDraw) {\r\n      if (this.fastBuffer[key] !== undefined) {\r\n        return this.fastBuffer[key]\r\n      }\r\n    }\r\n    const out = this.dataLayer.getData(key, this.linkInfo.rightMode)\r\n    if (this.fastDraw) {\r\n      this.fastBuffer[key] = out\r\n    }\r\n    return out\r\n  }\r\n  /**\r\n   * init line data\r\n   * @param {Array} data\r\n   * @param {Array} lines\r\n   * @memberof ClChart\r\n   */\r\n  readyData (data, lines) {\r\n    for (let k = 0; k < lines.length; k++) {\r\n      if (lines[k].formula === undefined) continue\r\n      if (!this.fastDraw || (this.fastDraw && this.fastBuffer[lines[k].formula.key] === undefined)) {\r\n        this.dataLayer.makeLineData(\r\n          { data, minIndex: this.linkInfo.minIndex, maxIndex: this.linkInfo.maxIndex },\r\n          lines[k].formula.key,\r\n          lines[k].formula.command\r\n        )\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * create chart\r\n   * @param {String} name name is a unique name, the same name will override the previous class with the same name\r\n   * @param {String} className class name\r\n   * @param {Object} usercfg user custom config\r\n   * @param {Function} callback callback\r\n   * @return {Object} chart instance\r\n   * @memberof ClChart\r\n   */\r\n  createChart (name, className, usercfg, callback) {\r\n    let chart\r\n    switch (className) {\r\n      case 'CHART.ORDER': chart = new ClChartOrder(this); break\r\n      case 'CHART.LINE': chart = new ClChartLine(this); break\r\n      default : chart = new ClChartLine(this); break\r\n    }\r\n\r\n    chart.name = name\r\n    this.childCharts[name] = chart\r\n\r\n    // this.bindEvent(chart);\r\n    chart.init(usercfg, callback) // 根据用户配置初始化信息框\r\n\r\n    return chart\r\n  }\r\n\r\n  /**\r\n   * draw all the layers contained in this area\r\n   * @param {Object} chart\r\n   * @memberof ClChart\r\n   */\r\n  onPaint (chart) {\r\n    if (typeof this.context._beforePaint === 'function') {\r\n      this.context._beforePaint()\r\n    }\r\n    this.fastDrawBegin()\r\n\r\n    for (const key in this.childCharts) {\r\n      if (chart !== undefined) {\r\n        if (this.childCharts[key] === chart) {\r\n          this.childCharts[key].onPaint()\r\n        }\r\n      } else {\r\n        this.childCharts[key].onPaint()\r\n      }\r\n    }\r\n    // this.fastDrawEnd();\r\n    if (typeof this.context._afterPaint === 'function') {\r\n      this.context._afterPaint()\r\n    }\r\n  }\r\n  /**\r\n   * Used for the same group of multi-graph only take data once, this can speed up the display, the program structure will not be chaotic\r\n   * @memberof ClChart\r\n   */\r\n  fastDrawBegin () {\r\n    if (!this.fastDraw) {\r\n      this.fastBuffer = []\r\n      this.fastDraw = true\r\n    }\r\n  }\r\n  /**\r\n   * set whether to turn on quick drawing\r\n   * @memberof ClChart\r\n   */\r\n  fastDrawEnd () {\r\n    this.fastDraw = false\r\n  }\r\n\r\n  /**\r\n   * Set whether to hide the information bar\r\n   * @param {String} isHideInfo\r\n   * @memberof ClChart\r\n   */\r\n  setHideInfo (isHideInfo) {\r\n    if (isHideInfo === undefined) return\r\n    if (isHideInfo !== this.linkInfo.hideInfo) {\r\n      this.linkInfo.hideInfo = isHideInfo\r\n      this.onPaint()\r\n    }\r\n  }\r\n  /**\r\n   * Set the background color\r\n   * @param {String} sysColor\r\n   * @param {Object | null} chart\r\n   * @memberof ClChart\r\n   */\r\n  setColor (sysColor, chart) {\r\n    this.color = setColor(sysColor)\r\n    if (chart === undefined) chart = this\r\n    for (const key in chart.childCharts) {\r\n      chart.childCharts[key].color = this.color\r\n      this.setColor(sysColor, chart.childCharts[key])\r\n    }\r\n    // 需要将其子配置的颜色也一起改掉\r\n    for (const key in chart.childDraws) {\r\n      chart.childDraws[key].color = this.color\r\n      this.setColor(sysColor, chart.childDraws[key])\r\n    }\r\n    for (const key in chart.childLines) {\r\n      chart.childLines[key].color = this.color\r\n      this.setColor(sysColor, chart.childLines[key])\r\n    }\r\n    this.sysColor = sysColor\r\n  }\r\n  /**\r\n   * setting drafting standards\r\n   * @param {String} standard\r\n   * @memberof ClChart\r\n   */\r\n  setStandard (standard) {\r\n    setStandard(standard)\r\n    this.setColor(this.sysColor)\r\n    this.onPaint()\r\n  }\r\n  // this.makeLineData = function(data, key, formula, punit) {\r\n  //   return this.dataLayer.makeLineData(data, key, this.linkInfo.minIndex, this.linkInfo.maxIndex, formula);\r\n  // }\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n/*\r\n  The canvas needs to have two methods\r\n  eventCanvas: {\r\n    addEventListener: () => {},\r\n    removeEventListener: () => {}\r\n  }\r\n*/\r\n\r\n/*\r\n  // Event object required attributes\r\n  event: {\r\n    touches: [\r\n      pageX: 0,\r\n      pageY: 0,\r\n      offsetX: 0,\r\n      offsetY: 0,\r\n    ],\r\n    changedTouches: [],\r\n    target: {\r\n      getBoundingClientRect: () => {}\r\n    },\r\n    preventDefault: () => {}\r\n  }\r\n*/\r\n\r\n/**\r\n * Get distance\r\n * @param {Number} xLen\r\n * @param {Number} yLen\r\n * @return {Number}\r\n */\r\nfunction _getDistance (xLen, yLen) {\r\n  return Math.sqrt(xLen * xLen + yLen * yLen)\r\n}\r\n/**\r\n * Get the rotation direction of the vector\r\n */\r\nfunction _getRotateDirection (vector1, vector2) {\r\n  return vector1.x * vector2.y - vector2.x * vector1.y\r\n}\r\n\r\nfunction _getRotateAngle (vector1, vector2) {\r\n  let direction = _getRotateDirection(vector1, vector2)\r\n  direction = direction > 0 ? -1 : 1\r\n  const len1 = _getDistance(vector1.x, vector1.y)\r\n  const len2 = _getDistance(vector2.x, vector2.y)\r\n  const mr = len1 * len2\r\n  if (mr === 0) return 0\r\n  const dot = vector1.x * vector2.x + vector1.y * vector2.y\r\n  let r = dot / mr\r\n  if (r > 1) r = 1\r\n  if (r < -1) r = -1\r\n  return Math.acos(r) * direction * 180 / Math.PI\r\n}\r\n\r\nfunction _getTouchInfo (point, element) {\r\n  const mouseInfo = {\r\n    name: 'touch'\r\n  }\r\n  if (point.offsetX && point.offsetX === 0) {\r\n    mouseInfo.offsetX = point.offsetX\r\n    mouseInfo.offsetY = point.offsetY\r\n  } else {\r\n    let srcRect = {\r\n      left: 0,\r\n      top: 0\r\n    }\r\n    if (element && typeof element.getBoundingClientRect === 'function') srcRect = element.getBoundingClientRect()\r\n    mouseInfo.offsetX = point.pageX - srcRect.left\r\n    mouseInfo.offsetY = point.pageY - srcRect.top\r\n  }\r\n  return mouseInfo\r\n}\r\n\r\nfunction _getEventInfo (event) {\r\n  return {\r\n    offsetX: event.offsetX,\r\n    offsetY: event.offsetY\r\n  }\r\n}\r\n\r\n/**\r\n * Class representing ClEventHandler\r\n * @export\r\n * @class ClEventHandler\r\n */\r\nexport default class ClEventHandler {\r\n  /**\r\n   * Creates an instance of ClEventHandler.\r\n   * @param {Object} {\r\n   * father,\r\n   * eventBuild,\r\n   * isTouch\r\n   * }\r\n   * @constructor\r\n   */\r\n  constructor ({father, eventBuild, isTouch}) {\r\n    this.father = father\r\n    this.eventCanvas = father.eventCanvas\r\n    if (typeof eventBuild === 'function') {\r\n      this.eventBuild = eventBuild\r\n    } else {\r\n      this.eventBuild = (e) => e\r\n    }\r\n    // Determine whether touch event is supported\r\n    this.isTouch = !!isTouch\r\n\r\n    // Remove long press popup button\r\n    this.eventCanvas.addEventListener && this.eventCanvas.addEventListener('contextmenu', e => {\r\n      e.preventDefault()\r\n    })\r\n  }\r\n  /**\r\n   * bind evnet\r\n   * @memberof ClEventHandler\r\n   */\r\n  bindEvent () {\r\n    if (this.isTouch) {\r\n      this.addHandler('touchstart', this.touchstart.bind(this))\r\n      this.addHandler('touchend', this.touchend.bind(this))\r\n      this.addHandler('touchmove', this.touchmove.bind(this))\r\n    } else {\r\n      this.addHandler('mousemove', this.mousemove.bind(this))\r\n      // this.addHandler('mousein', this.mousein.bind(this));\r\n      this.addHandler('mouseout', this.mouseout.bind(this))\r\n      this.addHandler('mousewheel', this.mousewheel.bind(this))\r\n      this.addHandler('mouseup', this.mouseup.bind(this))\r\n      this.addHandler('mousedown', this.mousedown.bind(this))\r\n      this.addHandler('keyup', this.keyup.bind(this))\r\n      this.addHandler('keydown', this.keydown.bind(this))\r\n\r\n      this.addHandler('click', this.click.bind(this))\r\n    }\r\n  }\r\n  /**\r\n   * clear event listener\r\n   * @memberof ClEventHandler\r\n   */\r\n  clearEvent () {\r\n    if (this.isTouch) {\r\n      this.clearHandler('touchstart', this.touchstart.bind(this))\r\n      this.clearHandler('touchend', this.touchend.bind(this))\r\n      this.clearHandler('touchmove', this.touchmove.bind(this))\r\n    } else {\r\n      this.clearHandler('mousemove', this.mousemove.bind(this))\r\n      // this.clearHandler('mousein', this.mousein.bind(this));\r\n      this.clearHandler('mouseout', this.mouseout.bind(this))\r\n      this.clearHandler('mousewheel', this.mousewheel.bind(this))\r\n      this.clearHandler('mouseup', this.mouseup.bind(this))\r\n      this.clearHandler('mousedown', this.mousedown.bind(this))\r\n      this.clearHandler('keyup', this.keyup.bind(this))\r\n      this.clearHandler('keydown', this.keydown.bind(this))\r\n\r\n      this.clearHandler('click', this.click.bind(this))\r\n    }\r\n  }\r\n  /**\r\n   * add handle for events\r\n   * @param {String} eventName\r\n   * @param {Function} handler\r\n   * @memberof ClEventHandler\r\n   */\r\n  addHandler (eventName, handler) {\r\n    if (this.eventCanvas.addEventListener) {\r\n      this.eventCanvas.addEventListener(eventName, handler, false)\r\n    } else if (this.eventCanvas.attachEvent) {\r\n      this.eventCanvas.attachEvent('on' + eventName, handler)\r\n    } else {\r\n      this.eventCanvas['on' + eventName] = handler\r\n    }\r\n  }\r\n  /**\r\n   * Clean up all binding events\r\n   * @param {String} eventName\r\n   * @param {Function} handler\r\n   * @memberof ClEventHandler\r\n   */\r\n  clearHandler (eventName, handler) {\r\n    if (this.eventCanvas.removeEventListener) {\r\n      this.eventCanvas.removeEventListener(eventName, handler, false)\r\n    } else if (this.eventCanvas.deattachEvent) {\r\n      this.eventCanvas.deattachEvent('on' + eventName, handler)\r\n    } else {\r\n      this.eventCanvas['on' + eventName] = null\r\n    }\r\n  }\r\n  // The following is an event handler\r\n  /**\r\n   * mouse move\r\n   * @param {Object} event\r\n   * @memberof ClEventHandler\r\n   */\r\n  mousemove (event) {\r\n    this.father.emitEvent('onMouseMove', _getEventInfo(event))\r\n  }\r\n  /**\r\n   * mouse in\r\n   * @param {Object} event\r\n   * @memberof ClEventHandler\r\n   */\r\n  mousein (event) {\r\n    this.father.emitEvent('onMouseIn', _getEventInfo(event))\r\n  }\r\n  /**\r\n   * mouse out\r\n   * @param {Object} event\r\n   * @memberof ClEventHandler\r\n   */\r\n  mouseout (event) {\r\n    this.father.emitEvent('onMouseOut', _getEventInfo(event))\r\n  }\r\n  /**\r\n   * mouse whell\r\n   * @param {Object} event\r\n   * @memberof ClEventHandler\r\n   */\r\n  mousewheel (event) {\r\n    const info = _getEventInfo(event)\r\n    info.deltaY = event.deltaY\r\n    this.father.emitEvent('onMouseWheel', info)\r\n  }\r\n  /**\r\n   * mouse up\r\n   * @param {Object} event\r\n   * @memberof ClEventHandler\r\n   */\r\n  mouseup (event) {\r\n    this.father.emitEvent('onMouseUp', _getEventInfo(event))\r\n  }\r\n  /**\r\n   * mouse down\r\n   * @param {Object} event\r\n   * @memberof ClEventHandler\r\n   */\r\n  mousedown (event) {\r\n    this.father.emitEvent('onMouseDown', _getEventInfo(event))\r\n  }\r\n  // keyboard event\r\n  /**\r\n   * key up\r\n   * @param {Object} event\r\n   * @memberof ClEventHandler\r\n   */\r\n  keyup (event) {\r\n    const info = _getEventInfo(event)\r\n    info.keyCode = event.keyCode\r\n    this.father.emitEvent('onKeyUp', info)\r\n  }\r\n  /**\r\n   * key down\r\n   * @param {Object} event\r\n   * @memberof ClEventHandler\r\n   */\r\n  keydown (event) {\r\n    const info = _getEventInfo(event)\r\n    info.keyCode = event.keyCode\r\n    this.father.emitEvent('onKeyDown', info)\r\n  }\r\n  /**\r\n   * click event\r\n   * @param {Object} event\r\n   * @memberof ClEventHandler\r\n   */\r\n  click (event) {\r\n    this.father.emitEvent('onClick', _getEventInfo(event))\r\n  }\r\n  /**\r\n   * touchstart\r\n   * @param {Object} e\r\n   * @memberof ClEventHandler\r\n   */\r\n  touchstart (e) {\r\n    const event = this.eventBuild(e)\r\n    this.__timestamp = new Date()\r\n    const point = event.touches ? event.touches[0] : event\r\n    this.startX = point.pageX\r\n    this.startY = point.pageY\r\n    clearTimeout(this.longTapTimeout)\r\n    this.startTime = Date.now()\r\n    // Two-point touch\r\n    if (event.touches.length > 1) {\r\n      const point2 = event.touches[1]\r\n      const xLen = Math.abs(point2.pageX - this.startX)\r\n      const yLen = Math.abs(point2.pageY - this.startY)\r\n      this.touchDistance = _getDistance(xLen, yLen)\r\n      this.touchVector = {\r\n        x: point2.pageX - this.startX,\r\n        y: point2.pageY - this.startY\r\n      }\r\n    } else {\r\n      this.longTapTimeout = setTimeout(() => {\r\n        this.father.emitEvent('onLongPress', _getTouchInfo(point, event.target))\r\n      }, 600)\r\n      if (this.previousTouchPoint) {\r\n        if (Math.abs(this.startX - this.previousTouchPoint.startX) < 10 &&\r\n          Math.abs(this.startY - this.previousTouchPoint.startY) < 10 &&\r\n          Math.abs(this.startTime - this.previousTouchTime) < 300) {\r\n          this.father.emitEvent('onDoubleClick', _getTouchInfo(point, event.target))\r\n        }\r\n      }\r\n      this.previousTouchTime = this.startTime\r\n      this.previousTouchPoint = {\r\n        startX: this.startX,\r\n        startY: this.startY\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * touchend\r\n   * @param {Object} e\r\n   * @memberof ClEventHandler\r\n   */\r\n  touchend (e) {\r\n    const event = this.eventBuild(e)\r\n    clearTimeout(this.longTapTimeout)\r\n    const point = event.changedTouches ? event.changedTouches[0] : event\r\n    const timestamp = Date.now()\r\n    if ((this.moveX !== null && Math.abs(this.moveX - this.startX) > 10) ||\r\n      (this.moveY !== null && Math.abs(this.moveY - this.startY) > 10)) {\r\n      if (timestamp - this.startTime < 500) {\r\n        this.father.emitEvent('onSwipe', _getTouchInfo(point, event.target))\r\n      }\r\n    } else if (timestamp - this.startTime < 2000) {\r\n      if (timestamp - this.startTime < 500) {\r\n        this.father.emitEvent('onClick', _getTouchInfo(point, event.target))\r\n      }\r\n      if (timestamp - this.startTime > 500) {\r\n        this.father.emitEvent('onLongPress', _getTouchInfo(point, event.target))\r\n      }\r\n    }\r\n    this.startX = this.startY = this.moveX = this.moveY = null\r\n    this.previousPinchScale = 1\r\n    this.father.emitEvent('onMouseOut', _getTouchInfo(point, event.target))\r\n  }\r\n  /**\r\n   * touchmove\r\n   * @param {Object} e\r\n   * @memberof ClEventHandler\r\n   */\r\n  touchmove (e) {\r\n    const event = this.eventBuild(e)\r\n    if (new Date() - this.__timestamp < 150) {\r\n      return event\r\n    }\r\n    const timestamp = Date.now()\r\n    if (event.touches.length > 1) {\r\n      const xLen = Math.abs(event.touches[0].pageX - event.touches[1].pageX)\r\n      const yLen = Math.abs(event.touches[0].pageY - event.touches[1].pageY)\r\n      const touchDistance = _getDistance(xLen, yLen)\r\n      // Calculate scaling events\r\n      if (this.touchDistance) {\r\n        const pinchScale = touchDistance / this.touchDistance\r\n        const point = event.touches ? event.touches[0] : event\r\n        // this._emitEvent('onPinch', { scale: pinchScale - this.previousPinchScale }); // 缩放\r\n        const mouseinfo = _getTouchInfo(point, event.target)\r\n        if ((timestamp - this.startTime) > 90 && this.previousPinchScale) {\r\n          mouseinfo.scale = pinchScale - this.previousPinchScale\r\n          if (Math.abs(mouseinfo.scale) > 0.01) {\r\n            this.father.emitEvent('onPinch', mouseinfo)\r\n          }\r\n          this.startTime = Date.now()\r\n        }\r\n        this.previousPinchScale = pinchScale\r\n      }\r\n      // Calculating rotation events\r\n      if (this.touchVector) {\r\n        const vector = {\r\n          x: event.touches[1].pageX - event.touches[0].pageX,\r\n          y: event.touches[1].pageY - event.touches[0].pageY\r\n        }\r\n        const angle = _getRotateAngle(vector, this.touchVector)\r\n        // this._emitEvent('onRotate', {\r\n        //   angle\r\n        // })\r\n        this.father.emitEvent('onRotate', {\r\n          angle\r\n        })\r\n        this.touchVector.x = vector.x\r\n        this.touchVector.y = vector.y\r\n      }\r\n    } else {\r\n      clearTimeout(this.longTapTimeout)\r\n      const point = event.touches ? event.touches[0] : event\r\n      const deltaX = this.moveX === null ? 0 : point.pageX - this.moveX\r\n      const deltaY = this.moveY === null ? 0 : point.pageY - this.moveY\r\n      // this._emitEvent('onMove', { deltaX, deltaY });\r\n      const config = _getTouchInfo(point, event.target)\r\n      config.deltaX = deltaX\r\n      config.deltaY = deltaY\r\n      this.father.emitEvent('onMouseMove', config)\r\n      this.moveX = point.pageX\r\n      this.moveY = point.pageY\r\n    }\r\n    if (typeof event.preventDefault === 'function') event.preventDefault()\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n// 定义事件监听接口\r\n\r\n// 鼠标事件\r\n//  onMouseMove // 移动\r\n//  onMouseIn  // 进入\r\n//  monMouseOut // 离开\r\n//  onMousewheel // 滚动\r\n//  onMouseUp  //\r\n//  onMouseDown //\r\n// 键盘事件\r\n//  onKeyUp\r\n//  onKeyDown\r\n// 触摸事件\r\n//  onTouchStart // 触摸开始\r\n//  onTouchEnd   // 触摸结束\r\n//  onTouchMove  // 触摸移动\r\n// 其他事件\r\n//  onClick // 点击\r\n//  onLongPress // 长按\r\n//  onPinch // 两指放大或缩小\r\n//  onRotate // 旋转\r\n//  onSwipe //左滑或右滑\r\nimport {\r\n  copyJsonOfDeep,\r\n  inRect\r\n} from '../util/cl.tool'\r\nimport ClEventHandler from './cl.event.handler'\r\n\r\nexport const EVENT_DEFINE = [\r\n  'onMouseMove',\r\n  // 'onMouseIn',\r\n  'onMouseOut',\r\n  'onMousewheel',\r\n  'onMouseUp',\r\n  'onMouseDown',\r\n  'onKeyUp',\r\n  'onKeyDown',\r\n  'onClick',\r\n  'onDoubleClick',\r\n  'onLongPress',\r\n  'onPinch',\r\n  'onRotate',\r\n  'onSwipe'\r\n]\r\n\r\nexport function buildMinaTouchEvent (e) {\r\n  const eventObj = {}\r\n  if (e && Array.isArray(e.touches)) {\r\n    eventObj.touches = []\r\n    for (let i = 0; i < e.touches.length; i++) {\r\n      const point = e.touches[i]\r\n      eventObj.touches.push({\r\n        pageX: point.x,\r\n        pageY: point.y,\r\n        offsetX: point.x,\r\n        offsetY: point.y\r\n      })\r\n    }\r\n  }\r\n  if (e && Array.isArray(e.changedTouches)) {\r\n    eventObj.changedTouches = []\r\n    for (let i = 0; i < e.changedTouches.length; i++) {\r\n      const point = e.changedTouches[i]\r\n      eventObj.changedTouches.push({\r\n        pageX: point.x,\r\n        pageY: point.y,\r\n        offsetX: point.x,\r\n        offsetY: point.y\r\n      })\r\n    }\r\n  }\r\n  return eventObj\r\n}\r\n\r\n/**\r\n * Class representing ClEvent\r\n * @export\r\n * @class ClEvent\r\n */\r\nexport default class ClEvent {\r\n  /**\r\n   * Creates an instance of ClEvent.\r\n   * @param {Object} syscfg\r\n   * @constructor\r\n   */\r\n  constructor (syscfg) {\r\n    // this.eventCanvas = syscfg.mainCanvas.canvas // 对web来说就是虚拟接收事件的canvas\r\n    this.eventCanvas = syscfg.cursorCanvas.canvas\r\n    this.eventPlatform = syscfg.eventPlatform || 'web'\r\n    this.scale = syscfg.scale\r\n\r\n    const eventCfg = {\r\n      father: this\r\n    }\r\n    if (this.eventPlatform === 'react-native') {\r\n      eventCfg.isTouch = true\r\n    } else if (this.eventPlatform === 'web') {\r\n      eventCfg.isTouch = 'ontouchend' in document\r\n    } else if (this.eventPlatform === 'mina') {\r\n      eventCfg.isTouch = true\r\n      eventCfg.eventBuild = buildMinaTouchEvent\r\n    }\r\n    this.eventSource = new ClEventHandler(eventCfg)\r\n    this.eventSource.bindEvent()\r\n  }\r\n  // 只需要绑定一个原始ClChart就可以了，子图的事件通过childCharts来判断获取\r\n  // 每个chart如果自己定义了对应事件就会分发，未定义不分发，分发后以返回值判断是否继续传递到下一个符合条件的chart\r\n  /**\r\n   * bind event\r\n   * @param {Object} source\r\n   * @memberof ClEvent\r\n   */\r\n  bindChart (source) {\r\n    this.firstChart = source\r\n    this.HotWin = undefined\r\n  }\r\n  /**\r\n   * clear event\r\n   * @memberof ClEvent\r\n   */\r\n  clearEvent () {\r\n    this.eventSource.clearEvent()\r\n  }\r\n  // 下面是接收事件后,根据热点位置来判断归属于哪一个chart,并分发事件;\r\n  // config 必须包含鼠标位置 {offsetX:offsetY:}\r\n  /**\r\n   * emit event\r\n   * @param {String} eventName\r\n   * @param {Object} config\r\n   * @memberof ClEvent\r\n   */\r\n  emitEvent (eventName, config) {\r\n    // .....这里需要特殊分解处理Out的事件\r\n    if (eventName === 'onMouseOut' || eventName === 'onMouseMove') {\r\n      this.boardEvent(this.firstChart, eventName, config)\r\n      this.HotWin = undefined\r\n      return\r\n    }\r\n    const mousePos = this.getMousePos(config)\r\n    const chartPath = []\r\n    for (const name in this.firstChart.childCharts) {\r\n      // 判断鼠标在哪个区域\r\n      if (inRect(this.firstChart.childCharts[name].rectMain, mousePos)) {\r\n        // 取得事件冒泡顺序\r\n        this.findEventPath(chartPath, this.firstChart.childCharts[name], mousePos)\r\n        // 只处理符合条件的一个区域，重叠区域不考虑\r\n        break\r\n      }\r\n    }\r\n    if (chartPath.length < 1) return\r\n    // 继承最初始的传入参数,从最顶层开始处理\r\n    const event = copyJsonOfDeep(config)\r\n    for (let k = chartPath.length - 1; k >= 0; k--) {\r\n      if (chartPath[k][eventName] !== undefined) {\r\n        // 这里生成一个相对鼠标位置\r\n        event.mousePos = {\r\n          // x: mousePos.x - chartPath[k].rectMain.left,\r\n          // y: mousePos.y - chartPath[k].rectMain.top\r\n          x: mousePos.x,\r\n          y: mousePos.y\r\n        }\r\n        // 执行事件函数\r\n        chartPath[k][eventName](event)\r\n        if (event.break) break // 跳出循环\r\n      }\r\n    }\r\n  }\r\n  // 用于鼠标联动时，向childCharts同一级别画图区域广播事件\r\n  //\r\n  /**\r\n   * board event\r\n   * @param {Object} chart\r\n   * @param {String} eventName\r\n   * @param {Object} config\r\n   * @param {Object} ignore\r\n   * @memberof ClEvent\r\n   */\r\n  boardEvent (chart, eventName, config, ignore) {\r\n    const event = copyJsonOfDeep(config)\r\n    const mousePos = this.getMousePos(config)\r\n\r\n    for (const name in chart.childCharts) {\r\n      if (chart.childCharts[name] === ignore) continue\r\n      if (chart.childCharts[name][eventName] === undefined) continue\r\n\r\n      event.mousePos = {\r\n        // x: mousePos.x - chart.childCharts[name].rectMain.left,\r\n        // y: mousePos.y - chart.childCharts[name].rectMain.top\r\n        x: mousePos.x,\r\n        y: mousePos.y\r\n      }\r\n      chart.childCharts[name][eventName](event)\r\n      if (event.break) break\r\n    }\r\n  }\r\n  /**\r\n   * find event path\r\n   * @param {Array} path\r\n   * @param {Object} chart\r\n   * @param {Object} mousePos\r\n   * @memberof ClEvent\r\n   */\r\n  findEventPath (path, chart, mousePos) {\r\n    path.push(chart)\r\n    if (chart.childCharts === undefined) return\r\n\r\n    for (const name in chart.childCharts) {\r\n      if (inRect(chart.childCharts[name].rectMain, mousePos)) {\r\n        this.findEventPath(path, chart.childCharts[name], mousePos)\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * get mouse position info\r\n   * @param {Object} event\r\n   * @return {Object} mouse position info\r\n   * @memberof ClEvent\r\n   */\r\n  getMousePos (event) {\r\n    const mouseX = event.offsetX * this.scale\r\n    const mouseY = event.offsetY * this.scale\r\n    return {\r\n      x: mouseX,\r\n      y: mouseY\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n// 以下是ClData的实体定义\r\n// 一般只用操作这个类就可以获取单个股票的所有数据\r\n// 不支持多个股票的数据，对于列表来说，这里只保存ID列表，其他的数据由实际画图自行获取，\r\n\r\nimport {\r\n  fromTradeTimeToIndex,\r\n  fromIndexToTradeTime,\r\n  checkZero,\r\n  getSize,\r\n  checkDayZero,\r\n  checkDay5,\r\n  updateStatic,\r\n  findDateInDay,\r\n  findIndexInMin,\r\n  matchDayToWeek,\r\n  matchDayToMon,\r\n  getMinuteCount,\r\n  transExrightMin,\r\n  transExrightDay\r\n} from './cl.data.tools'\r\nimport {\r\n  FIELD_INFO,\r\n  FIELD_DAY,\r\n  FIELD_MIN,\r\n  FIELD_TICK,\r\n  FIELD_DAY5,\r\n  FIELD_NOW,\r\n  FIELD_ILINE,\r\n  FIELD_ENOW\r\n} from '../cl.data.def'\r\nimport {\r\n  getDate,\r\n  isEmptyArray,\r\n  copyArrayOfDeep\r\n} from '../util/cl.tool'\r\nimport {\r\n  ClFormula\r\n} from '../formula/cl.formula'\r\n// 只保存一只股票的信息，当前日期，开收市时间\r\n\r\n/**\r\n * Class representing ClData\r\n * data layer\r\n * @export\r\n * @class ClData\r\n */\r\nexport default class ClData {\r\n  /**\r\n   * Creates an instance of ClData.\r\n\r\n   */\r\n  constructor () {\r\n    // this.formula = new ClFormula();\r\n    this.static = {\r\n      stktype: 1,\r\n      volunit: 100,\r\n      coinunit: 100,\r\n      decimal: 2,\r\n      before: 1000,\r\n      stophigh: 1100,\r\n      stoplow: 900\r\n    }\r\n  }\r\n\r\n  // 只保存一只股票的信息，当前日期，开收市时间\r\n  /**\r\n   * init data\r\n   * @param {Number} tradeDate\r\n   * @param {Number} tradetime\r\n   * @memberof ClData\r\n   */\r\n  initData (tradeDate, tradetime) {\r\n    this.formula = new ClFormula()\r\n    this.clearData()\r\n    if (tradetime === undefined) {\r\n      this.tradeTime = [{\r\n        begin: 930,\r\n        end: 1130\r\n      },\r\n      {\r\n        begin: 1300,\r\n        end: 1500\r\n      }\r\n      ]\r\n    } else {\r\n      this.tradeTime = tradetime\r\n    }\r\n\r\n    if (tradeDate === undefined) {\r\n      this.tradeDate = getDate() // 得到当天的日期\r\n    } else {\r\n      this.tradeDate = tradeDate // 最近一个交易日期，并不一定等于今天的日期，比如节假日期间\r\n    }\r\n  }\r\n  // 包含一个股票所有的数据,以便于以后做公式系统也使用这个数据定义\r\n  /**\r\n   * clear data\r\n   * @memberof ClData\r\n   */\r\n  clearData () {\r\n    this.InData = [] // 数据 json格式数据 {key:..,fields:.., value:[[],[]...]}\r\n    this.OutData = [] // 专门用于获取数据时临时产生的数据\r\n  }\r\n  // 下面是设置数据的方法\r\n  /**\r\n   * set data\r\n   * @param {String} key\r\n   * @param {Object} fields\r\n   * @param {Array} value\r\n   * @memberof ClData\r\n   */\r\n  setData (key, fields, value) {\r\n    if (value === undefined) value = []\r\n    if (this.InData[key] === undefined) this.InData[key] = {}\r\n    switch (key) {\r\n      case 'DAY5':\r\n        value = checkDay5(value, this.static.coinzoom, this.tradeDate, this.tradeTime)\r\n        break\r\n      case 'NOW':\r\n      case 'ENOW':\r\n        this.flushNowData(key, value)\r\n        break\r\n      case 'MIN':\r\n      case 'DAY':\r\n        value = checkDayZero(value, this.tradeDate)\r\n        break\r\n      case 'INFO':\r\n        this.static = updateStatic(FIELD_INFO, value)\r\n        break\r\n    }\r\n    // // 设置了CODE或者INFO后，把一些常用的数取出来放到static中\r\n    // 仅仅接收以上和 MIN5 RIGHT 等原始数据，周月年和其他周期分钟线，全部通过计算获取\r\n    this.InData[key] = {\r\n      key,\r\n      fields\r\n    }\r\n    this.InData[key].value = copyArrayOfDeep(value)\r\n  }\r\n  /**\r\n   * flush tick\r\n   * @param {Array} nowdata\r\n   * @param {Array} fields\r\n   * @memberof ClData\r\n   */\r\n  flushTick (nowdata, fields) {\r\n    // if (this.static.stktype == 0) return ;\r\n    if (getSize(this.InData['TICK']) < 1) {\r\n      if (nowdata[fields.vol] > 0) {\r\n        this.InData['TICK'] = {\r\n          key: 'TICK',\r\n          fields: FIELD_TICK,\r\n          value: [nowdata[fields.time], nowdata[fields.close], nowdata[fields.vol]]\r\n        }\r\n      }\r\n    } else {\r\n      if (this.InData['TICK'].value[this.InData['TICK'].value.length - 1][FIELD_TICK.vol] < nowdata[fields.vol] ||\r\n        this.InData['TICK'].value[this.InData['TICK'].value.length - 1][FIELD_TICK.close] !== nowdata[fields.close]) {\r\n        // 成交量变化才生成tick,或收盘价不一样\r\n        this.InData['TICK'].value.push([nowdata[fields.time], nowdata[fields.close], nowdata[fields.vol]])\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * flush min data\r\n   * @param {Array} nowdata\r\n   * @param {Array} fields\r\n   * @memberof ClData\r\n   */\r\n  flushMin (nowdata, fields) {\r\n    if (this.InData['MIN'] === undefined) {\r\n      this.InData['MIN'] = {\r\n        key: 'MIN',\r\n        fields: FIELD_MIN,\r\n        value: [\r\n          fromTradeTimeToIndex(nowdata[fields.time], this.tradeTime),\r\n          nowdata[fields.open],\r\n          nowdata[fields.high],\r\n          nowdata[fields.low],\r\n          nowdata[fields.close],\r\n          nowdata[fields.vol],\r\n          nowdata[fields.money]\r\n        ]\r\n      }\r\n    } else {\r\n      const index = fromTradeTimeToIndex(nowdata[fields.time], this.tradeTime)\r\n      const checked = findIndexInMin(this.InData['MIN'], index)\r\n      if (checked.status === 'old') {\r\n        if (this.InData['MIN'].value[checked.index][fields.high] < nowdata[fields.close]) {\r\n          this.InData['MIN'].value[checked.index][fields.high] = nowdata[fields.close]\r\n        }\r\n        if (this.InData['MIN'].value[checked.index][fields.low] > nowdata[fields.close]) {\r\n          this.InData['MIN'].value[checked.index][fields.low] = nowdata[fields.close]\r\n        }\r\n        this.InData['MIN'].value[checked.index][fields.close] = nowdata[fields.close]\r\n        this.InData['MIN'].value[checked.index][fields.vol] = nowdata[fields.vol]\r\n        this.InData['MIN'].value[checked.index][fields.money] = nowdata[fields.money]\r\n      } else if (checked.status === 'new') {\r\n        this.InData['MIN'].value.push([index, nowdata[fields.close], nowdata[fields.close],\r\n          nowdata[fields.close], nowdata[fields.close], nowdata[fields.vol], nowdata[fields.money]\r\n        ])\r\n      }\r\n    }\r\n  }\r\n  // 当有新的NOW进来时，需要对TICK和当日MIN线进行更新，\r\n  /**\r\n   * flush now data\r\n   * @param {String} key\r\n   * @param {Array} nowdata\r\n   * @memberof ClData\r\n   */\r\n  flushNowData (key, nowdata) {\r\n    if (nowdata.length < 1) return\r\n    let fields = FIELD_NOW\r\n    if (key === 'ENOW') fields = FIELD_ENOW\r\n    if (checkZero(nowdata, fields)) return\r\n\r\n    // 先处理TICK\r\n    this.flushTick(nowdata, fields)\r\n\r\n    // 再处理Min\r\n    this.flushMin(nowdata, fields)\r\n  }\r\n\r\n  // 下面是获取数据的方法,先从OutData获取，没有数据就从InData数据中获取\r\n\r\n  /**\r\n   * get data\r\n   * @param {String} key\r\n   * @param {String} rightMode\r\n   * @return {Array}\r\n   * @memberof ClData\r\n   */\r\n  getData (key, rightMode) {\r\n    switch (key) {\r\n      case 'DAY':\r\n        this.OutData['DAY'] = {\r\n          key,\r\n          fields: FIELD_DAY\r\n        }\r\n        this.OutData['DAY'].value = this.mergeDay(this.InData['DAY'], this.InData['NOW'], rightMode)\r\n        // 对原始数据不做变更\r\n        break\r\n      case 'WEEK':\r\n        this.OutData['WEEK'] = {\r\n          key,\r\n          fields: FIELD_DAY\r\n        }\r\n        this.OutData['WEEK'].value = this.mergeWeek(this.InData['DAY'], this.InData['NOW'], rightMode)\r\n        // 每次都从日线计算生成 -- 避免除权数据无法正确显示的错误\r\n        break\r\n      case 'MON':\r\n        this.OutData['MON'] = {\r\n          key,\r\n          fields: FIELD_DAY\r\n        }\r\n        this.OutData['MON'].value = this.mergeMon(this.InData['DAY'], this.InData['NOW'], rightMode)\r\n        // 每次都从日线计算生成 -- 避免除权数据无法正确显示的错误\r\n        break\r\n      case 'DAY5':\r\n        this.OutData['DAY5'] = {\r\n          key,\r\n          fields: FIELD_DAY5\r\n        }\r\n        this.OutData['DAY5'].value = this.mergeDay5(this.InData['DAY5'], this.InData['MIN'])\r\n        // 每次都从日线计算生成\r\n        break\r\n      case 'M5':\r\n      case 'M15':\r\n      case 'M30':\r\n      case 'M60':\r\n        this.OutData[key] = {\r\n          key,\r\n          fields: FIELD_DAY\r\n        }\r\n        this.OutData[key].value = this.makeMinute(key, this.InData[key], this.InData['MIN'], rightMode)\r\n        break\r\n      case 'MIN':\r\n        this.OutData[key] = {\r\n          key,\r\n          fields: FIELD_MIN\r\n        }\r\n        this.OutData[key].value = this.updateMinute(this.InData[key])\r\n        break\r\n    }\r\n    // 先找Out中的数据，没有就找In的数据\r\n    return this.OutData[key] ? this.OutData[key] : this.InData[key]\r\n  }\r\n  /**\r\n   * update minute\r\n   * @param {Object} source\r\n   * @return {Array}\r\n   * @memberof ClData\r\n   */\r\n  updateMinute (source) {\r\n    let out = copyArrayOfDeep(source.value)\r\n\r\n    let allmoney\r\n    for (let k = 0; k < out.length; k++) {\r\n      if (this.static.stktype === 0) {\r\n        if (k === 0) {\r\n          allmoney = out[k][FIELD_MIN.vol] * out[k][FIELD_MIN.close]\r\n        } else {\r\n          allmoney += (out[k][FIELD_MIN.vol] - out[k - 1][FIELD_MIN.vol]) * out[k][FIELD_MIN.close]\r\n        }\r\n        out[k][FIELD_MIN.allmoney] = allmoney\r\n      } else {\r\n        // value[k][fields.allmoney] = value[k][fields.money];\r\n      }\r\n    }\r\n    return out\r\n  }\r\n  /**\r\n   * merge day\r\n   * @param {Object} source\r\n   * @param {Array} now\r\n   * @param {String} rightMode\r\n   * @return {Array}\r\n   * @memberof ClData\r\n   */\r\n  mergeDay (source, now, rightMode) {\r\n    let out = copyArrayOfDeep(source.value)\r\n    if (now !== undefined && !checkZero(now.value, now.fields)) {\r\n      const checked = findDateInDay(source, getDate(now.value[now.fields.time]))\r\n      if (checked.finded) {\r\n        out[checked.index] = [\r\n          getDate(now.value[now.fields.time]),\r\n          now.value[now.fields.open],\r\n          now.value[now.fields.high],\r\n          now.value[now.fields.low],\r\n          now.value[now.fields.close],\r\n          now.value[now.fields.vol],\r\n          now.value[now.fields.money]\r\n        ]\r\n      } else {\r\n        out.push([\r\n          getDate(now.value[now.fields.time]),\r\n          now.value[now.fields.open],\r\n          now.value[now.fields.high],\r\n          now.value[now.fields.low],\r\n          now.value[now.fields.close],\r\n          now.value[now.fields.vol],\r\n          now.value[now.fields.money]\r\n        ])\r\n      }\r\n    }\r\n    if (this.InData['RIGHT'] && rightMode !== 'none') {\r\n      out = transExrightDay(out, this.InData['RIGHT'].value, rightMode,\r\n        0, out.length - 1)\r\n    }\r\n    // this.config.start,this.config.stop);\r\n\r\n    return out\r\n  }\r\n  /**\r\n   * merge week data\r\n   * @param {Object} source\r\n   * @param {Array} now\r\n   * @param {String} rightmode\r\n   * @return {Array}\r\n   * @memberof ClData\r\n   */\r\n  mergeWeek (source, now, rightmode) {\r\n    const out = this.mergeDay(source, now, rightmode)\r\n    return matchDayToWeek(out)\r\n    // 合并周线\r\n  }\r\n  /**\r\n   * merge month data\r\n   * @param {Object} source\r\n   * @param {Array} now\r\n   * @param {String} rightmode\r\n   * @return {Array}\r\n   * @memberof ClData\r\n   */\r\n  mergeMon (source, now, rightmode) {\r\n    const out = this.mergeDay(source, now, rightmode)\r\n    return matchDayToMon(out)\r\n    // 合并月线\r\n  }\r\n  /**\r\n   * merge 5 day data\r\n   * @param {Object} source\r\n   * @param {Array} min\r\n   * @return {Array}\r\n   * @memberof ClData\r\n   */\r\n  mergeDay5 (source, min) {\r\n    let out = []\r\n\r\n    if (source !== undefined && !isEmptyArray(source.value)) {\r\n      out = copyArrayOfDeep(source.value)\r\n      const lastDate = getDate(source.value[source.value.length - 1][source.fields.time])\r\n      if (lastDate === this.tradeDate) {\r\n        return out\r\n      }\r\n    }\r\n    if (min === undefined || isEmptyArray(min.value)) {\r\n      return out\r\n    }\r\n    const daymins = getMinuteCount(this.tradeTime) * 4\r\n    let money\r\n    for (let k = 0; k < min.value.length; k++) {\r\n      if (this.static.stktype === 0) {\r\n        if (k === 0) {\r\n          money = min.value[k][min.fields.vol] * min.value[k][min.fields.close]\r\n        } else {\r\n          money += (min.value[k][min.fields.vol] - min.value[k - 1][min.fields.vol]) * min.value[k][min.fields.close]\r\n        }\r\n      } else {\r\n        money = min.value[k][min.fields.money]\r\n      }\r\n      out.push([\r\n        fromIndexToTradeTime(min.value[k][min.fields.idx], this.tradeTime, this.tradeDate),\r\n        min.value[k][min.fields.close],\r\n        k === 0 ? min.value[k][min.fields.vol] : min.value[k][min.fields.vol] - min.value[k - 1][min.fields.vol],\r\n        daymins + min.value[k][min.fields.idx],\r\n        min.value[k][min.fields.vol],\r\n        money\r\n      ])\r\n    }\r\n    return out\r\n  }\r\n  // source历史分钟线 nowmin当日分钟线\r\n  /**\r\n   * make minute data\r\n   * @param {String} outkey\r\n   * @param {Object} source\r\n   * @param {Array} nowmin\r\n   * @param {String} rightMode\r\n   * @return {Array}\r\n   * @memberof ClData\r\n   */\r\n  makeMinute (outkey, source, nowmin, rightMode) {\r\n    let out = []\r\n    if (source !== undefined && !isEmptyArray(source.value)) {\r\n      out = copyArrayOfDeep(source.value)\r\n      out = transExrightMin(out, this.static.coinzoom, this.InData['RIGHT'].value, rightMode,\r\n        // this.config.start,this.config.stop);\r\n        0, out.length - 1)\r\n\r\n      const lastDate = getDate(source.value[source.value.length - 1][source.fields.time])\r\n      if (lastDate === this.tradeDate) {\r\n        // 已经是最新的数据了\r\n        return out\r\n      }\r\n    }\r\n    // 没有原始数据或者未收市，需要把当日的nowmin合并\r\n    if (nowmin !== undefined && !isEmptyArray(nowmin.value)) {\r\n      let offset = 5\r\n      if (outkey === 'M15') offset = 15\r\n      if (outkey === 'M30') offset = 30\r\n      if (outkey === 'M60') offset = 60\r\n      out = this.mergeNowMinToMin(out, nowmin, offset) // 当日的分钟线转成分钟线，索引转时间的问题\r\n    }\r\n    // out = matchMinToMinute(out, outkey);\r\n    return out\r\n  }\r\n  /**\r\n   * merge now's min data to min data\r\n   * @param {Object} source\r\n   * @param {Array} min\r\n   * @param {Number} offset\r\n   * @return {Array}\r\n   * @memberof ClData\r\n   */\r\n  mergeNowMinToMin (source, min, offset) {\r\n    const curMin = []\r\n    let sumVol = 0\r\n    let sumMoney = 0\r\n\r\n    let hasData = false\r\n    let stopIdx = 4\r\n\r\n    for (let k = 0; k < min.value.length; k++) {\r\n      const curIndex = min.value[k][min.fields.idx]\r\n      if (curIndex < 0) continue\r\n      if (curIndex > stopIdx) {\r\n        if (hasData) {\r\n          curMin[min.fields.vol] = min.value[k][min.fields.vol] - sumVol\r\n          curMin[min.fields.money] = min.value[k][min.fields.money] - sumMoney\r\n          sumVol = min.value[k][min.fields.vol]\r\n          sumMoney = min.value[k][min.fields.money]\r\n\r\n          curMin[min.fields.time] = fromIndexToTradeTime(stopIdx, this.tradeTime, this.tradeDate)\r\n          source.push(copyArrayOfDeep(curMin))\r\n        }\r\n        stopIdx = (Math.floor(curIndex / offset) + 1) * offset - 1\r\n        curMin[min.fields.open] = min.value[k][min.fields.open]\r\n        curMin[min.fields.high] = min.value[k][min.fields.high]\r\n        curMin[min.fields.low] = min.value[k][min.fields.low]\r\n        curMin[min.fields.close] = min.value[k][min.fields.close]\r\n        hasData = true\r\n      } else { // curIndex 在0-5之间\r\n        if (hasData) {\r\n          curMin[min.fields.high] = curMin[min.fields.high] > min.value[k][min.fields.high]\r\n            ? curMin[min.fields.high] : min.value[k][min.fields.high]\r\n          curMin[min.fields.low] = curMin[min.fields.low] < min.value[k][min.fields.low] ||\r\n            min.value[k][min.fields.low] === 0\r\n            ? curMin[min.fields.low] : min.value[k][min.fields.low]\r\n          curMin[min.fields.close] = min.value[k][min.fields.close]\r\n        } else {\r\n          curMin[min.fields.open] = min.value[k][min.fields.open]\r\n          curMin[min.fields.high] = min.value[k][min.fields.high]\r\n          curMin[min.fields.low] = min.value[k][min.fields.low]\r\n          curMin[min.fields.close] = min.value[k][min.fields.close]\r\n          hasData = true\r\n        }\r\n      }\r\n    } // for i\r\n    if (hasData) {\r\n      curMin[min.fields.vol] = min.value[min.value.length - 1][min.fields.vol] - sumVol\r\n      curMin[min.fields.money] = min.value[min.value.length - 1][min.fields.money] - sumMoney\r\n      curMin[min.fields.time] = fromIndexToTradeTime(stopIdx, this.tradeTime, this.tradeDate)\r\n      source.push(copyArrayOfDeep(curMin))\r\n    }\r\n    return source\r\n  }\r\n\r\n  //  以下为公式系统，自由计算的定义\r\n\r\n  /**\r\n   * make lien data\r\n   * @param {Object} source\r\n   * @param {String} outkey\r\n   * @param {String} formula\r\n   * @return {Array}\r\n   * @memberof ClData\r\n   */\r\n  makeLineData (source, outkey, formula) {\r\n    const value = this.formula.runSingleStock(source, formula)\r\n    if (this.OutData[outkey] === undefined) {\r\n      this.OutData[outkey] = {\r\n        outkey,\r\n        fields: FIELD_ILINE,\r\n        value\r\n      }\r\n    } else {\r\n      this.OutData[outkey].value = value\r\n      // 返回的值都是真实的值，不用再除单位了，具体显示几个小数点，由坐标的类别来定，\r\n    }\r\n    return this.OutData[outkey]\r\n  }\r\n} // end.\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n// 以下是 ClDrawSeer 的实体定义\r\n\r\n// case 1: return '未生效';\r\n// case 2: return '股票停牌';\r\n// case 20: return '股东增持';\r\n// case 100: return '已生效(1 -> 100)';\r\n// case 101: return '已成功(100 -> 101)';\r\n// case 102: return '已失败(100 -> 102)';\r\n// case 200: return '未成功已结束(100 -> 200)';\r\n// case 201: return '成功已结束(101 -> 201)';\r\n// case 202: return '失败已结束(102 -> 202)';\r\n// case 300: return '未生效已结束(1/2 -> 300)';\r\n// case 400: return '错误';\r\n\r\nimport {\r\n  _drawSignCircle,\r\n  _setTransColor,\r\n  _fillRect,\r\n  _drawSignHLine,\r\n  _drawSignVLine\r\n} from '../util/cl.draw'\r\nimport {\r\n  findNearTimeToIndex\r\n} from '../chart/cl.chart.tools'\r\nimport getValue, {\r\n  // getZipDay,\r\n  getExrightPriceRange\r\n} from '../data/cl.data.tools'\r\nimport {\r\n  initCommonInfo\r\n} from '../chart/cl.chart.init'\r\nimport {\r\n  inArray,\r\n  inRangeY,\r\n  intersectArray,\r\n  // copyArrayOfDeep,\r\n  formatPrice,\r\n  copyArrayOfDeep\r\n} from '../util/cl.tool'\r\nimport {\r\n  FIELD_DAY\r\n} from '../cl.data.def'\r\n\r\n// 预测信息定义\r\nexport const FIELD_SEER = {\r\n  // code: 0,\r\n  start: 1, // 开始日期\r\n  period: 2, // 预期周期\r\n  buy: 3, // 买入价\r\n  target: 4, // 目标价\r\n  stoploss: 5, // 止损价\r\n  status: 6, // 当前状态\r\n  // stopdate: 7, // 停止日期 正在进行的为0\r\n  // highdate: 8,  // 最高价格日期\r\n  // lowdate: 9,    // 最低价格日期\r\n  // surplus: 10, // 剩余天数\r\n  uid: 11, // 预测的id\r\n  focused: 12 // 是否热点\r\n}\r\n\r\nexport const FIELD_SEER_HOT = {\r\n  uid: 0\r\n}\r\n\r\n// 创建时必须带入父类，后面的运算定位都会基于父节点进行；\r\n// 这个类仅仅是画图, 因此需要把可以控制的rect传入进来\r\n/**\r\n * Class representing ClDrawSeer\r\n * @export\r\n * @class ClDrawSeer\r\n */\r\nexport default class ClDrawSeer {\r\n  /**\r\n   * Creates an instance of ClDrawSeer.\r\n   * @param {Object} father\r\n   * @param {Object} rectMain\r\n   * @constructor\r\n   */\r\n  constructor (father, rectMain) {\r\n    initCommonInfo(this, father)\r\n    this.rectMain = rectMain\r\n\r\n    this.linkInfo = father.father.linkInfo\r\n\r\n    this.source = father.father\r\n\r\n    this.static = father.father.static\r\n\r\n    this.maxmin = father.maxmin\r\n    this.layout = father.layout\r\n  }\r\n\r\n  /**\r\n   * get seer position\r\n   * @param {Number} index\r\n   * @param {Number} nowprice\r\n   * @return {Object}\r\n   * @memberof ClDrawSeer\r\n   */\r\n  getSeerPos (index, nowprice) {\r\n    const offset = index - this.linkInfo.minIndex\r\n    if (offset < 0 || index > this.linkInfo.maxIndex) {\r\n      return {\r\n        visible: false\r\n      }\r\n    }\r\n    // 不在视线内就不画\r\n    const xx = this.rectMain.left + offset * (this.linkInfo.unitX + this.linkInfo.spaceX) + Math.floor(this.linkInfo.unitX / 2)\r\n    let price = nowprice\r\n    if (nowprice === undefined) {\r\n      price = getValue(this.data, 'close', index)\r\n    }\r\n    const yy = this.rectMain.top + Math.round((this.maxmin.max - price) * this.maxmin.unitY)\r\n    return {\r\n      visible: true,\r\n      xx,\r\n      yy\r\n    }\r\n  }\r\n  /**\r\n   * draw hot seer\r\n   * @param {Number} no\r\n   * @memberof ClDrawSeer\r\n   */\r\n  drawHotSeer (no) {\r\n    let idx = findNearTimeToIndex(this.data, getValue(this.sourceSeer, 'start', no), 'time', 'forword')\r\n    if (idx === -1) idx = this.linkInfo.maxIndex\r\n    const offset = idx - this.linkInfo.minIndex\r\n    if (offset < 0) return // 不在视线内就不画\r\n\r\n    const xx = this.rectMain.left + offset * (this.linkInfo.unitX + this.linkInfo.spaceX) + Math.floor(this.linkInfo.unitX / 2)\r\n\r\n    const status = getValue(this.sourceSeer, 'status', no)\r\n    const startPrice = getValue(this.sourceSeer, 'buy', no)\r\n    let price = startPrice\r\n\r\n    let yy = this.rectMain.top + Math.round((this.maxmin.max - price) * this.maxmin.unitY)\r\n\r\n    let startTxt = this.linkInfo.hideInfo ? '买点' : '买点:' + formatPrice(price, this.static.coinunit)\r\n    if (startPrice === 0) {\r\n      startTxt = '停牌中' // 停牌期间预测的股票\r\n      price = getValue(this.data, 'close', idx)\r\n      yy = this.rectMain.top + Math.round((this.maxmin.max - price) * this.maxmin.unitY)\r\n    }\r\n    let color = this.color.vol\r\n    if (inArray(status, [1, 20, 300])) {\r\n      color = this.color.txt\r\n    } else if (inArray(status, [2])) {\r\n      startTxt = '停牌中'\r\n    }\r\n    _drawSignHLine(this.context, {\r\n      linew: this.scale,\r\n      xx,\r\n      yy,\r\n      right: this.rectMain.left + this.rectMain.width + this.layout.offset.right - 2 * this.scale,\r\n      clr: color,\r\n      bakclr: this.color.back,\r\n      font: this.layout.title.font,\r\n      pixel: this.layout.title.pixel,\r\n      spaceX: 4 * this.scale,\r\n      spaceY: 3 * this.scale,\r\n      x: 'start',\r\n      y: 'middle'\r\n    }, [{\r\n      txt: startTxt,\r\n      set: 100,\r\n      display: !this.linkInfo.hideInfo\r\n    }])\r\n\r\n    const period = getValue(this.sourceSeer, 'period', no)\r\n    const surplus = period - (this.linkInfo.maxIndex - idx)\r\n\r\n    let txt = ' 周期:[' + period + '天]'\r\n    if (surplus > 0) txt += ' 剩余:[' + surplus + '天]'\r\n\r\n    _drawSignVLine(this.context, {\r\n      linew: this.scale,\r\n      xx,\r\n      yy,\r\n      left: this.rectMain.left,\r\n      bottom: this.rectMain.top + this.rectMain.height + this.layout.offset.bottom + 2 * this.scale,\r\n      clr: color,\r\n      bakclr: this.color.back,\r\n      font: this.layout.title.font,\r\n      pixel: this.layout.title.pixel,\r\n      spaceX: 2 * this.scale,\r\n      paceY: 2 * this.scale\r\n    }, [{\r\n      txt: 'arc',\r\n      set: 0,\r\n      minR: 0,\r\n      maxR: 3 * this.scale,\r\n      display: true\r\n    },\r\n    {\r\n      txt: getValue(this.sourceSeer, 'start', no) + txt,\r\n      set: 100,\r\n      display: true\r\n    }\r\n    ])\r\n    this.drawTransRect(this.rectMain.left, xx)\r\n    const xxRight = xx + period * (this.linkInfo.spaceX + this.linkInfo.unitX)\r\n    this.drawTransRect(xxRight, this.rectMain.left + this.rectMain.width)\r\n    if (startPrice === 0) return\r\n\r\n    let infos\r\n    price = getValue(this.sourceSeer, 'stoploss', no)\r\n    let yl = this.rectMain.top + Math.round((this.maxmin.max - price) * this.maxmin.unitY)\r\n    if (yl - yy > 1.5 * this.layout.title.pixel) {\r\n      infos = [{\r\n        txt: 'arc',\r\n        set: 0,\r\n        minR: 0,\r\n        maxR: 2 * this.scale,\r\n        display: true\r\n      },\r\n      {\r\n        txt: this.linkInfo.hideInfo ? '止损' : '止损:' + formatPrice(price, this.static.coinunit),\r\n        set: 100,\r\n        display: !this.linkInfo.hideInfo\r\n      }\r\n      ]\r\n    } else {\r\n      infos = [{\r\n        txt: 'arc',\r\n        set: 0,\r\n        minR: 0,\r\n        maxR: 2 * this.scale,\r\n        display: true\r\n      },\r\n      {\r\n        txt: 'arc',\r\n        set: 100,\r\n        minR: 0,\r\n        maxR: 1 * this.scale,\r\n        display: true\r\n      }\r\n      ]\r\n    }\r\n    if (inRangeY(this.rectMain, yy)) {\r\n      _drawSignHLine(this.context, {\r\n        linew: this.scale,\r\n        xx,\r\n        yy: yl,\r\n        right: this.rectMain.left + this.rectMain.width + this.layout.offset.right - 2 * this.scale,\r\n        clr: this.color.green,\r\n        bakclr: this.color.back,\r\n        font: this.layout.title.font,\r\n        pixel: this.layout.title.pixel,\r\n        spaceX: 4 * this.scale,\r\n        spaceY: 3 * this.scale,\r\n        x: 'start',\r\n        y: 'middle'\r\n      }, infos)\r\n    }\r\n\r\n    price = getValue(this.sourceSeer, 'target', no)\r\n    yl = this.rectMain.top + Math.round((this.maxmin.max - price) * this.maxmin.unitY)\r\n    if (yy - yl > 1.5 * this.layout.title.pixel) {\r\n      infos = [{\r\n        txt: 'arc',\r\n        set: 0,\r\n        minR: 0,\r\n        maxR: 2 * this.scale,\r\n        display: true\r\n      },\r\n      {\r\n        txt: this.linkInfo.hideInfo ? '目标' : '目标:' + formatPrice(price, this.static.coinunit),\r\n        set: 100,\r\n        display: !this.linkInfo.hideInfo\r\n      }\r\n      ]\r\n    } else {\r\n      infos = [{\r\n        txt: 'arc',\r\n        set: 0,\r\n        minR: 0,\r\n        maxR: 2 * this.scale,\r\n        display: true\r\n      },\r\n      {\r\n        txt: 'arc',\r\n        set: 100,\r\n        minR: 0,\r\n        maxR: 2 * this.scale,\r\n        display: true\r\n      }\r\n      ]\r\n    }\r\n    if (inRangeY(this.rectMain, yy)) {\r\n      _drawSignHLine(this.context, {\r\n        linew: this.scale,\r\n        xx,\r\n        yy: yl,\r\n        right: this.rectMain.left + this.rectMain.width + this.layout.offset.right - 2 * this.scale,\r\n        clr: this.color.red,\r\n        bakclr: this.color.back,\r\n        font: this.layout.title.font,\r\n        pixel: this.layout.title.pixel,\r\n        spaceX: 4 * this.scale,\r\n        spaceY: 3 * this.scale,\r\n        x: 'start',\r\n        y: 'middle'\r\n      }, infos)\r\n    }\r\n\r\n    const stop = getValue(this.sourceSeer, 'stop', no)\r\n    // 100 进行中\r\n    if (inArray(status, [101, 102, 200, 201, 202, 300])) {\r\n      const stopIdx = findNearTimeToIndex(this.data, stop, 'time', 'forword')\r\n      const stopOffset = stopIdx - this.linkInfo.minIndex\r\n      const stopX = this.rectMain.left + stopOffset * (this.linkInfo.unitX + this.linkInfo.spaceX) + Math.floor(this.linkInfo.unitX / 2)\r\n      if (stopX > this.rectMain.left && stopX < this.rectMain.left + this.rectMain.width - 4 * this.scale) {\r\n        color = this.color.vol\r\n        price = getValue(this.sourceSeer, 'buy', no)\r\n        yl = this.rectMain.top + Math.round((this.maxmin.max - price) * this.maxmin.unitY)\r\n        if (inArray(status, [102, 202])) {\r\n          color = this.color.green\r\n          price = getValue(this.sourceSeer, 'stoploss', no)\r\n          yl = this.rectMain.top + Math.round((this.maxmin.max - price) * this.maxmin.unitY)\r\n        } else if (inArray(status, [101, 201])) {\r\n          color = this.color.red\r\n          price = getValue(this.sourceSeer, 'target', no)\r\n          yl = this.rectMain.top + Math.round((this.maxmin.max - price) * this.maxmin.unitY)\r\n        } else if (inArray(status, [300])) {\r\n          color = this.color.txt\r\n        }\r\n        _drawSignCircle(this.context, stopX, yl, {\r\n          r: 3 * this.scale,\r\n          clr: color\r\n        }\r\n          // { r: 2 * this.scale, clr: this.color.back },\r\n        )\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * filter seer\r\n   * @return {Array}\r\n   * @memberof ClDrawSeer\r\n   */\r\n  filterSeer () {\r\n    const out = {}\r\n    for (let i = 0; i < this.sourceSeer.value.length; i++) {\r\n      const curDate = getValue(this.sourceSeer, 'start', i)\r\n      let index = findNearTimeToIndex(this.data, curDate, 'time', 'forword')\r\n      if (index === -1) index = this.linkInfo.maxIndex\r\n      if (out[index] === undefined) {\r\n        out[index] = {\r\n          nos: [],\r\n          uids: []\r\n        }\r\n      }\r\n      out[index].name = 'SEER' + index\r\n      out[index].date = getValue(this.data, 'time', index)\r\n      out[index].nos.push(i)\r\n      out[index].uids.push(getValue(this.sourceSeer, 'uid', i))\r\n      // 这里判断当前节点是否存在热点\r\n      if (inArray(getValue(this.sourceSeer, 'uid', i), this.hotSeer.value)) {\r\n        out[index].focused = true\r\n        out[index].hotIdx = i\r\n      }\r\n    }\r\n    return out\r\n  }\r\n  /**\r\n   * before location\r\n   * @return {Number}\r\n   * @memberof ClDrawSeer\r\n   */\r\n  beforeLocation () {\r\n    this.linkInfo.rightMode = 'forword'\r\n    this.data = this.source.getData(this.father.hotKey)\r\n    const lastDate = this.data.value[this.data.value.length - 1][this.data.fields.time]\r\n\r\n    this.sourceSeer = this.source.getData('SEER')\r\n    this.hotSeer = this.source.getData('SEERHOT')\r\n\r\n    if (this.sourceSeer.value.length < 1) return 0\r\n    if (this.hotSeer === undefined) {\r\n      this.hotSeer = {\r\n        value: [getValue(this.sourceSeer, 'uid', 0)]\r\n      }\r\n    }\r\n    if (this.sourceSeer.value.length < 1) return 0\r\n    // 求最大最小日期\r\n    const maxmin = {\r\n      max: getValue(this.sourceSeer, 'start', 0),\r\n      min: getValue(this.sourceSeer, 'start', this.sourceSeer.value.length - 1)\r\n    }\r\n    // 除权处理\r\n    const rights = this.source.getData('RIGHT')\r\n    if (rights !== undefined) {\r\n      const lastval = copyArrayOfDeep(this.sourceSeer.value)\r\n      for (let i = 0; i < lastval.length; i++) {\r\n        lastval[i][FIELD_SEER.buy] =\r\n          getExrightPriceRange(maxmin.min, lastDate, lastval[i][FIELD_SEER.buy], rights.value)\r\n        lastval[i][FIELD_SEER.target] =\r\n          getExrightPriceRange(maxmin.min, lastDate, lastval[i][FIELD_SEER.target], rights.value)\r\n        lastval[i][FIELD_SEER.stoploss] =\r\n          getExrightPriceRange(maxmin.min, lastDate, lastval[i][FIELD_SEER.stoploss], rights.value)\r\n      }\r\n      // 这里必须重新指向，否则会重复除权\r\n      this.sourceSeer = {\r\n        key: 'SEER',\r\n        fields: FIELD_SEER,\r\n        value: lastval\r\n      }\r\n    }\r\n    // 整理标记点\r\n    this.showSeer = this.filterSeer() // name,date,[该按钮对应的id列表],chart按钮\r\n    // 创建标记点\r\n    for (const k in this.showSeer) {\r\n      this.showSeer[k].chart = this.father.createButton(this.showSeer[k].name)\r\n      maxmin.max = maxmin.max < this.showSeer[k].date ? this.showSeer[k].date : maxmin.max\r\n      maxmin.min = maxmin.min > this.showSeer[k].date ? this.showSeer[k].date : maxmin.min\r\n    }\r\n    // ???\r\n    // 下面开始压缩数据\r\n    // let out = copyArrayOfDeep(this.data.value)\r\n\r\n    this.hotKey = 'SEERDAY'\r\n    this.data = {key: 'SEERDAY', fields: FIELD_DAY, value: this.data.value}\r\n\r\n    this.linkInfo.showMode = 'fixed'\r\n    // this.linkInfo.fixed.left = 20\r\n    // this.linkInfo.fixed.right = 20\r\n    this.linkInfo.fixed.min = maxmin.min\r\n    this.linkInfo.fixed.max = maxmin.max\r\n  }\r\n  /**\r\n   * draw transfer react\r\n   * @param {Number} left\r\n   * @param {Number} right\r\n   * @memberof ClDrawSeer\r\n   */\r\n  drawTransRect (left, right) {\r\n    if (right < left) return\r\n    const clr = _setTransColor(this.color.grid, 0.5)\r\n    _fillRect(this.context, left, this.rectMain.top, right - left, this.rectMain.height, clr)\r\n  }\r\n  /**\r\n   * paint seer chart\r\n   * @param {Number} key\r\n   * @memberof ClDrawSeer\r\n   */\r\n  onPaint (key) {\r\n    // if (key !== undefined) this.hotKey = key\r\n    // this.data = this.source.getData(this.hotKey)\r\n    // 设置可见\r\n    for (const k in this.showSeer) {\r\n      let showPrice\r\n      if (this.showSeer[k].uids.length < 1) continue\r\n      // 如果只有一条记录就以买入价为定位，否则以收盘价为定位\r\n      if (this.showSeer[k].uids.length === 1) {\r\n        showPrice = getValue(this.sourceSeer, 'buy', this.showSeer[k].nos[0])\r\n      }\r\n      if (this.showSeer[k].focused === true) {\r\n        this.father.setHotButton(this.showSeer[k].chart)\r\n        if (this.hotSeer.value.length === 1) {\r\n          showPrice = getValue(this.sourceSeer, 'buy', this.showSeer[k].hotIdx)\r\n        }\r\n      }\r\n      const seerPos = this.getSeerPos(k, showPrice)\r\n\r\n      let num = '*'\r\n      if (this.showSeer[k].uids.length < 10) {\r\n        num = this.showSeer[k].uids.length.toString()\r\n      }\r\n      const acrR = this.layout.symbol.size / 2\r\n\r\n      this.showSeer[k].chart.init({\r\n        rectMain: {\r\n          left: seerPos.xx - acrR,\r\n          top: this.showSeer[k].focused ? seerPos.yy - acrR - 2 * acrR : seerPos.yy - acrR,\r\n          width: 2 * acrR,\r\n          height: this.showSeer[k].focused ? 2 * acrR + 2 * acrR : 2 * acrR\r\n        },\r\n        config: {\r\n          translucent: true,\r\n          visible: seerPos.visible,\r\n          status: this.showSeer[k].focused ? 'focused' : 'enabled',\r\n          shape: 'set'\r\n        },\r\n        info: [{\r\n          map: num\r\n        }]\r\n      },\r\n      result => {\r\n        // const self = result.self.father\r\n        const hotInfo = intersectArray(this.showSeer[k].uids, this.hotSeer.value)\r\n        if (hotInfo.length > 0) {\r\n          this.hotSeer.value = []\r\n          this.father.callback({\r\n            event: 'seerclick',\r\n            data: []\r\n          })\r\n          this.source.onPaint()\r\n        } else {\r\n          this.hotSeer.value = this.showSeer[k].uids\r\n          this.father.callback({\r\n            event: 'seerclick',\r\n            data: this.showSeer[k].uids\r\n          })\r\n          this.source.onPaint()\r\n        }\r\n      })\r\n    }\r\n    if (this.hotSeer.value.length === 1) {\r\n      for (let k = 0; k < this.sourceSeer.value.length; k++) {\r\n        if (getValue(this.sourceSeer, 'uid', k) === this.hotSeer.value[0]) {\r\n          this.drawHotSeer(k)\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\nimport { CHART_SEER } from './cl.seer.def'\r\nimport { FIELD_SEER } from './cl.seer'\r\nexport default {\r\n  CHART_SEER,\r\n  FIELD_SEER\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n// 以下是 ClDrawSeer 的实体定义\r\n\r\n// case 1: return '未生效';\r\n// case 2: return '股票停牌';\r\n// case 20: return '股东增持';\r\n// case 100: return '已生效(1 -> 100)';\r\n// case 101: return '已成功(100 -> 101)';\r\n// case 102: return '已失败(100 -> 102)';\r\n// case 200: return '未成功已结束(100 -> 200)';\r\n// case 201: return '成功已结束(101 -> 201)';\r\n// case 202: return '失败已结束(102 -> 202)';\r\n// case 300: return '未生效已结束(1/2 -> 300)';\r\n// case 400: return '错误';\r\n// 预定义参数\r\n\r\nimport ClDrawKBar from '../chart/cl.draw.kbar'\r\nimport ClDrawRight from '../chart/cl.draw.right'\r\nimport ClDrawSeer from './cl.seer'\r\n\r\n/** @module SeerConfig */\r\n\r\nexport const CHART_SEER = {\r\n  zoomInfo: {\r\n    index: 3,\r\n    list: [1, 2, 4, 5, 7, 9, 12, 15, 19]\r\n  },\r\n  // zoomInfo: {\r\n  //   min: 1,\r\n  //   max: 26,\r\n  //   index: 2, // value = index*index + 1 [1,2,5,10,17,26]\r\n  //   value: 7 // 实际的值，如果超过10，就会index=3，如果为4，index=1 index = sqrt（value - 1）\r\n  // },\r\n  scroll: {\r\n    display: 'none' // none不显示\r\n  },\r\n  title: {\r\n    display: 'none' // none 不显示 btn 按钮 text 文字\r\n  },\r\n  axisX: {\r\n    lines: 0,\r\n    display: 'both', // none不显示， both 两边各一个值, block ：根据lines每个块显示一个值 = 显示坐标\r\n    type: 'normal', // 有 day1 当日 day5 5日线 和 normal:日线 三种模式\r\n    format: 'date' // date time datetime normal tradetime(9:30) 根据交易时间此时 = 输出的信息格式    width: 50       // 显示宽度，web下\r\n  },\r\n  axisY: {\r\n    lines: 3,\r\n    left: {\r\n      display: 'both', // none不显示, both, noupper 不显示最上面, nofoot不显示最下面 = 显示坐标\r\n      middle: 'none', // 是否有中间值 'before'=前收盘 ‘zero’ 0为中间值\r\n      format: 'price' // 输出数据的格式 rate, price 保留一定小数位 vol 没有小数\r\n    },\r\n    right: {\r\n      display: 'both', // none不显示，noupper 不显示最上面, nofoot不显示最下面 = 显示坐标\r\n      middle: 'none', // 是否有中间值 'before'=前收盘 ‘zero’ 0为中间值\r\n      format: 'price' // rate, price vol\r\n    }\r\n  },\r\n  lines: [{\r\n    // type: 'l_kbar',\r\n    className: ClDrawKBar,\r\n    extremum: { // 如何取极值\r\n      method: 'normal', // fixedLeft fixedRight 上下固定,此时需要取axisY.middle的定义\r\n      maxvalue: ['high'], // 参与计算最大值的标签\r\n      minvalue: ['low'] // 参与计算最小值的标签\r\n    }\r\n    // 第一根线默认的key是跟随chart的hotKey变化而变化的，其他线要么自己有数据，要么根据hotKey加上公式计算出自己的key\r\n  },\r\n  {\r\n    className: ClDrawRight\r\n  },\r\n  {\r\n    className: ClDrawSeer\r\n  }]\r\n}\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n/**\r\n * Class representing a event\r\n * @export\r\n * @class EV\r\n */\r\nexport default class EV {\r\n  constructor () {\r\n    this.handlers = {}\r\n  }\r\n\r\n  /**\r\n   * emit an event\r\n   * @param {String} event event name\r\n   * @param {any} args event params\r\n   * @memberof EV\r\n   */\r\n  emit (event, ...args) {\r\n    if (this.handlers[event]) {\r\n      this\r\n        .handlers[event]\r\n        .forEach((handler) => handler.apply(this, args))\r\n    }\r\n  }\r\n  /**\r\n   * emit with special scope\r\n   * @param {any} event event name\r\n   * @param {any} scope scope\r\n   * @param {any} args event params\r\n   * @memberof EV\r\n   */\r\n  emitWithScope (event, scope, ...args) {\r\n    if (this.handlers[event]) {\r\n      this\r\n        .handlers[event]\r\n        .forEach((handler) => handler.apply(scope, args))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * listen event\r\n   * @param {any} event event name\r\n   * @param {any} callback listen callback\r\n   * @memberof EV\r\n   */\r\n  addEventListener (event, callback) {\r\n    if (!this.handlers[event]) {\r\n      this.handlers[event] = []\r\n    }\r\n    this\r\n      .handlers[event]\r\n      .push(callback)\r\n  }\r\n  /**\r\n   * listen only once\r\n   * @param {any} event event name\r\n   * @param {any} callback event listener callback function\r\n   * @memberof EV\r\n   */\r\n  once (event, callback) {\r\n    const self = this\r\n    self.on(event, function onetimeCallback () {\r\n      callback.apply(this, arguments)\r\n      self.removeListener(event, onetimeCallback)\r\n    })\r\n  }\r\n  /**\r\n   * remove special event listener by callback function\r\n   * @param {any} event event name\r\n   * @param {any} callback event listener callback function\r\n   * @memberof EV\r\n   */\r\n  removeEventListener (event, callback) {\r\n    if (this.handlers[event]) {\r\n      const index = this\r\n        .handlers[event]\r\n        .indexOf(callback)\r\n      if (index > -1) {\r\n        this\r\n          .handlers[event]\r\n          .splice(index, 1)\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * remove all listeners for events\r\n   * @param {any} event event name\r\n   * @memberof EV\r\n   */\r\n  removeAllListeners (event) {\r\n    this.handlers[event] = undefined\r\n  }\r\n};\r\n","/**\r\n * Copyright (c) 2018-present clchart Contributors.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\nimport ClChart from './chart/cl.chart'\r\nimport ClEvent from './event/cl.event'\r\nimport ClData from './data/cl.data'\r\n\r\nimport * as ClChartDef from './cl.chart.def'\r\nimport * as ClDataDef from './cl.data.def'\r\nimport ClPlugins from './plugins/cl.register'\r\n\r\nimport {\r\n  initSystem\r\n} from './chart/cl.chart.init'\r\n\r\nimport EV from './util/cl.ev'\r\n\r\n/** @module ClChart */\r\n\r\n/**\r\n * chart default defined\r\n * @export\r\n */\r\nexport const DEF_CHART = ClChartDef\r\n/**\r\n * data default defined\r\n * @export\r\n */\r\nexport const DEF_DATA = ClDataDef\r\n/**\r\n * plugins\r\n * @export\r\n */\r\nexport const PLUGINS = ClPlugins\r\n\r\n/**\r\n * utils\r\n * @export\r\n */\r\nexport const util = {\r\n  EV\r\n}\r\n\r\n/**\r\n * create single stock chart\r\n * @export\r\n * @param {Object} cfg SystemConfig\r\n * @returns chart instance\r\n */\r\nexport function createSingleChart (cfg) {\r\n  const sysInfo = initSystem(cfg)\r\n  const chart = new ClChart(sysInfo)\r\n  const event = new ClEvent(sysInfo)\r\n  const data = new ClData()\r\n\r\n  chart.initChart(data, event)\r\n  return chart\r\n}\r\n/**\r\n * create mulit stocks chart\r\n * processing\r\n * @export\r\n * @param {any} cfg SystemConfig\r\n * @returns charts instance\r\n */\r\nexport function createMulChart (cfg) {\r\n  const sysInfo = initSystem(cfg)\r\n  const event = new ClEvent(sysInfo)\r\n  const chartList = {}\r\n  for (const key in cfg.charts) {\r\n    const chart = new ClChart(sysInfo)\r\n    const data = new ClData()\r\n    chart.initChart(data, event)\r\n    chartList[key] = chart\r\n  }\r\n  return chartList\r\n}\r\n"],"sourceRoot":""}